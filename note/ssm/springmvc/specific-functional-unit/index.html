<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第一节 Ajax | Java全栈</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Java 基础, Java 部分源码, JVM, Spring, Spring Boot, Spring Cloud, 数据库原理, MySQL, ElasticSearch, Docker, Linux, 分布式, 中间件, Git">
    
    <link rel="preload" href="/javanote/assets/css/0.styles.1d83b9a0.css" as="style"><link rel="preload" href="/javanote/assets/js/app.4d8a0605.js" as="script"><link rel="preload" href="/javanote/assets/js/11.31b4bfe5.js" as="script"><link rel="preload" href="/javanote/assets/js/28.19eae749.js" as="script"><link rel="prefetch" href="/javanote/assets/js/10.c191a387.js"><link rel="prefetch" href="/javanote/assets/js/100.f858324b.js"><link rel="prefetch" href="/javanote/assets/js/101.cf545769.js"><link rel="prefetch" href="/javanote/assets/js/102.70c05b3a.js"><link rel="prefetch" href="/javanote/assets/js/103.f1004525.js"><link rel="prefetch" href="/javanote/assets/js/104.0d76607f.js"><link rel="prefetch" href="/javanote/assets/js/105.1706f100.js"><link rel="prefetch" href="/javanote/assets/js/106.c2ff977c.js"><link rel="prefetch" href="/javanote/assets/js/107.5aede27e.js"><link rel="prefetch" href="/javanote/assets/js/108.8ceb754f.js"><link rel="prefetch" href="/javanote/assets/js/109.0921def7.js"><link rel="prefetch" href="/javanote/assets/js/110.1b5f3a78.js"><link rel="prefetch" href="/javanote/assets/js/111.60c4a726.js"><link rel="prefetch" href="/javanote/assets/js/112.a779216c.js"><link rel="prefetch" href="/javanote/assets/js/113.b5d94b79.js"><link rel="prefetch" href="/javanote/assets/js/114.c6f877f7.js"><link rel="prefetch" href="/javanote/assets/js/115.47ecb381.js"><link rel="prefetch" href="/javanote/assets/js/116.92ec84e7.js"><link rel="prefetch" href="/javanote/assets/js/117.e4829b5a.js"><link rel="prefetch" href="/javanote/assets/js/118.b23c1a98.js"><link rel="prefetch" href="/javanote/assets/js/119.b43f94dd.js"><link rel="prefetch" href="/javanote/assets/js/12.fa4003f9.js"><link rel="prefetch" href="/javanote/assets/js/120.f30ed6c6.js"><link rel="prefetch" href="/javanote/assets/js/121.b0022ef6.js"><link rel="prefetch" href="/javanote/assets/js/122.8fffcc78.js"><link rel="prefetch" href="/javanote/assets/js/123.e3fa7a42.js"><link rel="prefetch" href="/javanote/assets/js/124.58e10cb2.js"><link rel="prefetch" href="/javanote/assets/js/125.1b49d5f0.js"><link rel="prefetch" href="/javanote/assets/js/126.7f8e276b.js"><link rel="prefetch" href="/javanote/assets/js/127.000a6e84.js"><link rel="prefetch" href="/javanote/assets/js/128.18177328.js"><link rel="prefetch" href="/javanote/assets/js/129.0a2b7f4e.js"><link rel="prefetch" href="/javanote/assets/js/13.c51f2bed.js"><link rel="prefetch" href="/javanote/assets/js/130.31bfbbdd.js"><link rel="prefetch" href="/javanote/assets/js/131.dab5fd7f.js"><link rel="prefetch" href="/javanote/assets/js/132.34fb1d32.js"><link rel="prefetch" href="/javanote/assets/js/133.3cc3cb6c.js"><link rel="prefetch" href="/javanote/assets/js/134.8b0d230c.js"><link rel="prefetch" href="/javanote/assets/js/135.905e9937.js"><link rel="prefetch" href="/javanote/assets/js/136.23e19c54.js"><link rel="prefetch" href="/javanote/assets/js/137.3c091787.js"><link rel="prefetch" href="/javanote/assets/js/138.83313b98.js"><link rel="prefetch" href="/javanote/assets/js/139.c8e9d90b.js"><link rel="prefetch" href="/javanote/assets/js/14.8fe80835.js"><link rel="prefetch" href="/javanote/assets/js/140.de3bddcd.js"><link rel="prefetch" href="/javanote/assets/js/141.1575c6e3.js"><link rel="prefetch" href="/javanote/assets/js/142.a6471307.js"><link rel="prefetch" href="/javanote/assets/js/143.ad7eb666.js"><link rel="prefetch" href="/javanote/assets/js/144.c43ced04.js"><link rel="prefetch" href="/javanote/assets/js/145.633601ea.js"><link rel="prefetch" href="/javanote/assets/js/146.b65b7a43.js"><link rel="prefetch" href="/javanote/assets/js/147.f6ba557e.js"><link rel="prefetch" href="/javanote/assets/js/148.046226ae.js"><link rel="prefetch" href="/javanote/assets/js/149.0ad83751.js"><link rel="prefetch" href="/javanote/assets/js/15.414ac078.js"><link rel="prefetch" href="/javanote/assets/js/150.230e4d1c.js"><link rel="prefetch" href="/javanote/assets/js/151.905804f3.js"><link rel="prefetch" href="/javanote/assets/js/152.154b514a.js"><link rel="prefetch" href="/javanote/assets/js/153.37aa1b21.js"><link rel="prefetch" href="/javanote/assets/js/154.76fcd840.js"><link rel="prefetch" href="/javanote/assets/js/155.684e2d46.js"><link rel="prefetch" href="/javanote/assets/js/156.2288654a.js"><link rel="prefetch" href="/javanote/assets/js/157.9550ddf7.js"><link rel="prefetch" href="/javanote/assets/js/158.6f176501.js"><link rel="prefetch" href="/javanote/assets/js/159.38b45246.js"><link rel="prefetch" href="/javanote/assets/js/16.f6bcfda9.js"><link rel="prefetch" href="/javanote/assets/js/160.24484228.js"><link rel="prefetch" href="/javanote/assets/js/161.f8a53ea7.js"><link rel="prefetch" href="/javanote/assets/js/162.91a5d72d.js"><link rel="prefetch" href="/javanote/assets/js/163.2ad88c09.js"><link rel="prefetch" href="/javanote/assets/js/164.4cefc831.js"><link rel="prefetch" href="/javanote/assets/js/165.96d54d27.js"><link rel="prefetch" href="/javanote/assets/js/166.3ced3f05.js"><link rel="prefetch" href="/javanote/assets/js/167.9fd4dada.js"><link rel="prefetch" href="/javanote/assets/js/168.64063340.js"><link rel="prefetch" href="/javanote/assets/js/169.49eefc79.js"><link rel="prefetch" href="/javanote/assets/js/17.5ebaaa3f.js"><link rel="prefetch" href="/javanote/assets/js/170.3938afd5.js"><link rel="prefetch" href="/javanote/assets/js/171.5eb5c5a0.js"><link rel="prefetch" href="/javanote/assets/js/172.a9e33ea2.js"><link rel="prefetch" href="/javanote/assets/js/173.98e6d831.js"><link rel="prefetch" href="/javanote/assets/js/174.03448352.js"><link rel="prefetch" href="/javanote/assets/js/175.64340ac0.js"><link rel="prefetch" href="/javanote/assets/js/176.2dc52060.js"><link rel="prefetch" href="/javanote/assets/js/177.bd69843e.js"><link rel="prefetch" href="/javanote/assets/js/178.59341490.js"><link rel="prefetch" href="/javanote/assets/js/179.cc35c0a6.js"><link rel="prefetch" href="/javanote/assets/js/18.62d03701.js"><link rel="prefetch" href="/javanote/assets/js/180.11ae1e52.js"><link rel="prefetch" href="/javanote/assets/js/181.3e438e5d.js"><link rel="prefetch" href="/javanote/assets/js/182.c53a8efc.js"><link rel="prefetch" href="/javanote/assets/js/183.8b441dfb.js"><link rel="prefetch" href="/javanote/assets/js/184.d7f6c4f5.js"><link rel="prefetch" href="/javanote/assets/js/185.b439d0f4.js"><link rel="prefetch" href="/javanote/assets/js/186.b68e5585.js"><link rel="prefetch" href="/javanote/assets/js/187.56de8200.js"><link rel="prefetch" href="/javanote/assets/js/188.841fcdf2.js"><link rel="prefetch" href="/javanote/assets/js/189.be2262c2.js"><link rel="prefetch" href="/javanote/assets/js/19.0efb6573.js"><link rel="prefetch" href="/javanote/assets/js/190.40a63f47.js"><link rel="prefetch" href="/javanote/assets/js/191.a61a7c80.js"><link rel="prefetch" href="/javanote/assets/js/192.88507421.js"><link rel="prefetch" href="/javanote/assets/js/193.d0a95520.js"><link rel="prefetch" href="/javanote/assets/js/194.c66644e0.js"><link rel="prefetch" href="/javanote/assets/js/195.fdaceef8.js"><link rel="prefetch" href="/javanote/assets/js/196.85a1da29.js"><link rel="prefetch" href="/javanote/assets/js/197.a0b73b7e.js"><link rel="prefetch" href="/javanote/assets/js/198.c46de3af.js"><link rel="prefetch" href="/javanote/assets/js/199.86ad5ea9.js"><link rel="prefetch" href="/javanote/assets/js/2.8a34de3e.js"><link rel="prefetch" href="/javanote/assets/js/20.25232ae5.js"><link rel="prefetch" href="/javanote/assets/js/200.3d524295.js"><link rel="prefetch" href="/javanote/assets/js/201.2352b044.js"><link rel="prefetch" href="/javanote/assets/js/202.c96b8ae2.js"><link rel="prefetch" href="/javanote/assets/js/203.344e4887.js"><link rel="prefetch" href="/javanote/assets/js/204.cedde8a4.js"><link rel="prefetch" href="/javanote/assets/js/205.76202206.js"><link rel="prefetch" href="/javanote/assets/js/206.c4406aa6.js"><link rel="prefetch" href="/javanote/assets/js/207.8a27b698.js"><link rel="prefetch" href="/javanote/assets/js/208.59f5b615.js"><link rel="prefetch" href="/javanote/assets/js/209.fd4a6c64.js"><link rel="prefetch" href="/javanote/assets/js/21.d432caaa.js"><link rel="prefetch" href="/javanote/assets/js/210.b0e3a8d1.js"><link rel="prefetch" href="/javanote/assets/js/211.7cb84367.js"><link rel="prefetch" href="/javanote/assets/js/212.e743f232.js"><link rel="prefetch" href="/javanote/assets/js/213.d50db884.js"><link rel="prefetch" href="/javanote/assets/js/214.6da86c20.js"><link rel="prefetch" href="/javanote/assets/js/215.fd5aa565.js"><link rel="prefetch" href="/javanote/assets/js/216.e95bcc55.js"><link rel="prefetch" href="/javanote/assets/js/217.2231449c.js"><link rel="prefetch" href="/javanote/assets/js/218.b8330003.js"><link rel="prefetch" href="/javanote/assets/js/219.aa7e9cf0.js"><link rel="prefetch" href="/javanote/assets/js/22.53113347.js"><link rel="prefetch" href="/javanote/assets/js/220.9ff6e0e6.js"><link rel="prefetch" href="/javanote/assets/js/23.2238c07a.js"><link rel="prefetch" href="/javanote/assets/js/24.cb7d3039.js"><link rel="prefetch" href="/javanote/assets/js/25.b4eaea24.js"><link rel="prefetch" href="/javanote/assets/js/26.e42a49f7.js"><link rel="prefetch" href="/javanote/assets/js/27.e7587f1f.js"><link rel="prefetch" href="/javanote/assets/js/29.9ddf7186.js"><link rel="prefetch" href="/javanote/assets/js/3.e91a84a2.js"><link rel="prefetch" href="/javanote/assets/js/30.a380d83f.js"><link rel="prefetch" href="/javanote/assets/js/31.02c44506.js"><link rel="prefetch" href="/javanote/assets/js/32.e4bff71a.js"><link rel="prefetch" href="/javanote/assets/js/33.e26b4f6b.js"><link rel="prefetch" href="/javanote/assets/js/34.187f65f5.js"><link rel="prefetch" href="/javanote/assets/js/35.6cd623a3.js"><link rel="prefetch" href="/javanote/assets/js/36.c018db78.js"><link rel="prefetch" href="/javanote/assets/js/37.fd665c05.js"><link rel="prefetch" href="/javanote/assets/js/38.123aa35e.js"><link rel="prefetch" href="/javanote/assets/js/39.58271e1f.js"><link rel="prefetch" href="/javanote/assets/js/4.953d09eb.js"><link rel="prefetch" href="/javanote/assets/js/40.d588f7b4.js"><link rel="prefetch" href="/javanote/assets/js/41.330ac4ba.js"><link rel="prefetch" href="/javanote/assets/js/42.4d2bcc61.js"><link rel="prefetch" href="/javanote/assets/js/43.e446c0f3.js"><link rel="prefetch" href="/javanote/assets/js/44.77abc34b.js"><link rel="prefetch" href="/javanote/assets/js/45.910e4aa5.js"><link rel="prefetch" href="/javanote/assets/js/46.7f8fd6bb.js"><link rel="prefetch" href="/javanote/assets/js/47.9e340085.js"><link rel="prefetch" href="/javanote/assets/js/48.b4c35e1e.js"><link rel="prefetch" href="/javanote/assets/js/49.807495b7.js"><link rel="prefetch" href="/javanote/assets/js/5.fe579469.js"><link rel="prefetch" href="/javanote/assets/js/50.71cfb288.js"><link rel="prefetch" href="/javanote/assets/js/51.8da13592.js"><link rel="prefetch" href="/javanote/assets/js/52.cf90a64f.js"><link rel="prefetch" href="/javanote/assets/js/53.c685fb7a.js"><link rel="prefetch" href="/javanote/assets/js/54.7d73666a.js"><link rel="prefetch" href="/javanote/assets/js/55.59497bd7.js"><link rel="prefetch" href="/javanote/assets/js/56.22cdda6e.js"><link rel="prefetch" href="/javanote/assets/js/57.36f6ee91.js"><link rel="prefetch" href="/javanote/assets/js/58.6655543d.js"><link rel="prefetch" href="/javanote/assets/js/59.1d073e32.js"><link rel="prefetch" href="/javanote/assets/js/6.1af208a0.js"><link rel="prefetch" href="/javanote/assets/js/60.f782c216.js"><link rel="prefetch" href="/javanote/assets/js/61.4f05bcba.js"><link rel="prefetch" href="/javanote/assets/js/62.d607ed0e.js"><link rel="prefetch" href="/javanote/assets/js/63.0d7a42e8.js"><link rel="prefetch" href="/javanote/assets/js/64.ce15498e.js"><link rel="prefetch" href="/javanote/assets/js/65.b9f31598.js"><link rel="prefetch" href="/javanote/assets/js/66.aeff3690.js"><link rel="prefetch" href="/javanote/assets/js/67.f6f59ffa.js"><link rel="prefetch" href="/javanote/assets/js/68.f875e4ca.js"><link rel="prefetch" href="/javanote/assets/js/69.d6512b6b.js"><link rel="prefetch" href="/javanote/assets/js/7.5739f4db.js"><link rel="prefetch" href="/javanote/assets/js/70.881dc1cf.js"><link rel="prefetch" href="/javanote/assets/js/71.263db750.js"><link rel="prefetch" href="/javanote/assets/js/72.58f08a97.js"><link rel="prefetch" href="/javanote/assets/js/73.df9399d4.js"><link rel="prefetch" href="/javanote/assets/js/74.1d6ddc56.js"><link rel="prefetch" href="/javanote/assets/js/75.fcb30922.js"><link rel="prefetch" href="/javanote/assets/js/76.46a74eb4.js"><link rel="prefetch" href="/javanote/assets/js/77.b5e7728c.js"><link rel="prefetch" href="/javanote/assets/js/78.fcc34355.js"><link rel="prefetch" href="/javanote/assets/js/79.9d5204da.js"><link rel="prefetch" href="/javanote/assets/js/8.26c83b6c.js"><link rel="prefetch" href="/javanote/assets/js/80.672a4f74.js"><link rel="prefetch" href="/javanote/assets/js/81.78acaf25.js"><link rel="prefetch" href="/javanote/assets/js/82.7755c8c3.js"><link rel="prefetch" href="/javanote/assets/js/83.9b495285.js"><link rel="prefetch" href="/javanote/assets/js/84.a1270bb3.js"><link rel="prefetch" href="/javanote/assets/js/85.64d4eb9a.js"><link rel="prefetch" href="/javanote/assets/js/86.9cd6604e.js"><link rel="prefetch" href="/javanote/assets/js/87.588e06ac.js"><link rel="prefetch" href="/javanote/assets/js/88.8dad582a.js"><link rel="prefetch" href="/javanote/assets/js/89.b19689ac.js"><link rel="prefetch" href="/javanote/assets/js/9.51e5d2e7.js"><link rel="prefetch" href="/javanote/assets/js/90.586b9559.js"><link rel="prefetch" href="/javanote/assets/js/91.c9188033.js"><link rel="prefetch" href="/javanote/assets/js/92.69a38839.js"><link rel="prefetch" href="/javanote/assets/js/93.f0c9bdcd.js"><link rel="prefetch" href="/javanote/assets/js/94.f8f6b855.js"><link rel="prefetch" href="/javanote/assets/js/95.a92c2c02.js"><link rel="prefetch" href="/javanote/assets/js/96.ab442531.js"><link rel="prefetch" href="/javanote/assets/js/97.8a60e627.js"><link rel="prefetch" href="/javanote/assets/js/98.3eed55eb.js"><link rel="prefetch" href="/javanote/assets/js/99.b9c138ea.js">
    <link rel="stylesheet" href="/javanote/assets/css/0.styles.1d83b9a0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/javanote/" class="home-link router-link-active"><!----> <span class="site-name">Java全栈</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础" class="mobile-dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/basic/java/day01/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/basic/linux/background/" class="nav-link">
  linux
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/basic/mysql/mysql-basic/" class="nav-link">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/basic/web/WEBday01_HTML-CSS/" class="nav-link">
  web
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="高级" class="dropdown-title"><span class="title">高级</span> <span class="arrow down"></span></button> <button type="button" aria-label="高级" class="mobile-dropdown-title"><span class="title">高级</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/advance/juc/chapter01/" class="nav-link">
  JUC
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/advance/jvm/chapter01/" class="nav-link">
  JVM
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/advance/mysql/chapter01/" class="nav-link">
  MYSQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><span class="title">中间件</span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/middleware/rabbitmq/day01/" class="nav-link">
  rabbitmq
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/middleware/elasticsearch/day01/" class="nav-link">
  elasticsearch
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/middleware/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/middleware/nginx/" class="nav-link">
  nginx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务" class="dropdown-title"><span class="title">微服务</span> <span class="arrow down"></span></button> <button type="button" aria-label="微服务" class="mobile-dropdown-title"><span class="title">微服务</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/microservice/springboot/" class="nav-link">
  springboot
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/microservice/springcloud/day01/" class="nav-link">
  springcloud
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/microservice/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/microservice/distributed-transaction/" class="nav-link">
  分布式事务
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/tools/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/tools/maven/maven-overview/" class="nav-link">
  maven
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ssm" class="dropdown-title"><span class="title">ssm</span> <span class="arrow down"></span></button> <button type="button" aria-label="ssm" class="mobile-dropdown-title"><span class="title">ssm</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/ssm/mybatis/preface/" class="nav-link">
  mybatis
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/ssm/spring/AOP-aspect-oriented-programming/agency-model/" class="nav-link">
  spring
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/ssm/springmvc/basic-function/" class="nav-link">
  springmvc
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/others/cryptography/" class="nav-link">
  密码学
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础" class="mobile-dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/basic/java/day01/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/basic/linux/background/" class="nav-link">
  linux
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/basic/mysql/mysql-basic/" class="nav-link">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/basic/web/WEBday01_HTML-CSS/" class="nav-link">
  web
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="高级" class="dropdown-title"><span class="title">高级</span> <span class="arrow down"></span></button> <button type="button" aria-label="高级" class="mobile-dropdown-title"><span class="title">高级</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/advance/juc/chapter01/" class="nav-link">
  JUC
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/advance/jvm/chapter01/" class="nav-link">
  JVM
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/advance/mysql/chapter01/" class="nav-link">
  MYSQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><span class="title">中间件</span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/middleware/rabbitmq/day01/" class="nav-link">
  rabbitmq
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/middleware/elasticsearch/day01/" class="nav-link">
  elasticsearch
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/middleware/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/middleware/nginx/" class="nav-link">
  nginx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务" class="dropdown-title"><span class="title">微服务</span> <span class="arrow down"></span></button> <button type="button" aria-label="微服务" class="mobile-dropdown-title"><span class="title">微服务</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/microservice/springboot/" class="nav-link">
  springboot
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/microservice/springcloud/day01/" class="nav-link">
  springcloud
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/microservice/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/microservice/distributed-transaction/" class="nav-link">
  分布式事务
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/tools/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/tools/maven/maven-overview/" class="nav-link">
  maven
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ssm" class="dropdown-title"><span class="title">ssm</span> <span class="arrow down"></span></button> <button type="button" aria-label="ssm" class="mobile-dropdown-title"><span class="title">ssm</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/ssm/mybatis/preface/" class="nav-link">
  mybatis
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/ssm/spring/AOP-aspect-oriented-programming/agency-model/" class="nav-link">
  spring
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/ssm/springmvc/basic-function/" class="nav-link">
  springmvc
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/others/cryptography/" class="nav-link">
  密码学
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>mybatis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>springmvc</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javanote/note/ssm/springmvc/basic-function/" class="sidebar-link">第一节 获取原生Servlet API对象</a></li><li><a href="/javanote/note/ssm/springmvc/principle-of-operation/" class="sidebar-link">第一节 启动过程</a></li><li><a href="/javanote/note/ssm/springmvc/request&amp;response/" class="sidebar-link">第一节 概述</a></li><li><a href="/javanote/note/ssm/springmvc/restful/" class="sidebar-link">第一节 RESTFul概述</a></li><li><a href="/javanote/note/ssm/springmvc/specific-functional-unit/" aria-current="page" class="active sidebar-link">第一节 Ajax</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_1、实验一" class="sidebar-link">1、实验一</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_2、实验二" class="sidebar-link">2、实验二</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_3、实验三" class="sidebar-link">3、实验三</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_4、实验四" class="sidebar-link">4、实验四</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_5、-restcontroller" class="sidebar-link">5、@RestController</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_6、springmvc-4-版本响应体字符集设置" class="sidebar-link">6、SpringMVC 4 版本响应体字符集设置</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_1、概念" class="sidebar-link">1、概念</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_2、使用" class="sidebar-link">2、使用</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_3、案例" class="sidebar-link">3、案例</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_1、自动类型转换" class="sidebar-link">1、自动类型转换</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_2、日期和数值类型" class="sidebar-link">2、日期和数值类型</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_3、转换失败后处理方式" class="sidebar-link">3、转换失败后处理方式</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_4、自定义类型转换器" class="sidebar-link">4、自定义类型转换器</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_1、校验概述" class="sidebar-link">1、校验概述</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_2、操作演示" class="sidebar-link">2、操作演示</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_1、概念-2" class="sidebar-link">1、概念</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_2、异常映射的好处" class="sidebar-link">2、异常映射的好处</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_3、基于-xml-的异常映射" class="sidebar-link">3、基于 XML 的异常映射</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_4、基于注解的异常映射" class="sidebar-link">4、基于注解的异常映射</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_5、区分请求类型" class="sidebar-link">5、区分请求类型</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_1、表单" class="sidebar-link">1、表单</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_2、springmvc-环境要求" class="sidebar-link">2、SpringMVC 环境要求</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_3、handler-方法接收数据" class="sidebar-link">3、handler 方法接收数据</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_4、multipartfile-接口" class="sidebar-link">4、MultipartFile 接口</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_5、文件转存" class="sidebar-link">5、文件转存</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_1、初始形态" class="sidebar-link">1、初始形态</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_2、明确要求浏览器提示下载" class="sidebar-link">2、明确要求浏览器提示下载</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_3、典型应用场景举例" class="sidebar-link">3、典型应用场景举例</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_1、springmvc-配置文件的默认位置" class="sidebar-link">1、SpringMVC 配置文件的默认位置</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_2、请求映射其他方式" class="sidebar-link">2、请求映射其他方式</a></li><li class="sidebar-sub-header"><a href="/javanote/note/ssm/springmvc/specific-functional-unit/#_3、-modelattribute-注解" class="sidebar-link">3、@ModelAttribute 注解</a></li></ul></li><li><a href="/javanote/note/ssm/springmvc/ssm-integration/" class="sidebar-link">第一节 Spring 和 Mybatis 整合</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="第一节-ajax"><a href="#第一节-ajax" class="header-anchor">#</a> 第一节 Ajax</h1> <h2 id="_1、实验一"><a href="#_1、实验一" class="header-anchor">#</a> 1、实验一</h2> <p>请求：发送普通请求参数</p> <p>handler 方法：使用 @RequestParam 注解接收请求参数</p> <p>响应：服务器端返回普通文本</p> <h3 id="_1引入-javascript-库"><a href="#_1引入-javascript-库" class="header-anchor">#</a> ①引入 JavaScript 库</h3> <p><img alt="./images" data-src="data:image/png;base64,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" loading="lazy" class="lazy"></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>script/vue.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>script/axios.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_2前端代码"><a href="#_2前端代码" class="header-anchor">#</a> ②前端代码</h3> <div class="language-html extra-class"><pre class="language-html"><code>new Vue({
&quot;el&quot;:&quot;#btnSpan&quot;,
&quot;methods&quot;:{
&quot;experimentOne&quot;:function () {

// 请求：发送普通请求参数
// 响应：普通文本
axios({
&quot;method&quot;:&quot;post&quot;,
&quot;url&quot;:&quot;ajax/experiment/one&quot;,
&quot;params&quot;:{
&quot;userName&quot;:&quot;tom&quot;,
&quot;password&quot;:&quot;123456&quot;
}
}).then(function (response) {

// response接收服务器端返回的响应数据
console.log(response);
}).catch(function (response) {
console.log(response);
});

}
}
});
</code></pre></div><h3 id="_3后端代码"><a href="#_3后端代码" class="header-anchor">#</a> ③后端代码</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 使用@ResponseBody注解告诉 SpringMVC：请你拿当前方法的返回值作为响应体，不要再找视图了</span>
<span class="token comment">// 方法返回值类型有两种情况：</span>
<span class="token comment">// 情况一：简单类型。SpringMVC 会直接作为响应体数据。</span>
<span class="token comment">// 情况二：复杂类型。SpringMVC 会把它转换为 JSON 然后再作为响应体。此时需要 Jackson 的支持。</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/ajax/experiment/one&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">experimentOne</span><span class="token punctuation">(</span>

        <span class="token comment">// Ajax请求发过来的请求参数，对服务器端来说没有区别，还是像以前一样正常接收</span>
        <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;userName&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> userName<span class="token punctuation">,</span>
        <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> password
<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;userName = &quot;</span> <span class="token operator">+</span> userName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;password = &quot;</span> <span class="token operator">+</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 服务器端给Ajax程序的响应数据通过handler方法的返回值提供</span>
    <span class="token keyword">return</span> <span class="token string">&quot;message from handler as response[来自服务器的问候]&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2、实验二"><a href="#_2、实验二" class="header-anchor">#</a> 2、实验二</h2> <p>请求：让整个请求体就是一个 JSON 数据</p> <p>handler 方法：使用 @RequestBody 标记的实体类接收请求体数据</p> <p>响应：返回普通文本</p> <h3 id="_1前端代码"><a href="#_1前端代码" class="header-anchor">#</a> ①前端代码</h3> <div class="language-html extra-class"><pre class="language-html"><code>&quot;experimentTwo&quot;:function () {

axios({
&quot;method&quot;:&quot;post&quot;,
&quot;url&quot;:&quot;ajax/experiment/two&quot;,

// data属性中指定一个 JSON 数据作为请求体
&quot;data&quot;:{
&quot;stuId&quot;: 55,
&quot;stuName&quot;: &quot;tom&quot;,
&quot;subjectList&quot;: [
{
&quot;subjectName&quot;: &quot;java&quot;,
&quot;subjectScore&quot;: 50.55
},
{
&quot;subjectName&quot;: &quot;php&quot;,
&quot;subjectScore&quot;: 30.26
}
],
&quot;teacherMap&quot;: {
&quot;one&quot;: {
&quot;teacherName&quot;:&quot;tom&quot;,
&quot;teacherAge&quot;:23
},
&quot;two&quot;: {
&quot;teacherName&quot;:&quot;jerry&quot;,
&quot;teacherAge&quot;:31
},
},
&quot;school&quot;: {
&quot;schoolId&quot;: 23,
&quot;schoolName&quot;: &quot;atguigu&quot;
}
}
}).then(function (response) {
console.log(response);
}).catch(function (error) {
console.log(error);
});

}
</code></pre></div><h3 id="_2后端代码"><a href="#_2后端代码" class="header-anchor">#</a> ②后端代码</h3> <h4 id="_1-导入依赖"><a href="#_1-导入依赖" class="header-anchor">#</a> [1]导入依赖</h4> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-databind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.12.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>如果忘记导入这个依赖，会看到下面的错误页面：</p> <p><img alt="./images" data-src="/javanote/assets/img/img002.b08ab317.png" loading="lazy" class="lazy"></p> <p>关于 SpringMVC 和 Jackson jar包之间的关系，需要注意：当 SpringMVC 需要解析 JSON 数据时就需要使用 Jackson 的支持。但是 SpringMVC 的 jar 包并没有依赖 Jackson，所以需要我们自己导入。</p> <p>我们自己导入时需要注意：SpringMVC 和 Jackson 配合使用有版本的要求。二者中任何一个版本太高或太低都不行。</p> <p>SpringMVC 解析 JSON 数据包括两个方向：</p> <ul><li>从 JSON 字符串到 Java 实体类。</li> <li>从 Java 实体类到 JSON 字符串。</li></ul> <p>另外，如果导入了 Jackson 依赖，但是没有开启 mvc:annotation-driven 功能，那么仍然会返回上面的错误页面。</p> <p>也就是说，我们可以这么总结 SpringMVC 想要解析 JSON 数据需要两方面支持：</p> <ul><li>mvc:annotation-driven</li> <li>引入 Jackson 依赖</li></ul> <p>还有一点，如果运行环境是 Tomcat7，那么在 Web 应用启动时会抛出下面异常：</p> <blockquote><p>org.apache.tomcat.util.bcel.classfile. ClassFormatException: Invalid byte tag in constant pool: 19</p></blockquote> <p>解决办法是使用 Tomcat8 或更高版本。</p> <h4 id="_2-handler-方法"><a href="#_2-handler-方法" class="header-anchor">#</a> [2]handler 方法</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@ResponseBody</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/ajax/experiment/two&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">experimentTwo</span><span class="token punctuation">(</span>

        <span class="token comment">// 使用 @RequestBody 注解将请求体 JSON 数据解析出来，注入到对应的实体类中</span>
        <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Student</span> student
        <span class="token punctuation">)</span> <span class="token punctuation">{</span>

    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token string">&quot;message from handler as response[来自服务器的问候]&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-requestbody注解"><a href="#_3-requestbody注解" class="header-anchor">#</a> [3]@RequestBody注解</h4> <p>适用 @RequestBody 注解的场景：请求体整个是一个 JSON 数据</p> <p><img alt="./images" data-src="/javanote/assets/img/img003.e8d7516a.png" loading="lazy" class="lazy"></p> <p>Request Payload 翻译成中文大致可以说：请求负载。</p> <h2 id="_3、实验三"><a href="#_3、实验三" class="header-anchor">#</a> 3、实验三</h2> <p>请求：发送普通的请求参数，请求参数整体正好对应实体类</p> <p>handler 方法：使用普通实体类接收请求参数</p> <p>响应：返回普通文本数据</p> <h3 id="_1前端代码-2"><a href="#_1前端代码-2" class="header-anchor">#</a> ①前端代码</h3> <div class="language-html extra-class"><pre class="language-html"><code>&quot;experimentThree&quot;:function () {

axios({
&quot;method&quot;:&quot;post&quot;,
&quot;url&quot;:&quot;ajax/experimentThree&quot;,

// 普通的请求参数正好对应服务器端的一个实体类
&quot;params&quot;:{
&quot;soldierId&quot;:&quot;666&quot;,
&quot;soldierName&quot;:&quot;tigerMan&quot;
}
}).then(function (response) {
console.log(response);
}).catch(function (error) {
console.log(error);
});

}
</code></pre></div><h3 id="_2后端代码-2"><a href="#_2后端代码-2" class="header-anchor">#</a> ②后端代码</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@ResponseBody</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/ajax/experimentThree&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">experimentThree</span><span class="token punctuation">(</span>

        <span class="token comment">// 请求参数名正好对这个实体类的属性名，可以通过 setXxx() 方法直接注入</span>
        <span class="token class-name">Soldier</span> soldier<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span>soldier<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token string">&quot;message from handler as response[来自服务器的问候]&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3常见错误"><a href="#_3常见错误" class="header-anchor">#</a> ③常见错误</h3> <p>如果前端程序使用 axios 的 params 属性发送请求参数，那么请求参数会附着在 URL 地址后面，此时当前请求没有请求体。同时服务器端 handler 方法使用了 @RequestBody 注解，会在日志中看到下面异常信息：</p> <blockquote><p>HttpMessageNotReadableException: Required request body is missing:</p></blockquote> <p>意思是需要请求体，但是没有找到。</p> <h2 id="_4、实验四"><a href="#_4、实验四" class="header-anchor">#</a> 4、实验四</h2> <p>请求：不需要发送任何数据</p> <p>handler 方法：返回实体类</p> <p>响应：服务器端返回由实体类生成的 JSON 数据</p> <h3 id="_1前端代码-3"><a href="#_1前端代码-3" class="header-anchor">#</a> ①前端代码</h3> <div class="language-html extra-class"><pre class="language-html"><code>&quot;experimentFour&quot;:function () {

axios({
&quot;method&quot;:&quot;post&quot;,
&quot;url&quot;:&quot;ajax/experimentFour&quot;
}).then(function (response) {
console.log(response);

// 服务器返回的响应体数据被封装到了 data 属性中
console.log(response.data);
console.log(&quot;response.data.soldierId = &quot; + response.data.soldierId);
console.log(&quot;response.data.soldierName = &quot; + response.data.soldierName);
}).catch(function (error) {
console.log(error);
});

}
</code></pre></div><h3 id="_2后端代码-3"><a href="#_2后端代码-3" class="header-anchor">#</a> ②后端代码</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 使用 @ResponseBody 注解标记的方法返回实体类数据时，</span>
<span class="token comment">// SpringMVC 需要借助 Jackson 来将实体类转换为 JSON 数据</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/ajax/experimentFour&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Soldier</span> <span class="token function">experimentFour</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Soldier</span><span class="token punctuation">(</span><span class="token number">333</span><span class="token punctuation">,</span> <span class="token string">&quot;catMan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>浏览器控制台打印效果如下：</p> <p><img alt="./images" data-src="data:image/png;base64,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" loading="lazy" class="lazy"></p> <h3 id="_3常见错误-2"><a href="#_3常见错误-2" class="header-anchor">#</a> ③常见错误</h3> <h4 id="_1-415-错误"><a href="#_1-415-错误" class="header-anchor">#</a> [1]415 错误</h4> <p><img alt="iamges" data-src="/javanote/assets/img/img005.572748fd.png" loading="lazy" class="lazy"></p> <p>出现上面的错误页面，表示 SpringMVC 为了将 实体类对象转换为 JSON 数据，需要转换器。但是现在找不到转换器。它想要成功完成转换需要两方面支持：</p> <ul><li>mvc:annotation-driven</li> <li>引入 Jackson 依赖</li></ul> <h4 id="_2-406-错误"><a href="#_2-406-错误" class="header-anchor">#</a> [2]406 错误</h4> <p><img alt="iamges" data-src="data:image/png;base64,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" loading="lazy" class="lazy"></p> <p>问题出现的原因：</p> <ul><li>请求地址扩展名：html</li> <li>服务器端打算返回的数据格式：JSON</li></ul> <p>上面二者不一致。SpringMVC 要坚守一个商人的良心，不能干『挂羊头，卖狗肉』的事儿。解决办法有三种思路：</p> <ul><li>第一种方法：不使用请求扩展名</li> <li>第二种方法：使用和实际返回的数据格式一致的扩展名</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>dispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>*.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>*.json<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>第三种方法：使用一个 HTTP 协议中没有被定义的扩展名，例如：*.atguigu</li></ul> <h2 id="_5、-restcontroller"><a href="#_5、-restcontroller" class="header-anchor">#</a> 5、@RestController</h2> <h3 id="_1提取-responsebody"><a href="#_1提取-responsebody" class="header-anchor">#</a> ①提取@ResponseBody</h3> <p>如果类中每个方法上都标记了 @ResponseBody 注解，那么这些注解就可以提取到类上。</p> <h3 id="_2合并"><a href="#_2合并" class="header-anchor">#</a> ②合并</h3> <p>类上的 @ResponseBody 注解可以和 @Controller 注解合并为 @RestController 注解。所以使用了 @RestController 注解就相当于给类中的每个方法都加了 @ResponseBody 注解。</p> <h3 id="_3-restcontroller源码"><a href="#_3-restcontroller源码" class="header-anchor">#</a> ③@RestController源码</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">RestController</span> <span class="token punctuation">{</span>

	<span class="token comment">/**
	 * The value may indicate a suggestion for a logical component name,
	 * to be turned into a Spring bean in case of an autodetected component.
	 * @return the suggested component name, if any (or empty String otherwise)
	 * @since 4.0.1
	 */</span>
	<span class="token annotation punctuation">@AliasFor</span><span class="token punctuation">(</span>annotation <span class="token operator">=</span> <span class="token class-name">Controller</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
	<span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><h2 id="_6、springmvc-4-版本响应体字符集设置"><a href="#_6、springmvc-4-版本响应体字符集设置" class="header-anchor">#</a> 6、SpringMVC 4 版本响应体字符集设置</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 当返回响应体数据包含乱码时，在@RequestMapping注解中设置</span>
<span class="token comment">// produces属性给响应体设置内容类型</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/ajax/get/message&quot;</span><span class="token punctuation">,</span> produces <span class="token operator">=</span> <span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;message from server:你好&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 如果返回 JSON 数据时遇到乱码问题，那么内容类型应设置为：application/json;charset=UTF-8</span>
<span class="token comment">// 这里需要注意：JSON 属于 application 这个大类，不属于 text</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/ajax/get/entity&quot;</span><span class="token punctuation">,</span> produces <span class="token operator">=</span> <span class="token string">&quot;application/json;charset=UTF-8&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Emp</span> <span class="token function">getEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token class-name">Emp</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    emp<span class="token punctuation">.</span><span class="token function">setEmpName</span><span class="token punctuation">(</span><span class="token string">&quot;舔狗&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> emp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h1 id="第二节-拦截器"><a href="#第二节-拦截器" class="header-anchor">#</a> 第二节 拦截器</h1> <h2 id="_1、概念"><a href="#_1、概念" class="header-anchor">#</a> 1、概念</h2> <h3 id="_1拦截器和过滤器解决类似的问题"><a href="#_1拦截器和过滤器解决类似的问题" class="header-anchor">#</a> ①拦截器和过滤器解决类似的问题</h3> <h4 id="_1-生活中坐地铁的场景"><a href="#_1-生活中坐地铁的场景" class="header-anchor">#</a> [1]生活中坐地铁的场景</h4> <p>为了提高乘车效率，在乘客进入站台前统一检票：</p> <p><img alt="./images" data-src="data:image/png;base64,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" loading="lazy" class="lazy"></p> <h4 id="_2-程序中"><a href="#_2-程序中" class="header-anchor">#</a> [2]程序中</h4> <p>在程序中，使用拦截器在请求到达具体 handler 方法前，统一执行检测。</p> <p><img alt="./images" data-src="data:image/png;base64,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" loading="lazy" class="lazy"></p> <h3 id="_2拦截器-vs-过滤器"><a href="#_2拦截器-vs-过滤器" class="header-anchor">#</a> ②拦截器 VS 过滤器</h3> <h4 id="_1-相似点"><a href="#_1-相似点" class="header-anchor">#</a> [1]相似点</h4> <p>三要素相同</p> <ul><li>拦截：必须先把请求拦住，才能执行后续操作</li> <li>过滤：拦截器或过滤器存在的意义就是对请求进行统一处理</li> <li>放行：对请求执行了必要操作后，放请求过去，让它访问原本想要访问的资源</li></ul> <h4 id="_2-不同点"><a href="#_2-不同点" class="header-anchor">#</a> [2]不同点</h4> <ul><li>工作平台不同
<ul><li>过滤器工作在 Servlet 容器中</li> <li>拦截器工作在 SpringMVC 的基础上</li></ul></li> <li>拦截的范围
<ul><li>过滤器：能够拦截到的最大范围是整个 Web 应用</li> <li>拦截器：能够拦截到的最大范围是整个 SpringMVC 负责的请求</li></ul></li> <li>IOC 容器支持
<ul><li>过滤器：想得到 IOC 容器需要调用专门的工具方法，是间接的</li> <li>拦截器：它自己就在 IOC 容器中，所以可以直接从 IOC 容器中装配组件，也就是可以直接得到 IOC 容器的支持</li></ul></li></ul> <h4 id="_3-选择"><a href="#_3-选择" class="header-anchor">#</a> [3]选择</h4> <p>功能需要如果用 SpringMVC 的拦截器能够实现，就不使用过滤器。</p> <h2 id="_2、使用"><a href="#_2、使用" class="header-anchor">#</a> 2、使用</h2> <h3 id="_1创建拦截器类"><a href="#_1创建拦截器类" class="header-anchor">#</a> ①创建拦截器类</h3> <h4 id="_1-实现接口"><a href="#_1-实现接口" class="header-anchor">#</a> [1]实现接口</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Process01Interceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">{</span>

    <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 在处理请求的目标 handler 方法前执行</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Process01Interceptor preHandle方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 返回true：放行</span>
        <span class="token comment">// 返回false：不放行</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 在目标 handler 方法之后，渲染视图之前</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">ModelAndView</span> modelAndView<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Process01Interceptor postHandle方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 渲染视图之后执行</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterCompletion</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Process01Interceptor afterCompletion方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>单个拦截器执行顺序：</p> <ul><li>preHandle() 方法</li> <li>目标 handler 方法</li> <li>postHandle() 方法</li> <li>渲染视图</li> <li>afterCompletion() 方法</li></ul> <h4 id="_2-继承类"><a href="#_2-继承类" class="header-anchor">#</a> [2]继承类</h4> <p>在较低版本的 SpringMVC 中，实现 HandlerInterceptor 接口需要把所有抽象方法都实现。但是又不是每个方法都需要使用，导致代码比较繁琐。</p> <p>此时可以通过继承 HandlerInterceptorAdapter 类同样可以创建拦截器类。HandlerInterceptorAdapter 类中已经给 HandlerInterceptor 接口提供了默认实现，我们继承后不需要把每个方法都实现，只需要把有用的方法重写即可。</p> <p>在 SpringMVC 较高版本（例如：5.3版本以上）中，HandlerInterceptor 接口已经借助 JDK 1.8 新特性让每个抽象方法都给出了默认实现，所以 HandlerInterceptorAdapter 这个类被标记为过时。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Deprecated</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">HandlerInterceptorAdapter</span> <span class="token keyword">implements</span> <span class="token class-name">AsyncHandlerInterceptor</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2注册拦截器"><a href="#_2注册拦截器" class="header-anchor">#</a> ②注册拦截器</h3> <h4 id="_1-默认拦截全部请求"><a href="#_1-默认拦截全部请求" class="header-anchor">#</a> [1]默认拦截全部请求</h4> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 注册拦截器 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 直接通过内部 bean 配置的拦截器默认拦截全部请求（SpringMVC 范围内） --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.atguigu.mvc.interceptor.Process01Interceptor<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_2-配置拦截路径"><a href="#_2-配置拦截路径" class="header-anchor">#</a> [2]配置拦截路径</h4> <h5 id="_1-精确匹配"><a href="#_1-精确匹配" class="header-anchor">#</a> (1)精确匹配</h5> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 具体配置拦截器可以指定拦截的请求地址 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 精确匹配 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>mapping</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/common/request/one<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.atguigu.mvc.interceptor.Process03Interceptor<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h5 id="_2-模糊匹配-匹配单层路径"><a href="#_2-模糊匹配-匹配单层路径" class="header-anchor">#</a> (2)模糊匹配：匹配单层路径</h5> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- /*匹配路径中的一层 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>mapping</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/common/request/*<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.atguigu.mvc.interceptor.Process04Interceptor<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h5 id="_3-模糊匹配-匹配多层路径"><a href="#_3-模糊匹配-匹配多层路径" class="header-anchor">#</a> (3)模糊匹配：匹配多层路径</h5> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- /**匹配路径中的多层 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>mapping</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/common/request/**<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.atguigu.mvc.interceptor.Process05Interceptor<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_3-配置不拦截路径"><a href="#_3-配置不拦截路径" class="header-anchor">#</a> [3]配置不拦截路径</h4> <div class="language-xml extra-class"><pre class="language-xml"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- /**匹配路径中的多层 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>mapping</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/common/request/**<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

            <span class="token comment">&lt;!-- 使用 mvc:exclude-mapping 标签配置不拦截的地址 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>exclude-mapping</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/common/request/two/bbb<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.atguigu.mvc.interceptor.Process05Interceptor<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_3多个拦截器执行顺序"><a href="#_3多个拦截器执行顺序" class="header-anchor">#</a> ③多个拦截器执行顺序</h3> <ul><li>preHandle()方法：和配置的顺序一样</li> <li>目标handler方法</li> <li>postHandle()方法：和配置的顺序相反</li> <li>渲染视图</li> <li>afterCompletion()方法：和配置的顺序相反</li></ul> <h2 id="_3、案例"><a href="#_3、案例" class="header-anchor">#</a> 3、案例</h2> <p>一个网站有 5 个资源，其中两个无须登录即可访问，另外三个需要登录后才能访问。如果不登录就访问那三个资源，会自动跳转到登录页面并给出提示：请登录后再操作。</p> <p>提示：将数据存入请求域、转发或重定向请求都需要使用原生对象来完成，在拦截器中 SpringMVC 并没有提供 Model、ModelMap 等 API 供我们使用。</p> <p>访问资源的请求地址可参考：</p> <ul><li>公共资源1：/public/resource/one</li> <li>公共资源2：/public/resouce/two</li> <li>私密资源1：/private/resouce/one</li> <li>私密资源2：/private/resouce/two</li> <li>私密资源3：/private/resouce/three</li></ul> <p><a href="/javanote/note/ssm/springmvc/specific-functional-unit/verse02/homework.html">参考代码</a></p> <h1 id="第三节-类型转换"><a href="#第三节-类型转换" class="header-anchor">#</a> 第三节 类型转换</h1> <p>SpringMVC 将『把请求参数注入到 POJO 对象』这个操作称为『数据绑定』，英文单词是 binding。数据类型的转换和格式化就发生在数据绑定的过程中。 类型转换和格式化是密不可分的两个过程，很多带格式的数据必须明确指定格式之后才可以进行类型转换。最典型的就是日期类型。</p> <h2 id="_1、自动类型转换"><a href="#_1、自动类型转换" class="header-anchor">#</a> 1、自动类型转换</h2> <p>HTTP 协议是一个无类型的协议，我们在服务器端接收到请求参数等形式的数据时，本质上都是字符串类型。请看 javax.servlet. ServletRequest 接口中获取全部请求参数的方法：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token function">getParameterMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>而我们在实体类当中需要的类型是非常丰富的。对此，SpringMVC 对基本数据类型提供了自动的类型转换。例如：请求参数传入“100”字符串，我们实体类中需要的是 Integer 类型，那么 SpringMVC 会自动将字符串转换为 Integer 类型注入实体类。</p> <h2 id="_2、日期和数值类型"><a href="#_2、日期和数值类型" class="header-anchor">#</a> 2、日期和数值类型</h2> <h3 id="_1通过注解设定数据格式"><a href="#_1通过注解设定数据格式" class="header-anchor">#</a> ①通过注解设定数据格式</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@DateTimeFormat</span><span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> productDate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@NumberFormat</span><span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token string">&quot;###,###,###.###&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> productPrice<span class="token punctuation">;</span>
</code></pre></div><h3 id="_2表单"><a href="#_2表单" class="header-anchor">#</a> ②表单</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name"><span class="token namespace">th:</span>action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/save/product}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    生产日期：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>productDate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1992-10-15 17:15:06<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
    产品价格：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>productPrice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>111,222,333.444<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>保存<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_3handler-方法"><a href="#_3handler-方法" class="header-anchor">#</a> ③handler 方法</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save/product&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">saveProduct</span><span class="token punctuation">(</span><span class="token class-name">Product</span> product<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span>product<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token string">&quot;target&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_3、转换失败后处理方式"><a href="#_3、转换失败后处理方式" class="header-anchor">#</a> 3、转换失败后处理方式</h2> <h3 id="_1默认结果"><a href="#_1默认结果" class="header-anchor">#</a> ①默认结果</h3> <p><img alt="iamges" data-src="/javanote/assets/img/img010.f9c70aba.png" loading="lazy" class="lazy"></p> <h3 id="_2bindingresult-接口"><a href="#_2bindingresult-接口" class="header-anchor">#</a> ②BindingResult 接口</h3> <p><img alt="iamges" data-src="data:image/png;base64,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" loading="lazy" class="lazy"></p> <p>BindingResult 接口和它的父接口 Errors 中定义了很多和数据绑定相关的方法，如果在数据绑定过程中发生了错误，那么通过这个接口类型的对象就可以获取到相关错误信息。</p> <h3 id="_3重构-handler-方法"><a href="#_3重构-handler-方法" class="header-anchor">#</a> ③重构 handler 方法</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save/product&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">saveProduct</span><span class="token punctuation">(</span>
        <span class="token class-name">Product</span> product<span class="token punctuation">,</span>

	    <span class="token comment">// 在实体类参数和 BindingResult 之间不能有任何其他参数</span>
        <span class="token comment">// 封装数据绑定结果的对象</span>
        <span class="token class-name">BindingResult</span> bindingResult<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// 判断数据绑定过程中是否发生了错误</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bindingResult<span class="token punctuation">.</span><span class="token function">hasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果发生了错误，则跳转到专门显示错误信息的页面</span>
        <span class="token comment">// 相关错误信息会自动被放到请求域</span>
        <span class="token keyword">return</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span>product<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token string">&quot;target&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4在页面上显示错误消息"><a href="#_4在页面上显示错误消息" class="header-anchor">#</a> ④在页面上显示错误消息</h3> <div class="language-html extra-class"><pre class="language-html"><code>	<span class="token comment">&lt;!-- 从请求域获取实体类信息时，属性名是按照类名首字母小写的规则 --&gt;</span>
	<span class="token comment">&lt;!-- ${注入请求参数的实体类.出问题的字段} --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>errors</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${product.productDate}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>这里显示具体错误信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_4、自定义类型转换器"><a href="#_4、自定义类型转换器" class="header-anchor">#</a> 4、自定义类型转换器</h2> <p>在实际开发过程中，难免会有某些情况需要使用自定义类型转换器。因为我们自己自定义的类型在 SpringMVC 中没有对应的内置类型转换器。此时需要我们提供自定义类型来执行转换。</p> <blockquote><p>我们学习的知识点可以分成：</p> <ul><li><p>拼死学会</p></li> <li><p>以防万一</p></li> <li><p>增长见闻</p></li></ul> <p>自定义类型转换器的定位就是以防万一</p></blockquote> <h3 id="_1创建实体类"><a href="#_1创建实体类" class="header-anchor">#</a> ①创建实体类</h3> <h4 id="_1-address"><a href="#_1-address" class="header-anchor">#</a> [1]Address</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Address</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> province<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> city<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> street<span class="token punctuation">;</span>
    ……
</code></pre></div><h4 id="_2-student"><a href="#_2-student" class="header-anchor">#</a> [2]Student</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Address</span> address<span class="token punctuation">;</span>
    ……
</code></pre></div><h3 id="_2表单-2"><a href="#_2表单-2" class="header-anchor">#</a> ②表单</h3> <p>现在我们希望通过一个文本框输入约定格式的字符串，然后转换为我们需要的类型，所以必须通过自定义类型转换器来实现，否则 SpringMVC 无法识别。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>自定义类型转换器<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name"><span class="token namespace">th:</span>action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/save/student}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    地址：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aaa,bbb,ccc<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_3handler-方法-2"><a href="#_3handler-方法-2" class="header-anchor">#</a> ③handler 方法</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save/student&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">saveStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token string">&quot;target&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在目前代码的基础上，我们没有提供自定义类型转换器，所以处理请求时看到如下错误日志：</p> <blockquote><p>Field error in object 'student' on field 'address': rejected value [aaa, bbb, ccc]; codes [typeMismatch.student.address, typeMismatch.address, typeMismatch.com.atguigu.mvc.entity. Address, typeMismatch]; arguments [org.springframework.context.support. DefaultMessageSourceResolvable: codes [student.address, address]; arguments []; default message [address]]; default message [Failed to convert property value of type 'java.lang. String' to required type 'com.atguigu.mvc.entity. Address' for property 'address'; nested exception is java.lang. IllegalStateException: Cannot convert value of type 'java.lang. String' to required type 'com.atguigu.mvc.entity. Address' for property 'address': no matching editors or conversion strategy found]]]</p></blockquote> <p>页面返回 400。</p> <h3 id="_4创建自定义类型转换器类"><a href="#_4创建自定义类型转换器类" class="header-anchor">#</a> ④创建自定义类型转换器类</h3> <p>实现接口：org.springframework.core.convert.converter. Converter&lt; S, T&gt;</p> <p>泛型 S：源类型（本例中是 String 类型）</p> <p>泛型 T：目标类型（本例中是 Address 类型）</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AddressConverter</span> <span class="token keyword">implements</span> <span class="token class-name">Converter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Address</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Address</span> <span class="token function">convert</span><span class="token punctuation">(</span><span class="token class-name">String</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// 1.按照约定的规则拆分源字符串</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> split <span class="token operator">=</span> source<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> province <span class="token operator">=</span> split<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> city <span class="token operator">=</span> split<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> street <span class="token operator">=</span> split<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token comment">// 2.根据拆分结果创建 Address 对象</span>
        <span class="token class-name">Address</span> address <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span>province<span class="token punctuation">,</span> city<span class="token punctuation">,</span> street<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 3.返回转换得到的对象</span>
        <span class="token keyword">return</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_5在-springmvc-中注册"><a href="#_5在-springmvc-中注册" class="header-anchor">#</a> ⑤在 SpringMVC 中注册</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 在 mvc:annotation-driven 中注册 FormattingConversionServiceFactoryBean --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span> <span class="token attr-name">conversion-service</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formattingConversionService<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- 在 FormattingConversionServiceFactoryBean 中注册自定义类型转换器 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formattingConversionService<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.format.support.FormattingConversionServiceFactoryBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 在 converters 属性中指定自定义类型转换器 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>converters<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.atguigu.mvc.converter.AddressConverter<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h1 id="第四节-数据校验"><a href="#第四节-数据校验" class="header-anchor">#</a> 第四节 数据校验</h1> <p>在 Web 应用三层架构体系中，表述层负责接收浏览器提交的数据，业务逻辑层负责数据的处理。为了能够让业务逻辑层基于正确的数据进行处理，我们需要在表述层对数据进行检查，将错误的数据隔绝在业务逻辑层之外。</p> <h2 id="_1、校验概述"><a href="#_1、校验概述" class="header-anchor">#</a> 1、校验概述</h2> <p>JSR 303 是 Java 为 Bean 数据合法性校验提供的标准框架，它已经包含在 JavaEE 6.0 标准中。JSR 303 通过在 Bean 属性上标注类似于 @NotNull、@Max 等标准的注解指定校验规则，并通过标准的验证接口对Bean进行验证。</p> <table><thead><tr><th>注解</th> <th>规则</th></tr></thead> <tbody><tr><td>@Null</td> <td>标注值必须为 null</td></tr> <tr><td>@NotNull</td> <td>标注值不可为 null</td></tr> <tr><td>@AssertTrue</td> <td>标注值必须为 true</td></tr> <tr><td>@AssertFalse</td> <td>标注值必须为 false</td></tr> <tr><td>@Min(value)</td> <td>标注值必须大于或等于 value</td></tr> <tr><td>@Max(value)</td> <td>标注值必须小于或等于 value</td></tr> <tr><td>@DecimalMin(value)</td> <td>标注值必须大于或等于 value</td></tr> <tr><td>@DecimalMax(value)</td> <td>标注值必须小于或等于 value</td></tr> <tr><td>@Size(max, min)</td> <td>标注值大小必须在 max 和 min 限定的范围内</td></tr> <tr><td>@Digits(integer, fratction)</td> <td>标注值值必须是一个数字，且必须在可接受的范围内</td></tr> <tr><td>@Past</td> <td>标注值只能用于日期型，且必须是过去的日期</td></tr> <tr><td>@Future</td> <td>标注值只能用于日期型，且必须是将来的日期</td></tr> <tr><td>@Pattern(value)</td> <td>标注值必须符合指定的正则表达式</td></tr></tbody></table> <p>JSR 303 只是一套标准，需要提供其实现才可以使用。Hibernate Validator 是 JSR 303 的一个参考实现，除支持所有标准的校验注解外，它还支持以下的扩展注解：</p> <table><thead><tr><th>注解</th> <th>规则</th></tr></thead> <tbody><tr><td>@Email</td> <td>标注值必须是格式正确的 Email 地址</td></tr> <tr><td>@Length</td> <td>标注值字符串大小必须在指定的范围内</td></tr> <tr><td>@NotEmpty</td> <td>标注值字符串不能是空字符串</td></tr> <tr><td>@Range</td> <td>标注值必须在指定的范围内</td></tr></tbody></table> <p>Spring 4.0 版本已经拥有自己独立的数据校验框架，同时支持 JSR 303 标准的校验框架。Spring 在进行数据绑定时，可同时调用校验框架完成数据校验工作。在SpringMVC 中，可直接通过注解驱动 mvc:annotation-driven 的方式进行数据校验。Spring 的 LocalValidatorFactoryBean 既实现了 Spring 的 Validator 接口，也实现了 JSR 303 的 Validator 接口。只要在Spring容器中定义了一个LocalValidatorFactoryBean，即可将其注入到需要数据校验的 Bean中。Spring本身并没有提供JSR 303的实现，所以必须将JSR 303的实现者的jar包放到类路径下。</p> <p>配置 mvc:annotation-driven 后，SpringMVC 会默认装配好一个 LocalValidatorFactoryBean，通过在处理方法的入参上标注 @Validated 注解即可让 SpringMVC 在完成数据绑定后执行数据校验的工作。</p> <h2 id="_2、操作演示"><a href="#_2、操作演示" class="header-anchor">#</a> 2、操作演示</h2> <p>请在 SpringMVC 环境基础上做下面的操作：</p> <h3 id="_1导入依赖"><a href="#_1导入依赖" class="header-anchor">#</a> ①导入依赖</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.hibernate.validator/hibernate-validator --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.hibernate.validator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hibernate-validator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.2.0.Final<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.hibernate.validator/hibernate-validator-annotation-processor --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.hibernate.validator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hibernate-validator-annotation-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.2.0.Final<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>注：需要 Tomcat 版本至少是 8。</p> <h3 id="_2应用校验规则"><a href="#_2应用校验规则" class="header-anchor">#</a> ②应用校验规则</h3> <h4 id="_1-标记规则注解"><a href="#_1-标记规则注解" class="header-anchor">#</a> [1]标记规则注解</h4> <p>在实体类中需要附加校验规则的成员变量上标记校验规则注解：</p> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token comment">// 字符串长度：[3,6]</span>
    <span class="token annotation punctuation">@Size</span><span class="token punctuation">(</span>min <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> max <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">)</span>

    <span class="token comment">// 字符串必须满足Email格式</span>
    <span class="token annotation punctuation">@Email</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
</code></pre></div><h4 id="_2-在handler-方法形参标记注解"><a href="#_2-在handler-方法形参标记注解" class="header-anchor">#</a> [2]在handler 方法形参标记注解</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save/president&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">savePresident</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Validated</span> <span class="token class-name">President</span> president<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span>president<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token string">&quot;target&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-校验失败效果"><a href="#_3-校验失败效果" class="header-anchor">#</a> [3]校验失败效果</h4> <p>日志：</p> <blockquote><p>Field error in object 'president' on field 'email': rejected value [aa]; codes [Email.president.email, Email.email, Email.java.lang. String, Email]; arguments [org.springframework.context.support. DefaultMessageSourceResolvable: codes [president.email, email]; arguments []; default message [email], [Ljavax.validation.constraints. Pattern$Flag; @4a6addb7, .*]; default message [不是一个合法的电子邮件地址]
Field error in object 'president' on field 'email': rejected value [aa]; codes [Size.president.email, Size.email, Size.java.lang. String, Size]; arguments [org.springframework.context.support. DefaultMessageSourceResolvable: codes [president.email, email]; arguments []; default message [email], 6, 3]; default message [个数必须在3和6之间]]]</p></blockquote> <p>同时页面返回 400。</p> <h3 id="_3显示友好的错误提示"><a href="#_3显示友好的错误提示" class="header-anchor">#</a> ③显示友好的错误提示</h3> <h4 id="_1-重构-handler-方法"><a href="#_1-重构-handler-方法" class="header-anchor">#</a> [1]重构 handler 方法</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save/president&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">savePresident</span><span class="token punctuation">(</span>

        <span class="token comment">// 在实体类参数和 BindingResult 之间不能有任何其他参数</span>
        <span class="token annotation punctuation">@Validated</span> <span class="token class-name">President</span> president<span class="token punctuation">,</span> <span class="token class-name">BindingResult</span> bindingResult<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>bindingResult<span class="token punctuation">.</span><span class="token function">hasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span>president<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token string">&quot;target&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-准备错误信息页面"><a href="#_2-准备错误信息页面" class="header-anchor">#</a> [2]准备错误信息页面</h4> <div class="language-html extra-class"><pre class="language-html"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>系统信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 从请求域获取实体类信息时，属性名是按照类名首字母小写的规则 --&gt;</span>
    <span class="token comment">&lt;!-- ${注入请求参数的实体类.出问题的字段} --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>errors</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${president.email}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>这里显示系统提示消息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h1 id="第五节-异常映射"><a href="#第五节-异常映射" class="header-anchor">#</a> 第五节 异常映射</h1> <h2 id="_1、概念-2"><a href="#_1、概念-2" class="header-anchor">#</a> 1、概念</h2> <h3 id="_1微观"><a href="#_1微观" class="header-anchor">#</a> ①微观</h3> <p>将异常类型和某个具体的视图关联起来，建立映射关系。好处是可以通过 SpringMVC 框架来帮助我们管理异常。</p> <ul><li>声明式管理异常：在配置文件中指定异常类型和视图之间的对应关系。在配置文件或注解类中统一管理。</li> <li>编程式管理异常：需要我们自己手动 try ... catch ... 捕获异常，然后再手动跳转到某个页面。</li></ul> <h3 id="_2宏观"><a href="#_2宏观" class="header-anchor">#</a> ②宏观</h3> <p>一个项目中会包含很多个模块，各个模块需要分工完成。如果张三负责的模块按照 A 方案处理异常，李四负责的模块按照 B 方法处理异常……各个模块处理异常的思路、代码、命名细节都不一样，那么就会让整个项目非常混乱。</p> <h2 id="_2、异常映射的好处"><a href="#_2、异常映射的好处" class="header-anchor">#</a> 2、异常映射的好处</h2> <ul><li>使用声明式代替编程式来实现异常管理
<ul><li>让异常控制和核心业务解耦，二者各自维护，结构性更好</li></ul></li> <li>整个项目层面使用同一套规则来管理异常
<ul><li>整个项目代码风格更加统一、简洁</li> <li>便于团队成员之间的彼此协作</li></ul></li></ul> <h2 id="_3、基于-xml-的异常映射"><a href="#_3、基于-xml-的异常映射" class="header-anchor">#</a> 3、基于 XML 的异常映射</h2> <h3 id="_1配置"><a href="#_1配置" class="header-anchor">#</a> ①配置</h3> <p>SpringMVC 会根据异常映射信息，在捕获到指定异常对象后，将异常对象存入请求域，然后转发到和异常类型关联的视图。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>exceptionResolver<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.web.servlet.handler.SimpleMappingExceptionResolver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 配置异常映射关系 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>exceptionMappings<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>props</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- key属性：指定异常类型 --&gt;</span>
            <span class="token comment">&lt;!-- 文本标签体：和异常类型对应的逻辑视图 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.lang.ArithmeticException<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>error-arith<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>props</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 使用 exceptionAttribute 属性配置将异常对象存入请求域时使用的属性名 --&gt;</span>
    <span class="token comment">&lt;!-- 这个属性名默认是exception --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>exceptionAttribute<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>atguiguException<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_2异常范围"><a href="#_2异常范围" class="header-anchor">#</a> ②异常范围</h3> <p>如果在配置文件中，发现有多个匹配的异常类型，那么 SpringMVC 会采纳范围上最接近的异常映射关系。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.lang.ArithmeticException<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>error-arith<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.lang.RuntimeException<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>error-runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_4、基于注解的异常映射"><a href="#_4、基于注解的异常映射" class="header-anchor">#</a> 4、基于注解的异常映射</h2> <h3 id="_1创建异常处理器类"><a href="#_1创建异常处理器类" class="header-anchor">#</a> ①创建异常处理器类</h3> <p><img alt="./images" data-src="data:image/png;base64,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" loading="lazy" class="lazy"></p> <h3 id="_2异常处理器类加入-ioc-容器"><a href="#_2异常处理器类加入-ioc-容器" class="header-anchor">#</a> ②异常处理器类加入 IOC 容器</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.atguigu.mvc.handler,com.atguigu.mvc.exception<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="_3给异常处理器类标记注解"><a href="#_3给异常处理器类标记注解" class="header-anchor">#</a> ③给异常处理器类标记注解</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 异常处理器类需要使用 @ControllerAdvice 注解标记</span>
<span class="token annotation punctuation">@ControllerAdvice</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyExceptionHandler</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4声明处理异常的方法"><a href="#_4声明处理异常的方法" class="header-anchor">#</a> ④声明处理异常的方法</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// @ExceptionHandler注解：标记异常处理方法</span>
<span class="token comment">// value属性：指定匹配的异常类型</span>
<span class="token comment">// 异常类型的形参：SpringMVC 捕获到的异常对象</span>
<span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">resolveNullPointerException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">,</span> <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// 我们可以自己手动将异常对象存入模型</span>
    model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;atguiguException&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 返回逻辑视图名称</span>
    <span class="token keyword">return</span> <span class="token string">&quot;error-nullpointer&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当同一个异常类型在基于 XML 和注解的配置中都能够找到对应的映射，那么以注解为准。</p> <h2 id="_5、区分请求类型"><a href="#_5、区分请求类型" class="header-anchor">#</a> 5、区分请求类型</h2> <h3 id="_1分析"><a href="#_1分析" class="header-anchor">#</a> ①分析</h3> <p>异常处理机制和拦截器机制都面临这样的问题：</p> <p><img alt="./images" data-src="/javanote/assets/img/img013.86c046ee.png" loading="lazy" class="lazy"></p> <h3 id="_2判断依据"><a href="#_2判断依据" class="header-anchor">#</a> ②判断依据</h3> <p>查看请求消息头中是否包含 Ajax 请求独有的特征：</p> <ul><li>Accept 请求消息头：包含 application/json</li> <li>X-Requested-With 请求消息头：包含 XMLHttpRequest</li></ul> <p>两个条件满足一个即可。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * 判断当前请求是否为Ajax请求
 * @param request 请求对象
 * @return
 * 		true：当前请求是Ajax请求
 * 		false：当前请求不是Ajax请求
 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">judgeRequestType</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.获取请求消息头</span>
	<span class="token class-name">String</span> acceptHeader <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Accept&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">String</span> xRequestHeader <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">&quot;X-Requested-With&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 2.判断</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>acceptHeader <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> acceptHeader<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

			<span class="token operator">||</span>

			<span class="token punctuation">(</span>xRequestHeader <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> xRequestHeader<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;XMLHttpRequest&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3兼容两种请求的处理方法"><a href="#_3兼容两种请求的处理方法" class="header-anchor">#</a> ③兼容两种请求的处理方法</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">resolveException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

    <span class="token comment">// 调用工具方法判断当前请求是否是 Ajax 请求</span>
    <span class="token keyword">boolean</span> judgeResult <span class="token operator">=</span> <span class="token class-name">MVCUtil</span><span class="token punctuation">.</span><span class="token function">judgeRequestType</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>judgeResult<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// 对 Ajax 请求返回字符串作为响应体</span>
        <span class="token class-name">String</span> message <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 上面已经使用原生 response 对象返回了响应，这里就不返回视图名称了</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 对普通请求返回逻辑视图名称</span>
    <span class="token keyword">return</span> <span class="token string">&quot;error-exception&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h1 id="第六节-文件上传"><a href="#第六节-文件上传" class="header-anchor">#</a> 第六节 文件上传</h1> <h2 id="_1、表单"><a href="#_1、表单" class="header-anchor">#</a> 1、表单</h2> <ul><li>第一点：请求方式必须是 POST</li> <li>第二点：请求体的编码方式必须是 multipart/form-data（通过 form 标签的 enctype 属性设置）</li> <li>第三点：使用 input 标签、type 属性设置为 file 来生成文件上传框</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name"><span class="token namespace">th:</span>action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/atguigu/upload}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multipart/form-data<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>picture<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>上传头像<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_2、springmvc-环境要求"><a href="#_2、springmvc-环境要求" class="header-anchor">#</a> 2、SpringMVC 环境要求</h2> <h3 id="_1依赖"><a href="#_1依赖" class="header-anchor">#</a> ①依赖</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/commons-fileupload/commons-fileupload --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_2配置"><a href="#_2配置" class="header-anchor">#</a> ②配置</h3> <p>在 SpringMVC 的配置文件中加入 multipart 类型数据的解析器：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multipartResolver<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.web.multipart.commons.CommonsMultipartResolver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 由于上传文件的表单请求体编码方式是 multipart/form-data 格式，所以要在解析器中指定字符集 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>defaultEncoding<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_3、handler-方法接收数据"><a href="#_3、handler-方法接收数据" class="header-anchor">#</a> 3、handler 方法接收数据</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/simple/upload&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">doUpload</span><span class="token punctuation">(</span>

        <span class="token comment">// 表单提交的数据仍然是请求参数，所以使用 @RequestParam 注解接收</span>
        <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;nickName&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> nickName<span class="token punctuation">,</span>

        <span class="token comment">// 对于上传的文件使用 MultipartFile 类型接收其相关数据</span>
        <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;picture&quot;</span><span class="token punctuation">)</span> <span class="token class-name">MultipartFile</span> picture
        <span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

    <span class="token class-name">String</span> inputName <span class="token operator">=</span> picture<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;文件上传表单项的 name 属性值：&quot;</span> <span class="token operator">+</span> inputName<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 获取这个数据通常都是为了获取文件本身的扩展名</span>
    <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> picture<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;文件在用户本地原始的文件名：&quot;</span> <span class="token operator">+</span> originalFilename<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> contentType <span class="token operator">=</span> picture<span class="token punctuation">.</span><span class="token function">getContentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;文件的内容类型：&quot;</span> <span class="token operator">+</span> contentType<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">boolean</span> empty <span class="token operator">=</span> picture<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;文件是否为空：&quot;</span> <span class="token operator">+</span> empty<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">long</span> size <span class="token operator">=</span> picture<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;文件大小：&quot;</span> <span class="token operator">+</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> picture<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;文件二进制数据的字节数组：&quot;</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> picture<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;读取文件数据的输入流对象：&quot;</span> <span class="token operator">+</span> inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Resource</span> resource <span class="token operator">=</span> picture<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;代表当前 MultiPartFile 对象的资源对象&quot;</span> <span class="token operator">+</span> resource<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token string">&quot;target&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_4、multipartfile-接口"><a href="#_4、multipartfile-接口" class="header-anchor">#</a> 4、MultipartFile 接口</h2> <p><img alt="./images" data-src="data:image/png;base64,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" loading="lazy" class="lazy"></p> <h2 id="_5、文件转存"><a href="#_5、文件转存" class="header-anchor">#</a> 5、文件转存</h2> <h3 id="_1底层机制"><a href="#_1底层机制" class="header-anchor">#</a> ①底层机制</h3> <p><img alt="./images" data-src="/javanote/assets/img/img015.51e11df9.png" loading="lazy" class="lazy"></p> <h3 id="_2三种去向"><a href="#_2三种去向" class="header-anchor">#</a> ②三种去向</h3> <h4 id="_1-本地转存"><a href="#_1-本地转存" class="header-anchor">#</a> [1]本地转存</h4> <p><img alt="./images" data-src="/javanote/assets/img/img016.4ffe99a7.png" loading="lazy" class="lazy"></p> <h5 id="_1-实现方式"><a href="#_1-实现方式" class="header-anchor">#</a> (1)实现方式</h5> <h6 id="_1-创建保存文件的目录"><a href="#_1-创建保存文件的目录" class="header-anchor">#</a> &lt;1&gt;创建保存文件的目录</h6> <p><img alt="./images" data-src="data:image/png;base64,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" loading="lazy" class="lazy"></p> <p>这个目录如果是空目录，那么服务器部署运行时很容易会忽略这个目录。为了避免这个问题，在这个目录下随便创建一个文件，随便写点内容即可。</p> <h6 id="_2-编写转存代码"><a href="#_2-编写转存代码" class="header-anchor">#</a> &lt;2&gt;编写转存代码</h6> <p>下面是负责处理文件上传请求的 handler 方法的转存部分：</p> <div class="language-java extra-class"><pre class="language-java"><code>……

<span class="token comment">// 1、准备好保存文件的目标目录</span>
<span class="token comment">// ①File 对象要求目标路径是一个物理路径（在硬盘空间里能够直接找到文件的路径）</span>
<span class="token comment">// ②项目在不同系统平台上运行，要求能够自动兼容、适配不同系统平台的路径格式</span>
<span class="token comment">//      例如：Window系统平台的路径是 D:/aaa/bbb 格式</span>
<span class="token comment">//      例如：Linux系统平台的路径是 /ttt/uuu/vvv 格式</span>
<span class="token comment">//      所以我们需要根据『不会变的虚拟路径』作为基准动态获取『跨平台的物理路径』</span>
<span class="token comment">// ③虚拟路径：浏览器通过 Tomcat 服务器访问 Web 应用中的资源时使用的路径</span>
<span class="token class-name">String</span> destFileFolderVirtualPath <span class="token operator">=</span> <span class="token string">&quot;/head-picture&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// ④调用 ServletContext 对象的方法将虚拟路径转换为真实物理路径</span>
<span class="token class-name">String</span> destFileFolderRealPath <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span>destFileFolderVirtualPath<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2、生成保存文件的文件名</span>
<span class="token comment">// ①为了避免同名的文件覆盖已有文件，不使用 originalFilename，所以需要我们生成文件名</span>
<span class="token comment">// ②我们生成文件名包含两部分：文件名本身和扩展名</span>
<span class="token comment">// ③声明变量生成文件名本身</span>
<span class="token class-name">String</span> generatedFileName <span class="token operator">=</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;-&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ④根据 originalFilename 获取文件的扩展名</span>
<span class="token class-name">String</span> fileExtname <span class="token operator">=</span> originalFilename<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>originalFilename<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ⑤拼装起来就是我们生成的整体文件名</span>
<span class="token class-name">String</span> destFileName <span class="token operator">=</span> generatedFileName <span class="token operator">+</span> <span class="token string">&quot;&quot;</span> <span class="token operator">+</span> fileExtname<span class="token punctuation">;</span>

<span class="token comment">// 3、拼接保存文件的路径，由两部分组成</span>
<span class="token comment">//      第一部分：文件所在目录</span>
<span class="token comment">//      第二部分：文件名</span>
<span class="token class-name">String</span> destFilePath <span class="token operator">=</span> destFileFolderRealPath <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> destFileName<span class="token punctuation">;</span>

<span class="token comment">// 4、创建 File 对象，对应文件具体保存的位置</span>
<span class="token class-name">File</span> destFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>destFilePath<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 5、执行转存</span>
picture<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span>destFile<span class="token punctuation">)</span><span class="token punctuation">;</span>

……
</code></pre></div><h5 id="_2-缺陷"><a href="#_2-缺陷" class="header-anchor">#</a> (2)缺陷</h5> <ul><li>Web 应用重新部署时通常都会清理旧的构建结果，此时用户以前上传的文件会被删除，导致数据丢失。</li> <li>项目运行很长时间后，会导致上传的文件积累非常多，体积非常大，从而拖慢 Tomcat 运行速度。</li> <li>当服务器以集群模式运行时，文件上传到集群中的某一个实例，其他实例中没有这个文件，就会造成数据不一致。</li> <li>不支持动态扩容，一旦系统增加了新的硬盘或新的服务器实例，那么上传、下载时使用的路径都需要跟着变化，导致 Java 代码需要重新编写、重新编译，进而导致整个项目重新部署。</li></ul> <p><img alt="./images" data-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAucAAADlCAIAAAB/Ms69AAAjsklEQVR42u3d32sV+f3H8clFL9td6V0pS/xxs1e6xVoQ3bpCjf0BjbAX0ZsqBXcTCqsgBmpAhWzbBEGFEluhJO1FEmGL3nRrvFBbRai1GC9KC03ioYhXK2bbP6Df9zfv+unHz2fmc+acTObMZ+b5uAgnc+bMmTnnM595zefzmTl9//nPfxIAAIDK6yO1AACAKJBaAABAHEgtAAAgDqQWAAAQB1ILAACIQ51Ty/z8/OHDh2u8gUCdjIyMrKys3Lx5s9crAqC66pxa7t+/v3fv3q1bty4tLbWdedu2bQcOHJiamvKnHz9+/PTp073eGhRAi8Ty8vKWLVvWuaiDBw/K39IOsfJ2R48eHRoa8jfn3r17e/bsKeqN/KxvpmSdBkjUkL1sYGDA+TR0/vyrNzk5OTo6Ojw87O+Gqe84NzfnfCA6vdgPBECl1Dm1JK+qdb92cziVnRwh5KimVSeppU6kPMzOzl65csU+NOrB0p85EG5ylqu+vr4uVlIX68Ro+Vf+OvnbSS1ZGxI2MTGxe/duWU7qs/JBHTlyRJ6VikLeTpKTfCxOsBgZGZGP1K9J7P0oJ92EtrHSyU/yOeuHRmoBaq8OqaW7ylqYbZclXL161RwSpBKUqlyTCqmlfvRgb75i59tPvCYZPUZ2+i5m+W2ltkn4jX92sbTXM3yQdjY258rY1YIuwUzRGfTD0bySuuEaIPzlS7yYmZlZWFjo9PO023LsPGR/CKQWoPbqkFpsgZAROD+2X+UcCUgttecPpwh3JOmhupBuJpUztWg69/NEeE2KSi2p7yIfxa1bt+zAZ/YXeaq/v9/PWPYOGA4ZWe0uzqvsj4XUAtRe3VJLYEBfViXoVMrOsYHUUntZbRipx+msMRzrkTO1+KtaVGrpuifrj3/8Y1ZqkWU6K5Z62hDYvw4ePLi0xpnutI3ZA4xILUDt1S21BK4byqoEnVNnqUblceAtCjzJRsn8Y6QcXFPHa9vFwP7GpRQtLCy0HdHSkfypRQ7Yt2/fNoGp8LYWPeo7MweiQFZbS6vV8k8eUlNL4DRDvprUkbn2EJ+sfigj52B8ALGoW2pJrKF59sTU6tjMn7w6MvkDBWhrqQ35cp89e6YjVDSRdNpqknMElXOAz2rJcMbN5EktjjzX9psr6eTt2oYtvxPKbIJZPTtnZKUWWYifclJH4WQFr6zrj5wLA50Vpq0FqL0apha/Jk2yq2NzHDKjC7NavHu9WShM6vU4benxMgkOs009arbtgVpPahkbGwtviL7X8PDwu+++K++SmtJSB9Uasp6yJuPj45p47CaQwP4iH4U8648W8iNF6pZmXViubV0mtTivJbUAtVfD1OLfyyHc0KKnoXoI8dtpSC011rZ/wQQLe87qpJY8t2VzeojslkV/aX7cV5IV9u/fL0twBocFUovfM5WVWuyLkuwpgYaWZC10+u00pBag9mqYWhKvZSU8okXqOK37nj9/LieUzjGA1FI/8r3LX/u6Wf8o7pQZM/wlz8DV0lJLnsLpp4fUoTl21vcXa+KRM9YkcOWzv12BUThOy0pgRIuQ/KSjcWWBzg5LagFqr56pJbF6AbL6hnQeOVOUsBIY0khqqR85KNodJX4+cA639jHVjyC2Mttach6hU0fj6js6+cO0mvhlXi/b0QEr9p7StkfVDn9+m4qzLbo+WX1DMo98ILpHO/fX6fQzARCv2qYWu0k/z0UWMs/Dhw/z3Eys2KteUTK/n8K5tiV80U0PU4sczu2CF+jQ8bfXX2enIzWrDUlbmLLG9LRNLXbnbCC1JNat/Npe9WNSS3g4jpH/XjUAqq+2qSWxmq/D1Vb48lHaWmomMFhbDuHyWI6dgQLTXWpJnTl/avGTlgnlbY/xnd5lLsko86mXiOcZvS6fbavVkg1pe8WTudo83FhCWwvQZPVMLVp5aSVrrhLK2lJSS6NkjZkw5SR8eXAh41oc4dSSGrN0hMfY2Fjb3wctJLXoGvqtjB1dcxdILXaPlQ67CbRoklqAJqthatHjin8MkFySWhWSWpoj6+IU55eGAj873EVbS3drpblEjt/+29lXbrf9YfPuUou5w54seWZmRpYg+46sjO4mpncpcG9cf7GpacP0PdkVkWlJSl1tUgvQZPVJLeZcOVBnmeo4/4+5kFrqRM/j7W/fdCP6FzmnZtxyUotZh9Sb4jsZJRxc8qQWf4CImd/+BQPzm4Vml7lw4UL+1OI0zOh3kWQ3gmZ9EaQWoMnqkFo0r+QfJGvqaN12Uktz2FcPaZtc4HDuB5qkXWoJDzjN4v8cY1avkMyT+u7yvjMzM5In/PddTw+R86NLJhM8ePAgMB42MJDZ7gPKv0pOQympBWiyOqSWdSK1ID8/tTi3qgv0Ltmcn7vKM2C8u4vX1pNaTOOKv7E6+ic8rsW0pqiifhKI1AI0GakFAADEgdQCAADiQGoBAABxILUAAIA4kFoAAEAcSC0AACAOpBYAABAHUgsAAIgDqQUAAMSB1AIAAOJAagEAAHEgtQAAgDj8/8/emuCiv4KrmMhEJjKRiUxkIhOrM1GmvJZaAAAAKkiyC6kFAABEgNQCAABiwmhcAAAQB1ILAACIA6kFAABUHeNaAABAHEgtBdi2bdvx48dPnz7ddk75uOfm5oaGhgLzzM/PHz58eHl5ecuWLb3eMuA1k5OTV69eXVpaKmpO2XcOHDgwNTXV6y0DXHmq6/xzUrEXhdSyXisrKyMjIwsLCxMTE+HgoqX23r17e/fu9Z81nz+FG5UlWWR0dHTr1q0544g8uHLlivOUvaeQWlBN9+/fHx8fl4o9ZxyhYi9Neanl4MGDUgKyns0ZaXtLq+yOXmJvl4QbiTg3b97Uf7Piec7CLYuSg4c8kL1lz549vf5s8D9S36XWXyrPIb/nTOnKb2BgwJRtfbkpmYF2l0Bq0R3BmUilXzU1qNilZvazdZhd6xZbsTvFPorqoifKGI0bXeHWmtc+L8zfPK6c4iv/mqU51XqyVvRv3bolC89ZuE2EGh4e5lS1UmJMLVpxm3rAL59tX25X3Fo4zdKcZ3Xhumt0mlqSStYVTVaDit0pn3lebu8aRVXsgVOFnvSEyPo4qyqb8K1vfevLX/5yIQv/+9///p3vfMee+OTJE/m7ffv2PEso+xoirSIr3kighSw1tWjxcsqfXXbNFLPTmlZE3WT91/7YO00tUt3rA5mT3r3K0qJit0NUkxQnuyDZla8clvbv328XbFNW7Sl2vb9tjf2vPfCro9Ti7IAShqr/YTZWpBW7Kb16vmFXp3ZZtac4Nfn6K3ZzquOc1firVI5f/vKXH374ob3huiZF7X0adhcXF01GefHixTe+8Q35fD777LM8wYjUksIv3IYU3IcPH8qzWU0pPv2SzCY7bZIyfXZ2Nn9q0QI0PDzc398v9XgFT2igIk0t4U3wU4vNqd2cM0iZLhmlu9SSrO1l1WysQlKLiv2TTz6RGtVsgp9aHEVV7LoDVqQml63euXOnPPjHP/5hBwhZt2vXrv3iF7/44IMPAi+3f/jQYVcL+haPHj3SD0Q/ujyfQG9G42YVbv3mzL9+Y4ZWWKZkmM4RuzHZ32ynqdneUvvzNbVhakudX9rslka/1dFmcrTZZHlffaxPycIvXLiQP7WYD/ArX/lKFAfFxspKLU6ZdLr5tFFBSvKuXbtMUTRFwuwmqcdveydyTiid+jS1nk0y+hyldl5a4zz2aT1uNlm25fbt2/pYnpJNOHXq1HpSC6W9skqu2O2Bhva+4Afl1ACdujLJq+pa385+7G9vURW7PlWdvn6zC+/fv9+e/vnnn8sXJOv5xhtv+K/avXu3Gccmf1utlsxsL8RpKP3000+/+93v/vjHP/744487+gSqklqyhgLYdZYWbqnj7EpWZnjrrbec/m97yX63q/lonH0peVX0w4VbFih/7bFXJj1kFW6zDrpidiuiedxp96fZS3UrKn5+01ipqSVrKIDZB7U6lrLtjP6WGZxCay85dSfSgpQ6kFzLTCC1OEVR5pS/8pSzC9jMOpgVs7uH9PH777/fXWrRbWdAbmWVWbH7tbdZpn+ur6UxXLHbRdGMAXj+/Lmsf1btWlTFXqk2qjNnzvzkJz/p4oXOCYYf+Mwpx5MnT/7973/LlN///vff/va35cG//vWv3/zmNz/60Y90zrfffjvQSVSV1KLlzI5aJmWbr1nnMbWhvT+Yj0aLkVmOqaztsiLvblKLfb7oHP6zGhJNK6L9VCCSm6dM96eeceo6mC7V/KnFHNL03fXf6uR02PzUklomtez55daURlM/mrRqyr+zg9glQZYjEUFTixwDTOH0y0xqD5GsvL6j06jjDFuxadnWF5qBArqGZkCAHfE7HY3LEK4qK61iN1HbHokl1bIJx3Zx1eWbtwtU7BcuXHA6KZxhK7YCK3bduiqUbfPtpPYbdNTSqZ+PUxj05eER3Em7C2MrkVqyWoecw7MWPmegkzZYmRc6fer+SwJMs7w9fjY8VCV5dcbpf0P2YuWA8dWvflVn0CpbzxKk+Joz0fypxTnjNCcQVSj0cPipJavBwC6rTslPrG/ZfqHdp+6/pIu1yipCTpkMRA09YJhdQ5tnTp06JS80Z59cQ1RX5VTsTmNzd2sV2FPsMhmojQus2CuSWnQNN23a9PLlS797KFnr4pFtlO3yX2u6h86cOfOXv/wlWRtd++jRo507d5pWE9lGWfiuXbvkw9e2FvHXv/71ww8/lO/6yJEjZmnhthbV49G4Woj9Q74Zc6oFyB+I5+SM5PXqWB8HGiFSGwzzpxabrkkgaphYMz4+rvPIJ6Cl3DTU5x9qntrjQG1eQX4+yDpf0S/R7tBxvlC//Nv7kT4OlED//CZ/avG3KLxfaGoZGxvTMm8ujtAWmq6vIeIeRRVXTsWuLw+UwNRuqfypxd+iwH5RSMVu7/u9+u5MZLlz586OHTs6fbn5PE1qkU2WLUpNLXbt1/bbzNLE1OKcycm7P3jwINzW4vektuW052tzon7azhlDztQSuCESoxQrqCKpxe7plz1Cx8MGUksXN1RMXu/PStbOOPv7+3X3sS8Q6Dq1JOuo41CCKqQWp+jqeNhwW0vgmpcsTn/WOiv2jhpKN4heePzb3/52+/btWdfDdtRD5H/7qS+PNbWEGxJN2e20cCfBHiK/Ua7THqKszUmV2oVkF46cqSW8gzFQsWo66iEyxbuL1BKo+LREBXaTJHdbi3O8yeIP17XvO7ee1NLRiTJKVk7FHu4h0htZZe0mSSdFKE8TSCEVe9UaETVedNdD5Hzs9s1XikotlRjXkrw6GNurbtpCzIp1kVpMq7g9aEuit+xFqWNvE6uHKOdNdexo37bR0rlnot32mKdw61Opu6tuKbV51QRG49p7nJZGZ4R1R6nFtIo7VzufOnVKB4/bBw9n/GPi3XYisC36ODyqwEktTqcSPUR1VVrFrvuL/Sop/w8ePJB3ccbe+gPbc1bsdqt2oPO9kIo9yb7XeU/uMtdF45NzN0j5e/XqVa3TzDzmyue2o3HD21uV1JJn5F0XhTv1C9Bi4Xe16IWmZmnOqJfAFWv6hZlNCAw4d/acTn+uIjB+RRfIDbiqJvXK59SuRvu76yK1JBndOubqTXuiFnXnxnFmd0htSnEKmH9tiM1JLYH7u3QxGpfL5SqrtIo9dUii1sPOEdFcU+3cOM7M0LamTb3ozyikYrc/vdSnyk8t6+khanuXOfko/vnPf+oU/7YuInzuXZXUkrq1zip1l1qS10uDvQR7uhQmPSX1L3szM9ilzb/u1F4lPz04hVu2JTzgJuveR4FcwpjcCsq6y5yTMJw6orvUkng1stNwaN5L75iSlaX8kuk0BTnv5e/IdmoJD1TvNLVQvKus5IrdDih+w6F5r3CWckqm3xRkb1pWB8d6KnaHc0rTk4yuW2Ff1KNkS3fu3Hnx4sXUV33xi180t+dPHVQadw9R1EzWCTRT+/01duEOJ1b/lyyAnjBZJ1B1pvZamtSSNR7TcH6iCOgVk3Xa3nXC/3WemlXsXfQQJa8HR/0Zo9/97nfO7yP6ohmNG6lwq7jPPo80hdv8LIUzc9smeqA0/l28wpwfedbUYv/ekD1zniZ6oBymNOY/cNodKLWs2FPbWmQD5a/fAGPYbS1f//rXHz16JKnlS1/6kjNb6gVlpBYAAFCYwO94OLJ+xkF99tlnf/vb38y/qXeZswNQFlILAADNpbkky8OHD+Xvrl27AvM4l+46g2BOnjz56NEjc9vJgPCYX8a1AADQdFmpxb9KWVJF6pwSNfSXnGUG+4ffzfJl4vrbWkgtAADAtbKyMjIyor9b+ec//zlZuwj32rVrEkempqZSh6MNDQ3JDNqgkppanKTBNUQAAGBdXrx48atf/epnP/uZPP7pT3/6wQcfmHEten1QsjZ++Yc//KHzM4eSQn7+85/Pz8/7V1SRWgAAQJFWVlY++eQTySv6y8+mTcUejfvkyZPR0VHtORoeHv7e975nX+EsiUeijGQL/a1EM/3hw4eyzPWnFsVo3HSrq6tvvvlmr9cCAIANJGFFUsWNGzeuXbuWrI1cGRsbs69S9q8h+vTTT8+ePfvo0SN5LAFlaGjIji+klh6QyHLs2LHr16/3ekWAjSVVVX9/fxc/Tw9E5+7du3IuSml36CjaZK3t5MiRI/5tIbOufJbYMTs76995deN6iP67fFKL79y5c+fPn5fUMjg42Ot1ATaKpPP33ntP/j59+rTX6wJsOCnt8vfOnTu9XpHKkQDx9ttvO+NUjDNnzsjfjz/+OPXZFy9ePHv2zL7wR5aW57Yr2iHl/2R0AONa0i0uLmpVLqn85cuXvV4dYKNoOpcH09PTR48e7fXqABvoxo0bhw4dkgecjsaL1JJOIosEF0kt8vjs2bNSs/d6jYDitVqtd955R8s5AR31JuVcSruU+YTSHjNSSwrN4xJW5BxU/z59+rS/v7/X6wUU7NixY3fv3pWyLZW4xPR9+/ZNT0/3eqWADSEnn5cvX9YRLVLsOR2NFKnFpd38Uo9/9NFH8kDyuMRzKegMy0XNSMUtJVwK9q9//WtJLd/85jclxBDQUUvarCi1+pMnT+RfKe1yOvr48WNKe6QYjfs/mselNEsp19SiY1zu3LkjZ6K9XjugMFKqJaxIajl06JA8mJ6elmpdHjBQEfUjhVxqcqnYJZona+NaNm/ezOlovEgt/2XyuGQXPROV1CL1uJZ4LrJAbVy6dEnONSWgSMVtUosUcin/DFREzWinv555mtG4OlFyDFdBx4jU8l/azS/lWCpxO7Wsrq5u2rSJiyxQD1Ke5URTCrP+IqtJLcnaLiC1OQMVURum01+bVUxqSV41wHA6GhfGtbxGCvEPfvADPdG0U0uy1nP0+eef27+7DURKyrYUdamstWzbqUUDjbbB9Ho1gQJoaTdF2k4tejpK739cSC2ZnNQC1JWdWoD6WVxcNCncTi0JP9sSIVJLJlILGoLUguZwUguiQ2rJRGpBQ5Ba0ByklnpYSy59feZ/k2CYyEQm1n7i4OCgppbqrBITmchEJoYm0tDio60FDUFbC5qDtpZ6ILWkILWgIUgtaA5SSz2QWlKQWtAQpBY0B6mlHkgtKUgtaAhSC5qD1FIPpJYUpBY0BKkFzUFqqQdSSwpSCxqC1ILmILXUA6klBakFDUFqQXOQWuqB1JKC1IKGILWgOUgt9UBqSUFqQUOQWtAcpJZ6ILWkILWgIUgtaA5SSz2QWlJoahkcHOz1igAb609/+tMXvvCFr33ta71eEWDD6e8/k1piR2pJ0Wq1Tp482eu1ADYcqQWNsn379nPnzvV6LbAupBagueghAhAXUgvQXKQWAHEhtQDNRWoBEBdSC9BcpBYAcSG1AM1FagEQF1IL0FykFgBxIbUAzUVqARAXUgvQXKQWAHEhtQDNRWoBEBdSC9BcpBYAcSG1AM1FagEQF1IL0FykFgBxIbUAzUVqARAXUgvQXKQWAHEhtQDNRWoBEBdSC9BcpBYAcSG1AM1FagEQF1IL0FykFgBxIbUAzUVqARAXUgvQXKQWAHEhtQDNRWoBEBdSC9BcpBYAcSG1AM1FagEQF1IL0FykFgBxIbUAzUVqARAXUgsAAIgDqQUAAMSB1AIAAOJAagEAAHEgtQAAgDiQWgAAQBxILQAAIA6kFqDSJicnR0dHl5eXt2zZkv9VBw8elPmnpqb8Kf5TYmVlZevWrffu3duzZ4+ZeP/+/b179zoTAaCHSC1AdWlumJiYOH36dNuZR0ZGrly5kvqUJI/Z2Vl5IGFFY5BONHEkNbXIAm/durW0tBR+X1ngW2+9NTQ0JI/7+vrm5ub0MQAUjtQCVJeEgKynwlHGb1CRCJKspRYzg/y9efOm/puaWuTd2wYmfaHO5sSmgYEBWb4JSYoKB8B6kFqAipLQMDw87HTliG3bti0vL4f33NTUIgnDxBSHn1rm5+cPHz6cOrPGEeeNZP6xsTFtmCm8a2l1dVX+vvnmmxv/qQOoNFILUEUSWexwYEhKWFhY8Ie5BEJGmNYAfmqRbHT8+HG/ocVupJmcnLx9+7Y8dmJK6tCZrt29e/fkyZPy4PHjxxv+uQOoNlILUC0aIFIji/a2tG3DSB3AKxOvXr3qD1LxR8PIWx89elQyUOoQ4G1rTNePViCapfw1SW0rym9xcfH8+fM3btzYt2/fxYsXd+zYUdq3AKCaSC1AtWjHUH9/vz0cJMDPFpIqDhw44MQFuwcn8YbNOm0tOqJFn3KaW3Thp06dkvm19pDc8+6778rCZ2Zm5OWSYCT0yJKdkTQdWV1dlbwiC5TP4ezZs4ODg73+WgBUAqkFqKKsphGb9suY1BIYujswMCCpQmbW/V27k7KuIdJnZU594LT6OJHI9A1JUpE1cd5X4pfTkJPneqi7d+8eO3ZMgovkFVksw1kAGKQWoIr81GLChJnipBaVdeGP5hKd2fTyOM/6fU86XZg1cVKL/Ds+Pj40NCQPAm0tWaNkHDqEZXFxUZKKLOSNN97o9ffQsRMnThCzgI1DagGqqLvUYsaaZAWaubk5eeA0tCTZqcW80DxlpxYdzqJPFZJaLl26pANvRXSjWFZXV1ut1suXL0ktwMYhtQBV1F1qMQ0tqalFo4Ms1mloSdqlFnsGc9c7vQedvIVJLak9RB2llmRtBO7ly5clAA0ODl68eLG/v7/XX0Ved+/efe+990gtwIYitQBV1EVqCVz87NwFzh/AG0gtzqs0GL3//vsHDhyQ1GJeZbe17N+/X98u6bCtxdChLa1W68SJE5Jdev1t5F1nUguw0UgtQBWlphb7IqAkY1xL4CmNNYFRL3rjf8koUi3olMS7etkeN5OadVIDSqepRWmHkYQACS5Hjx7t9XfSBqkFKAGpBagiP7Vom4edITpNLToMxf+dIBNQhD7rX2Rkz2mWYFLLs2fPUpt5zPVH3aWWZG2wiAQX7TC6fv16r7+WEFILUAJSC1BFfmrRu+Xqzdw0T7RNLebfiYmJVqsloUeWkFh3th0dHdVl5rz7flZqcX4HwL+5XNepRS2uqXhzC6kFKAGpBYiAfa2yNrrYVyMr/34tJtBoQJG0sWvXLpMzwr9MlErf2izWSS3mF6r1/nh2V9Q6U0sUSC1ACUgtQKVp4PBbLzSj+N09ym6GMZFF5zStOHmShNNm47yjnVqcd9EXmn/z/Hx07EgtQAlILUBF6bXEqT9IpFLvXatMapHH/oBZTRjJq59O7JpJLePj40trnBnsHzmqfVVDagFKQGoBqiVwfXIq/0a36AlSC1ACUgsAFIDUApSA1AIABSC1ACUgtQBAAUgtQAlILQBQAFILUAJSCwAUgNQClIDUAgAFILUAJSC1AI02MzNT8Tvlx4LUApSA1AI01+rq6ubNmz/66KNz5871el2iR2oBSkBqAZpLwsr58+flKPv48eP+/v5er07cSC1ACUgtQEO1Wq133nlndXVVHg8ODl6/fr3XaxQ3UgtQAlIL0FByiJW/i4uLO3bskCPu48eP5UGvVypipBagBKQWoIlu3Lhx6NChO3fuyN+zZ8/+4Q9/kPjy9OnTXq9XxEgtQAlILUDjrK6uyvG1v7//+vXrmzZtktQyODi4efPm6elprifqGqkFKAGpBWicc+fOXb58WUfgamo5ceLEyZMnZ2Zmnj59ykG3O6QWoASkFqBZdBCuudrZpJbV1VWZvm/fvunp6V6vY5RILUAJSC1As1y6dEkbWvTgalJL8mqwC8fd7pBagBKQWoDGabVa5u4sdmpJXl1S1OsVjBKpBSgBqQVoNCe1oGukFqAEpBag0UgtRSG1ACUgtQCNRmopCqkFKAGpBWg0UktRSC1ACUgtQKORWopCagFKQGoBGo3UUhRSC1ACUgvQaKSWopBagBKQWoBGI7UUhdQClIDUAjQaqaUopBagBKQWoNFILUUhtQAlILUAjUZqKQqpBSgBqQVoNFJLUUgtQAlILUCjkVqKQmoBSkBqARqN1FIUUgtQAlIL0GiklqKQWoASkFqARiO1FIXUApSA1AI0GqmlKKQWoASkFqDRSC1FIbUAJSC1AI1GaikKqQUoAakFaDRSS1FILUAJSC1Ao5FaikJqAUpAagEajdRSFFILUAJSC9BopJaikFqAEpBagEYjtRSF1AKUgNQCNBqppSikFqAEpBag0UgtRSG1ACUgtQCNRmopCqkFKAGpBWg0UktRSC1ACUgtQKORWopCagFKQGoBGo3UUhRSC1ACUgvQaKSWopBagBKQWoBGI7UUhdQClIDUAjTayZMnv//97+/bt6/XKxK9Vqt1/vz5ixcvklqAjUNqAQAAcSC1AACAOJBaAABAHEgtAAAgDqQWAAAQB1ILAACIA6kFAADEgdQCRG9ycnJ0dPTevXt79uxpO/P8/Pzhw4eXl5e3bNmiU1ZWVrZu3To8PDw1NdXrTYnP/fv39+7da3+eZsrz58+dpwCsE6kFiF5HqWVkZOTWrVtLS0tmip9jGkI3vNNXSbw7deqU5LzUZwcGBiT8ybOaWsbHxxcWFmTizZs3e725QB2QWoDodZRa+vr6JiYmdu/evXfv3vCcc3NzQ0ND4Xm2bdsmh2dZ4OnTp3v9MRSj05Ynv61Fl2Cm6AxZ344+60zM+VUCDURqAaKXP7WkNqtojukidpgjrhyk7cabqBWVWnImj9TUIuoUBIECkVqA6OVPLdvW2L0V4ZaAsJGRkStXrgwMDCwsLNSmeSBPatEWpk6XnBpE9PO3306TZZ2CIFAgUgsQvZypRQ+QzhgLfW139UBfX58cXGdmZpzjbtQ6bWuRD8GfWSbm6V9L0lJL8ioVUTkDPlILED1NHqlP2afsBw8e1JGhOlw0z5IDQ3S1SUDbD+p0lNXUogNT2nbTZA1klg9kfHxcU4t8O1evXs1qOMlKLfKXthbAR2oBopenrUWPrxJZ5LFpa9FDZs5WAYcmFT1ga1dRPYZiaGqRD2psbEw+nNSemkBMTNbG0kpk2b9/v34afq+czU8tGi5r0+MGFIvUAkQvT2rRPouZmZnESi36wi6ueXY6m/TfegzFcHqINJylfraBzjWJcfJXlqBhMfDVpI7GbeBV6EBOpBYgem1TixwaZ2dn5SAq5/GJlVrk36U1nb6jNq7YjTSBo3tc/HEtWS1J5tor+RglZNhdPKZXKNzQknANEdAhUgsQvfzXEDmpJXwtTKBykAO2M4OuQw3G5KaOxvUHMtsNLX5q0SYWSXXhhpYkY1yLfrzd9dwB9UZqAaLXdWpJZQ+zDcyQ9fLYq5TANUT2jW0CgU8+AV1IsnYj3XCMS00t/MYCkIXUAkSvwNSSehD1F7KwsJD1bOwtBF0kBr+tJcl99XLqB57nWwCaidQCRK+71KKHZztkmMtnArHGtCL4I0Z1NWL/zZ1CUkv+4cn0EAEdIbUA0esutcjxUubXA6S+Vu8aFz7Qhsev6NKivgSmu9RiNz7J5mv4sy9gzvrZhKzRuLGHP2CDkFqA6K2zh8g+cLatEMK5pAZjcvOkFv9+Lfb8JvyNjIzI0uTTDvwyUWpq4QIiIAupBYhJeExJFtPXEBjXUo/+nfVbZw+R016lt8mRB4cPH6ayBdaP1AI0SNvRuNxLfj2pxTSu2M9q6xTNJ0AhSC0AACAOpBYAABAHUgsAAIgDqQUAAMSB1AIAAOJAagEAAHEgtQAAgDj8H4bGkK3QLsv7AAAAAElFTkSuQmCC" loading="lazy" class="lazy"></p> <h4 id="_2-文件服务器-采纳"><a href="#_2-文件服务器-采纳" class="header-anchor">#</a> [2]文件服务器（采纳）</h4> <h5 id="_1-总体机制"><a href="#_1-总体机制" class="header-anchor">#</a> (1)总体机制</h5> <p><img alt="./images" data-src="/javanote/assets/img/img019.a21e3637.png" loading="lazy" class="lazy"></p> <h5 id="_2-好处"><a href="#_2-好处" class="header-anchor">#</a> (2)好处</h5> <ul><li>不受 Web 应用重新部署影响</li> <li>在应用服务器集群环境下不会导致数据不一致</li> <li>针对文件读写进行专门的优化，性能有保障</li> <li>能够实现动态扩容</li></ul> <p><img alt="iamges" data-src="data:image/png;base64,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" loading="lazy" class="lazy"></p> <h5 id="_3-文件服务器类型"><a href="#_3-文件服务器类型" class="header-anchor">#</a> (3)文件服务器类型</h5> <ul><li>第三方平台：
<ul><li>阿里的 OSS 对象存储服务</li> <li>七牛云</li></ul></li> <li>自己搭建服务器：FastDFS等</li></ul> <h4 id="_3-上传到其他模块"><a href="#_3-上传到其他模块" class="header-anchor">#</a> [3]上传到其他模块</h4> <p>这种情况肯定出现在分布式架构中，常规业务功能不会这么做，采用这个方案的一定的特殊情况。</p> <p><img alt="iamges" data-src="/javanote/assets/img/img021.8eb7bac8.png" loading="lazy" class="lazy"></p> <p>在 MultipartFile 接口中有一个对应的方法：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * Return a Resource representation of this MultipartFile. This can be used
 * as input to the {@code RestTemplate} or the {@code WebClient} to expose
 * content length and the filename along with the InputStream.
 * @return this MultipartFile adapted to the Resource contract
 * @since 5.1
 */</span>
<span class="token keyword">default</span> <span class="token class-name">Resource</span> <span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MultipartFileResource</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注释中说：这个 Resource 对象代表当前 MultipartFile 对象，输入给 RestTemplate 或 WebClient。而 RestTemplate 或 WebClient 就是用来在 Java 程序中向服务器端发出请求的组件。</p> <h1 id="第七节-文件下载"><a href="#第七节-文件下载" class="header-anchor">#</a> 第七节 文件下载</h1> <h2 id="_1、初始形态"><a href="#_1、初始形态" class="header-anchor">#</a> 1、初始形态</h2> <p>使用链接地址指向要下载的文件。此时浏览器会尽可能解析对应的文件，只要是能够在浏览器窗口展示的，就都会直接显示，而不是提示下载。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>download/hello.atguigu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>下载<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>download/tank.jpg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>下载<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>download/chapter04.zip<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>下载<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>上面例子中，只有 chapter04.zip 文件是直接提示下载的，其他两个都是直接显示。</p> <h2 id="_2、明确要求浏览器提示下载"><a href="#_2、明确要求浏览器提示下载" class="header-anchor">#</a> 2、明确要求浏览器提示下载</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">ServletContext</span> servletContext<span class="token punctuation">;</span>

<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/download/file&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token operator">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token function">downloadFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// 1.获取要下载的文件的输入流对象</span>
    <span class="token comment">// 这里指定的路径以 Web 应用根目录为基准</span>
    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;/images/mi.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// 2.将要下载的文件读取到字节数组中</span>
        <span class="token comment">// ①获取目标文件的长度</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> inputStream<span class="token punctuation">.</span><span class="token function">available</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ②根据目标文件长度创建字节数组</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token comment">// ③将目标文件读取到字节数组中</span>
        inputStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 3.封装响应消息头</span>
        <span class="token comment">// ①创建MultiValueMap接口类型的对象，实现类是HttpHeaders</span>
        <span class="token class-name">MultiValueMap</span> responseHeaderMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ②存入下载文件所需要的响应消息头</span>
        responseHeaderMap<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Disposition&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;attachment; filename=mi.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ③创建ResponseEntity对象</span>
        <span class="token class-name">ResponseEntity</span><span class="token operator">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> responseEntity <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> responseHeaderMap<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>OK<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 4.返回responseEntity对象</span>
        <span class="token keyword">return</span> responseEntity<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>inputStream <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                inputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_3、典型应用场景举例"><a href="#_3、典型应用场景举例" class="header-anchor">#</a> 3、典型应用场景举例</h2> <p>我们目前实现的是一个较为简单的下载，可以用在下面的一些场合：</p> <ul><li>零星小文件下载</li> <li>将系统内部的数据导出为 Excel、PDF 等格式，然后以下载的方式返回给用户</li></ul> <h1 id="第八节-其他不重要内容"><a href="#第八节-其他不重要内容" class="header-anchor">#</a> 第八节 其他不重要内容</h1> <h2 id="_1、springmvc-配置文件的默认位置"><a href="#_1、springmvc-配置文件的默认位置" class="header-anchor">#</a> 1、SpringMVC 配置文件的默认位置</h2> <h3 id="_1配置要求"><a href="#_1配置要求" class="header-anchor">#</a> ①配置要求</h3> <ul><li>配置文件存放目录：/WEB-INF 目录</li> <li>文件名格式：[servlet-name]-servlet.xml
<ul><li>servlet-name 部分是在 web.xml 中配置 DispatcherServlet 时，servlet-name 标签的值</li></ul></li> <li>省略原理的 init-param</li></ul> <h3 id="_2为什么不建议"><a href="#_2为什么不建议" class="header-anchor">#</a> ②为什么不建议</h3> <p>除 web.xml 是 Tomcat 要求放在 WEB-INF 下，其他配置文件习惯上是放在类路径下。</p> <h2 id="_2、请求映射其他方式"><a href="#_2、请求映射其他方式" class="header-anchor">#</a> 2、请求映射其他方式</h2> <h3 id="_1根据请求参数情况映射"><a href="#_1根据请求参数情况映射" class="header-anchor">#</a> ①根据请求参数情况映射</h3> <p>使用 @RequestMapping 注解的 params 参数实现，表达式语法参见下面的例子：</p> <table><thead><tr><th>需求</th> <th>映射方式</th></tr></thead> <tbody><tr><td>请求参数中必须包含userName</td> <td>@RequestMapping(value = &quot;/xxx&quot;, <br>params=&quot;userName&quot;)</td></tr> <tr><td>请求参数中不能包含userName</td> <td>@RequestMapping(value = &quot;/xxx&quot;, <br>params=&quot;!userName&quot;)</td></tr> <tr><td>请求参数中必须包含userName<br>且值必须为Tom2015</td> <td>@RequestMapping(value = &quot;/xxx&quot;, <br>params=&quot;userName=Tom2015&quot;)</td></tr> <tr><td>请求参数中必须包含userName<br>但值不能为Tom2015</td> <td>@RequestMapping(value = &quot;/xxx&quot;, <br>params=&quot;userName=! Tom2015&quot;)</td></tr> <tr><td>请求参数中必须包含userName<br>且值为Tom2015，<br>同时必须包含userPwd但值不限</td> <td>@RequestMapping(value = &quot;/xxx&quot;, <br>params={&quot;userName=Tom2015&quot;, &quot;userPwd&quot;} )</td></tr></tbody></table> <h3 id="_2根据请求消息头内容映射"><a href="#_2根据请求消息头内容映射" class="header-anchor">#</a> ②根据请求消息头内容映射</h3> <p>使用 @RequestMapping 注解的 headers 参数实现，表达式语法参见下面的例子：</p> <table><thead><tr><th>需求</th> <th>映射方式</th></tr></thead> <tbody><tr><td>根据 Accept-Language:zh-CN, zh; q=0.8 映射</td> <td>@RequestMapping (<br>value=&quot;/xxx&quot;, <br>headers= &quot;Accept-Language=zh-CN, en; q=0.8&quot; )</td></tr></tbody></table> <h3 id="_3ant-风格通配符"><a href="#_3ant-风格通配符" class="header-anchor">#</a> ③Ant 风格通配符</h3> <ul><li>英文问号：匹配一个字符</li> <li>一个星号：匹配路径中的一层</li> <li>两个连续星号：匹配路径中的多层</li></ul> <h2 id="_3、-modelattribute-注解"><a href="#_3、-modelattribute-注解" class="header-anchor">#</a> 3、@ModelAttribute 注解</h2> <p>handler 类中，选定一个方法标记 @ModelAttribute 注解。</p> <ul><li>效果1：在每个 handler 方法前执行</li> <li>效果2：可以将某些数据提前存入请求域</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ModelAttrHandler</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@ModelAttribute</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSthBefore</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;initAttr&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;initValue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/test/model/attr/one&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testModelAttrOne</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">Object</span> modelAttribute <span class="token operator">=</span> model<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;initAttr&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;modelAttribute = &quot;</span> <span class="token operator">+</span> modelAttribute<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token string">&quot;target&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/test/model/attr/two&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testModelAttrTwo</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">Object</span> modelAttribute <span class="token operator">=</span> model<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;initAttr&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;modelAttribute = &quot;</span> <span class="token operator">+</span> modelAttribute<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token string">&quot;target&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/test/model/attr/three&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testModelAttrThree</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">Object</span> modelAttribute <span class="token operator">=</span> model<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;initAttr&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;modelAttribute = &quot;</span> <span class="token operator">+</span> modelAttribute<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token string">&quot;target&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/javanote/note/ssm/springmvc/restful/" class="prev">
        第一节 RESTFul概述
      </a></span> <span class="next"><a href="/javanote/note/ssm/springmvc/ssm-integration/">
        第一节 Spring 和 Mybatis 整合
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/javanote/assets/js/app.4d8a0605.js" defer></script><script src="/javanote/assets/js/11.31b4bfe5.js" defer></script><script src="/javanote/assets/js/28.19eae749.js" defer></script>
  </body>
</html>

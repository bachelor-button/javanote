<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>day11 书城项目第四阶段 | Java全栈</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Java 基础, Java 部分源码, JVM, Spring, Spring Boot, Spring Cloud, 数据库原理, MySQL, ElasticSearch, Docker, Linux, 分布式, 中间件, Git">
    
    <link rel="preload" href="/javanote/assets/css/0.styles.1d83b9a0.css" as="style"><link rel="preload" href="/javanote/assets/js/app.4d8a0605.js" as="script"><link rel="preload" href="/javanote/assets/js/11.31b4bfe5.js" as="script"><link rel="preload" href="/javanote/assets/js/78.fcc34355.js" as="script"><link rel="prefetch" href="/javanote/assets/js/10.c191a387.js"><link rel="prefetch" href="/javanote/assets/js/100.f858324b.js"><link rel="prefetch" href="/javanote/assets/js/101.cf545769.js"><link rel="prefetch" href="/javanote/assets/js/102.70c05b3a.js"><link rel="prefetch" href="/javanote/assets/js/103.f1004525.js"><link rel="prefetch" href="/javanote/assets/js/104.0d76607f.js"><link rel="prefetch" href="/javanote/assets/js/105.1706f100.js"><link rel="prefetch" href="/javanote/assets/js/106.c2ff977c.js"><link rel="prefetch" href="/javanote/assets/js/107.5aede27e.js"><link rel="prefetch" href="/javanote/assets/js/108.8ceb754f.js"><link rel="prefetch" href="/javanote/assets/js/109.0921def7.js"><link rel="prefetch" href="/javanote/assets/js/110.1b5f3a78.js"><link rel="prefetch" href="/javanote/assets/js/111.60c4a726.js"><link rel="prefetch" href="/javanote/assets/js/112.a779216c.js"><link rel="prefetch" href="/javanote/assets/js/113.b5d94b79.js"><link rel="prefetch" href="/javanote/assets/js/114.c6f877f7.js"><link rel="prefetch" href="/javanote/assets/js/115.47ecb381.js"><link rel="prefetch" href="/javanote/assets/js/116.92ec84e7.js"><link rel="prefetch" href="/javanote/assets/js/117.e4829b5a.js"><link rel="prefetch" href="/javanote/assets/js/118.b23c1a98.js"><link rel="prefetch" href="/javanote/assets/js/119.b43f94dd.js"><link rel="prefetch" href="/javanote/assets/js/12.fa4003f9.js"><link rel="prefetch" href="/javanote/assets/js/120.f30ed6c6.js"><link rel="prefetch" href="/javanote/assets/js/121.b0022ef6.js"><link rel="prefetch" href="/javanote/assets/js/122.8fffcc78.js"><link rel="prefetch" href="/javanote/assets/js/123.e3fa7a42.js"><link rel="prefetch" href="/javanote/assets/js/124.58e10cb2.js"><link rel="prefetch" href="/javanote/assets/js/125.1b49d5f0.js"><link rel="prefetch" href="/javanote/assets/js/126.7f8e276b.js"><link rel="prefetch" href="/javanote/assets/js/127.000a6e84.js"><link rel="prefetch" href="/javanote/assets/js/128.18177328.js"><link rel="prefetch" href="/javanote/assets/js/129.0a2b7f4e.js"><link rel="prefetch" href="/javanote/assets/js/13.c51f2bed.js"><link rel="prefetch" href="/javanote/assets/js/130.31bfbbdd.js"><link rel="prefetch" href="/javanote/assets/js/131.dab5fd7f.js"><link rel="prefetch" href="/javanote/assets/js/132.34fb1d32.js"><link rel="prefetch" href="/javanote/assets/js/133.3cc3cb6c.js"><link rel="prefetch" href="/javanote/assets/js/134.8b0d230c.js"><link rel="prefetch" href="/javanote/assets/js/135.905e9937.js"><link rel="prefetch" href="/javanote/assets/js/136.23e19c54.js"><link rel="prefetch" href="/javanote/assets/js/137.3c091787.js"><link rel="prefetch" href="/javanote/assets/js/138.83313b98.js"><link rel="prefetch" href="/javanote/assets/js/139.c8e9d90b.js"><link rel="prefetch" href="/javanote/assets/js/14.8fe80835.js"><link rel="prefetch" href="/javanote/assets/js/140.de3bddcd.js"><link rel="prefetch" href="/javanote/assets/js/141.1575c6e3.js"><link rel="prefetch" href="/javanote/assets/js/142.a6471307.js"><link rel="prefetch" href="/javanote/assets/js/143.ad7eb666.js"><link rel="prefetch" href="/javanote/assets/js/144.c43ced04.js"><link rel="prefetch" href="/javanote/assets/js/145.633601ea.js"><link rel="prefetch" href="/javanote/assets/js/146.b65b7a43.js"><link rel="prefetch" href="/javanote/assets/js/147.f6ba557e.js"><link rel="prefetch" href="/javanote/assets/js/148.046226ae.js"><link rel="prefetch" href="/javanote/assets/js/149.0ad83751.js"><link rel="prefetch" href="/javanote/assets/js/15.414ac078.js"><link rel="prefetch" href="/javanote/assets/js/150.230e4d1c.js"><link rel="prefetch" href="/javanote/assets/js/151.905804f3.js"><link rel="prefetch" href="/javanote/assets/js/152.154b514a.js"><link rel="prefetch" href="/javanote/assets/js/153.37aa1b21.js"><link rel="prefetch" href="/javanote/assets/js/154.76fcd840.js"><link rel="prefetch" href="/javanote/assets/js/155.684e2d46.js"><link rel="prefetch" href="/javanote/assets/js/156.2288654a.js"><link rel="prefetch" href="/javanote/assets/js/157.9550ddf7.js"><link rel="prefetch" href="/javanote/assets/js/158.6f176501.js"><link rel="prefetch" href="/javanote/assets/js/159.38b45246.js"><link rel="prefetch" href="/javanote/assets/js/16.f6bcfda9.js"><link rel="prefetch" href="/javanote/assets/js/160.24484228.js"><link rel="prefetch" href="/javanote/assets/js/161.f8a53ea7.js"><link rel="prefetch" href="/javanote/assets/js/162.91a5d72d.js"><link rel="prefetch" href="/javanote/assets/js/163.2ad88c09.js"><link rel="prefetch" href="/javanote/assets/js/164.4cefc831.js"><link rel="prefetch" href="/javanote/assets/js/165.96d54d27.js"><link rel="prefetch" href="/javanote/assets/js/166.3ced3f05.js"><link rel="prefetch" href="/javanote/assets/js/167.9fd4dada.js"><link rel="prefetch" href="/javanote/assets/js/168.64063340.js"><link rel="prefetch" href="/javanote/assets/js/169.49eefc79.js"><link rel="prefetch" href="/javanote/assets/js/17.5ebaaa3f.js"><link rel="prefetch" href="/javanote/assets/js/170.3938afd5.js"><link rel="prefetch" href="/javanote/assets/js/171.5eb5c5a0.js"><link rel="prefetch" href="/javanote/assets/js/172.a9e33ea2.js"><link rel="prefetch" href="/javanote/assets/js/173.98e6d831.js"><link rel="prefetch" href="/javanote/assets/js/174.03448352.js"><link rel="prefetch" href="/javanote/assets/js/175.64340ac0.js"><link rel="prefetch" href="/javanote/assets/js/176.2dc52060.js"><link rel="prefetch" href="/javanote/assets/js/177.bd69843e.js"><link rel="prefetch" href="/javanote/assets/js/178.59341490.js"><link rel="prefetch" href="/javanote/assets/js/179.cc35c0a6.js"><link rel="prefetch" href="/javanote/assets/js/18.62d03701.js"><link rel="prefetch" href="/javanote/assets/js/180.11ae1e52.js"><link rel="prefetch" href="/javanote/assets/js/181.3e438e5d.js"><link rel="prefetch" href="/javanote/assets/js/182.c53a8efc.js"><link rel="prefetch" href="/javanote/assets/js/183.8b441dfb.js"><link rel="prefetch" href="/javanote/assets/js/184.d7f6c4f5.js"><link rel="prefetch" href="/javanote/assets/js/185.b439d0f4.js"><link rel="prefetch" href="/javanote/assets/js/186.b68e5585.js"><link rel="prefetch" href="/javanote/assets/js/187.56de8200.js"><link rel="prefetch" href="/javanote/assets/js/188.841fcdf2.js"><link rel="prefetch" href="/javanote/assets/js/189.be2262c2.js"><link rel="prefetch" href="/javanote/assets/js/19.0efb6573.js"><link rel="prefetch" href="/javanote/assets/js/190.40a63f47.js"><link rel="prefetch" href="/javanote/assets/js/191.a61a7c80.js"><link rel="prefetch" href="/javanote/assets/js/192.88507421.js"><link rel="prefetch" href="/javanote/assets/js/193.d0a95520.js"><link rel="prefetch" href="/javanote/assets/js/194.c66644e0.js"><link rel="prefetch" href="/javanote/assets/js/195.fdaceef8.js"><link rel="prefetch" href="/javanote/assets/js/196.85a1da29.js"><link rel="prefetch" href="/javanote/assets/js/197.a0b73b7e.js"><link rel="prefetch" href="/javanote/assets/js/198.c46de3af.js"><link rel="prefetch" href="/javanote/assets/js/199.86ad5ea9.js"><link rel="prefetch" href="/javanote/assets/js/2.8a34de3e.js"><link rel="prefetch" href="/javanote/assets/js/20.25232ae5.js"><link rel="prefetch" href="/javanote/assets/js/200.3d524295.js"><link rel="prefetch" href="/javanote/assets/js/201.2352b044.js"><link rel="prefetch" href="/javanote/assets/js/202.c96b8ae2.js"><link rel="prefetch" href="/javanote/assets/js/203.344e4887.js"><link rel="prefetch" href="/javanote/assets/js/204.cedde8a4.js"><link rel="prefetch" href="/javanote/assets/js/205.76202206.js"><link rel="prefetch" href="/javanote/assets/js/206.c4406aa6.js"><link rel="prefetch" href="/javanote/assets/js/207.8a27b698.js"><link rel="prefetch" href="/javanote/assets/js/208.59f5b615.js"><link rel="prefetch" href="/javanote/assets/js/209.fd4a6c64.js"><link rel="prefetch" href="/javanote/assets/js/21.d432caaa.js"><link rel="prefetch" href="/javanote/assets/js/210.b0e3a8d1.js"><link rel="prefetch" href="/javanote/assets/js/211.7cb84367.js"><link rel="prefetch" href="/javanote/assets/js/212.e743f232.js"><link rel="prefetch" href="/javanote/assets/js/213.d50db884.js"><link rel="prefetch" href="/javanote/assets/js/214.6da86c20.js"><link rel="prefetch" href="/javanote/assets/js/215.fd5aa565.js"><link rel="prefetch" href="/javanote/assets/js/216.e95bcc55.js"><link rel="prefetch" href="/javanote/assets/js/217.2231449c.js"><link rel="prefetch" href="/javanote/assets/js/218.b8330003.js"><link rel="prefetch" href="/javanote/assets/js/219.aa7e9cf0.js"><link rel="prefetch" href="/javanote/assets/js/22.53113347.js"><link rel="prefetch" href="/javanote/assets/js/220.9ff6e0e6.js"><link rel="prefetch" href="/javanote/assets/js/23.2238c07a.js"><link rel="prefetch" href="/javanote/assets/js/24.cb7d3039.js"><link rel="prefetch" href="/javanote/assets/js/25.b4eaea24.js"><link rel="prefetch" href="/javanote/assets/js/26.e42a49f7.js"><link rel="prefetch" href="/javanote/assets/js/27.e7587f1f.js"><link rel="prefetch" href="/javanote/assets/js/28.19eae749.js"><link rel="prefetch" href="/javanote/assets/js/29.9ddf7186.js"><link rel="prefetch" href="/javanote/assets/js/3.e91a84a2.js"><link rel="prefetch" href="/javanote/assets/js/30.a380d83f.js"><link rel="prefetch" href="/javanote/assets/js/31.02c44506.js"><link rel="prefetch" href="/javanote/assets/js/32.e4bff71a.js"><link rel="prefetch" href="/javanote/assets/js/33.e26b4f6b.js"><link rel="prefetch" href="/javanote/assets/js/34.187f65f5.js"><link rel="prefetch" href="/javanote/assets/js/35.6cd623a3.js"><link rel="prefetch" href="/javanote/assets/js/36.c018db78.js"><link rel="prefetch" href="/javanote/assets/js/37.fd665c05.js"><link rel="prefetch" href="/javanote/assets/js/38.123aa35e.js"><link rel="prefetch" href="/javanote/assets/js/39.58271e1f.js"><link rel="prefetch" href="/javanote/assets/js/4.953d09eb.js"><link rel="prefetch" href="/javanote/assets/js/40.d588f7b4.js"><link rel="prefetch" href="/javanote/assets/js/41.330ac4ba.js"><link rel="prefetch" href="/javanote/assets/js/42.4d2bcc61.js"><link rel="prefetch" href="/javanote/assets/js/43.e446c0f3.js"><link rel="prefetch" href="/javanote/assets/js/44.77abc34b.js"><link rel="prefetch" href="/javanote/assets/js/45.910e4aa5.js"><link rel="prefetch" href="/javanote/assets/js/46.7f8fd6bb.js"><link rel="prefetch" href="/javanote/assets/js/47.9e340085.js"><link rel="prefetch" href="/javanote/assets/js/48.b4c35e1e.js"><link rel="prefetch" href="/javanote/assets/js/49.807495b7.js"><link rel="prefetch" href="/javanote/assets/js/5.fe579469.js"><link rel="prefetch" href="/javanote/assets/js/50.71cfb288.js"><link rel="prefetch" href="/javanote/assets/js/51.8da13592.js"><link rel="prefetch" href="/javanote/assets/js/52.cf90a64f.js"><link rel="prefetch" href="/javanote/assets/js/53.c685fb7a.js"><link rel="prefetch" href="/javanote/assets/js/54.7d73666a.js"><link rel="prefetch" href="/javanote/assets/js/55.59497bd7.js"><link rel="prefetch" href="/javanote/assets/js/56.22cdda6e.js"><link rel="prefetch" href="/javanote/assets/js/57.36f6ee91.js"><link rel="prefetch" href="/javanote/assets/js/58.6655543d.js"><link rel="prefetch" href="/javanote/assets/js/59.1d073e32.js"><link rel="prefetch" href="/javanote/assets/js/6.1af208a0.js"><link rel="prefetch" href="/javanote/assets/js/60.f782c216.js"><link rel="prefetch" href="/javanote/assets/js/61.4f05bcba.js"><link rel="prefetch" href="/javanote/assets/js/62.d607ed0e.js"><link rel="prefetch" href="/javanote/assets/js/63.0d7a42e8.js"><link rel="prefetch" href="/javanote/assets/js/64.ce15498e.js"><link rel="prefetch" href="/javanote/assets/js/65.b9f31598.js"><link rel="prefetch" href="/javanote/assets/js/66.aeff3690.js"><link rel="prefetch" href="/javanote/assets/js/67.f6f59ffa.js"><link rel="prefetch" href="/javanote/assets/js/68.f875e4ca.js"><link rel="prefetch" href="/javanote/assets/js/69.d6512b6b.js"><link rel="prefetch" href="/javanote/assets/js/7.5739f4db.js"><link rel="prefetch" href="/javanote/assets/js/70.881dc1cf.js"><link rel="prefetch" href="/javanote/assets/js/71.263db750.js"><link rel="prefetch" href="/javanote/assets/js/72.58f08a97.js"><link rel="prefetch" href="/javanote/assets/js/73.df9399d4.js"><link rel="prefetch" href="/javanote/assets/js/74.1d6ddc56.js"><link rel="prefetch" href="/javanote/assets/js/75.fcb30922.js"><link rel="prefetch" href="/javanote/assets/js/76.46a74eb4.js"><link rel="prefetch" href="/javanote/assets/js/77.b5e7728c.js"><link rel="prefetch" href="/javanote/assets/js/79.9d5204da.js"><link rel="prefetch" href="/javanote/assets/js/8.26c83b6c.js"><link rel="prefetch" href="/javanote/assets/js/80.672a4f74.js"><link rel="prefetch" href="/javanote/assets/js/81.78acaf25.js"><link rel="prefetch" href="/javanote/assets/js/82.7755c8c3.js"><link rel="prefetch" href="/javanote/assets/js/83.9b495285.js"><link rel="prefetch" href="/javanote/assets/js/84.a1270bb3.js"><link rel="prefetch" href="/javanote/assets/js/85.64d4eb9a.js"><link rel="prefetch" href="/javanote/assets/js/86.9cd6604e.js"><link rel="prefetch" href="/javanote/assets/js/87.588e06ac.js"><link rel="prefetch" href="/javanote/assets/js/88.8dad582a.js"><link rel="prefetch" href="/javanote/assets/js/89.b19689ac.js"><link rel="prefetch" href="/javanote/assets/js/9.51e5d2e7.js"><link rel="prefetch" href="/javanote/assets/js/90.586b9559.js"><link rel="prefetch" href="/javanote/assets/js/91.c9188033.js"><link rel="prefetch" href="/javanote/assets/js/92.69a38839.js"><link rel="prefetch" href="/javanote/assets/js/93.f0c9bdcd.js"><link rel="prefetch" href="/javanote/assets/js/94.f8f6b855.js"><link rel="prefetch" href="/javanote/assets/js/95.a92c2c02.js"><link rel="prefetch" href="/javanote/assets/js/96.ab442531.js"><link rel="prefetch" href="/javanote/assets/js/97.8a60e627.js"><link rel="prefetch" href="/javanote/assets/js/98.3eed55eb.js"><link rel="prefetch" href="/javanote/assets/js/99.b9c138ea.js">
    <link rel="stylesheet" href="/javanote/assets/css/0.styles.1d83b9a0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/javanote/" class="home-link router-link-active"><!----> <span class="site-name">Java全栈</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础" class="mobile-dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/basic/java/day01/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/basic/linux/background/" class="nav-link">
  linux
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/basic/mysql/mysql-basic/" class="nav-link">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/basic/web/WEBday01_HTML-CSS/" class="nav-link">
  web
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="高级" class="dropdown-title"><span class="title">高级</span> <span class="arrow down"></span></button> <button type="button" aria-label="高级" class="mobile-dropdown-title"><span class="title">高级</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/advance/juc/chapter01/" class="nav-link">
  JUC
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/advance/jvm/chapter01/" class="nav-link">
  JVM
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/advance/mysql/chapter01/" class="nav-link">
  MYSQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><span class="title">中间件</span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/middleware/rabbitmq/day01/" class="nav-link">
  rabbitmq
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/middleware/elasticsearch/day01/" class="nav-link">
  elasticsearch
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/middleware/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/middleware/nginx/" class="nav-link">
  nginx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务" class="dropdown-title"><span class="title">微服务</span> <span class="arrow down"></span></button> <button type="button" aria-label="微服务" class="mobile-dropdown-title"><span class="title">微服务</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/microservice/springboot/" class="nav-link">
  springboot
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/microservice/springcloud/day01/" class="nav-link">
  springcloud
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/microservice/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/microservice/distributed-transaction/" class="nav-link">
  分布式事务
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/tools/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/tools/maven/maven-overview/" class="nav-link">
  maven
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ssm" class="dropdown-title"><span class="title">ssm</span> <span class="arrow down"></span></button> <button type="button" aria-label="ssm" class="mobile-dropdown-title"><span class="title">ssm</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/ssm/mybatis/preface/" class="nav-link">
  mybatis
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/ssm/spring/AOP-aspect-oriented-programming/agency-model/" class="nav-link">
  spring
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/ssm/springmvc/basic-function/" class="nav-link">
  springmvc
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/others/cryptography/" class="nav-link">
  密码学
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础" class="mobile-dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/basic/java/day01/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/basic/linux/background/" class="nav-link">
  linux
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/basic/mysql/mysql-basic/" class="nav-link">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/basic/web/WEBday01_HTML-CSS/" class="nav-link">
  web
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="高级" class="dropdown-title"><span class="title">高级</span> <span class="arrow down"></span></button> <button type="button" aria-label="高级" class="mobile-dropdown-title"><span class="title">高级</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/advance/juc/chapter01/" class="nav-link">
  JUC
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/advance/jvm/chapter01/" class="nav-link">
  JVM
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/advance/mysql/chapter01/" class="nav-link">
  MYSQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><span class="title">中间件</span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/middleware/rabbitmq/day01/" class="nav-link">
  rabbitmq
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/middleware/elasticsearch/day01/" class="nav-link">
  elasticsearch
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/middleware/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/middleware/nginx/" class="nav-link">
  nginx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务" class="dropdown-title"><span class="title">微服务</span> <span class="arrow down"></span></button> <button type="button" aria-label="微服务" class="mobile-dropdown-title"><span class="title">微服务</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/microservice/springboot/" class="nav-link">
  springboot
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/microservice/springcloud/day01/" class="nav-link">
  springcloud
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/microservice/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/microservice/distributed-transaction/" class="nav-link">
  分布式事务
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/tools/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/tools/maven/maven-overview/" class="nav-link">
  maven
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ssm" class="dropdown-title"><span class="title">ssm</span> <span class="arrow down"></span></button> <button type="button" aria-label="ssm" class="mobile-dropdown-title"><span class="title">ssm</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/ssm/mybatis/preface/" class="nav-link">
  mybatis
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/ssm/spring/AOP-aspect-oriented-programming/agency-model/" class="nav-link">
  spring
</a></li><li class="dropdown-item"><!----> <a href="/javanote/note/ssm/springmvc/basic-function/" class="nav-link">
  springmvc
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javanote/note/others/cryptography/" class="nav-link">
  密码学
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/javanote/note/basic/web/WEBday01_HTML-CSS/" class="sidebar-link">day01 HTML&amp;CSS</a></li><li><a href="/javanote/note/basic/web/WEBday02_JS&amp;Regular-expression/" class="sidebar-link">day02 JavaScript&amp;正则表达式</a></li><li><a href="/javanote/note/basic/web/WEBday03_VUE&amp;Mall-project-first-phase/" class="sidebar-link">day03 Vue&amp;书城项目第一阶段</a></li><li><a href="/javanote/note/basic/web/WEBday04_XML&amp;Tomcat&amp;Http/" class="sidebar-link">day04 XML&amp;Tomcat&amp;Http协议</a></li><li><a href="/javanote/note/basic/web/WEBday05_Servlet/" class="sidebar-link">day05 Servlet</a></li><li><a href="/javanote/note/basic/web/WEBday06_Request&amp;Response/" class="sidebar-link">day06 Request&amp;Response</a></li><li><a href="/javanote/note/basic/web/WEBday07_The-second-phase-of-the-book-city-project/" class="sidebar-link">day07 书城项目第二阶段</a></li><li><a href="/javanote/note/basic/web/WEBday08_Thymeleaf/" class="sidebar-link">day08 Thmeleaf</a></li><li><a href="/javanote/note/basic/web/WEBday09_The-third-phase-of-the-book-city-project/" class="sidebar-link">day09 书城项目第三阶段</a></li><li><a href="/javanote/note/basic/web/WEBday10_Conversation-&amp;-Book-City-Project-Phase-4/" class="sidebar-link">day10 会话&amp;书城项目第四阶段</a></li><li><a href="/javanote/note/basic/web/WEBday11_The-fourth-phase-of-the-book-city-project/" aria-current="page" class="active sidebar-link">day11 书城项目第四阶段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javanote/note/basic/web/WEBday11_The-fourth-phase-of-the-book-city-project/#第一章-添加商品进购物车" class="sidebar-link">第一章 添加商品进购物车</a></li><li class="sidebar-sub-header"><a href="/javanote/note/basic/web/WEBday11_The-fourth-phase-of-the-book-city-project/#第二章-显示购物车页面" class="sidebar-link">第二章 显示购物车页面</a></li><li class="sidebar-sub-header"><a href="/javanote/note/basic/web/WEBday11_The-fourth-phase-of-the-book-city-project/#第三章-清空购物车" class="sidebar-link">第三章 清空购物车</a></li><li class="sidebar-sub-header"><a href="/javanote/note/basic/web/WEBday11_The-fourth-phase-of-the-book-city-project/#第四章-减号" class="sidebar-link">第四章 减号</a></li><li class="sidebar-sub-header"><a href="/javanote/note/basic/web/WEBday11_The-fourth-phase-of-the-book-city-project/#第四章-删除" class="sidebar-link">第四章 删除</a></li><li class="sidebar-sub-header"><a href="/javanote/note/basic/web/WEBday11_The-fourth-phase-of-the-book-city-project/#第五章-文本框修改" class="sidebar-link">第五章 文本框修改</a></li><li class="sidebar-sub-header"><a href="/javanote/note/basic/web/WEBday11_The-fourth-phase-of-the-book-city-project/#第六章-加号" class="sidebar-link">第六章 加号</a></li><li class="sidebar-sub-header"><a href="/javanote/note/basic/web/WEBday11_The-fourth-phase-of-the-book-city-project/#第七章-double数据运算过程中精度调整" class="sidebar-link">第七章 Double数据运算过程中精度调整</a></li></ul></li><li><a href="/javanote/note/basic/web/WEBday12_Filter&amp;Listenler&amp;Book-City-Project-Phase-5/" class="sidebar-link">day12 Filter&amp;Listener&amp;书城项目第五阶段</a></li><li><a href="/javanote/note/basic/web/WEBday13_Book-City-Project-Phase-5/" class="sidebar-link">day13 书城项目第五阶段</a></li><li><a href="/javanote/note/basic/web/WEBday14_Ajax&amp;Axios&amp;Book-City-Project-Phase-6/" class="sidebar-link">day14 Ajax&amp;Axios&amp;书城项目第六阶段</a></li><li><a href="/javanote/note/basic/web/WEBday15_The-sixth-stage-of-the-book-city-project-&amp;-summary/" class="sidebar-link">day14 Ajax&amp;Axios&amp;书城项目第六阶段</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="day11-书城项目第四阶段"><a href="#day11-书城项目第四阶段" class="header-anchor">#</a> day11 书城项目第四阶段</h1> <h2 id="第一章-添加商品进购物车"><a href="#第一章-添加商品进购物车" class="header-anchor">#</a> 第一章 添加商品进购物车</h2> <h3 id="_1-创建购物车模型"><a href="#_1-创建购物车模型" class="header-anchor">#</a> 1 创建购物车模型</h3> <p><img alt="images" data-src="/javanote/assets/img/img007.b7bb3fd9.png" loading="lazy" class="lazy"></p> <h4 id="_1-1-购物项详情类"><a href="#_1-1-购物项详情类" class="header-anchor">#</a> 1.1 购物项详情类</h4> <p><img alt="images" data-src="data:image/png;base64,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" loading="lazy" class="lazy"></p> <p>public class CartItem {</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 包名:com.atguigu.bean
 *
 * @author Leevi
 * 日期2021-05-17  09:06
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CartItem</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> bookId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> bookName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> imgPath<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 商品的单价
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> price<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> count<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 购物项的金额
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> amount<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">CartItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;CartItem{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;bookId=&quot;</span> <span class="token operator">+</span> bookId <span class="token operator">+</span>
                <span class="token string">&quot;, bookName='&quot;</span> <span class="token operator">+</span> bookName <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>
                <span class="token string">&quot;, imgPath='&quot;</span> <span class="token operator">+</span> imgPath <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>
                <span class="token string">&quot;, price=&quot;</span> <span class="token operator">+</span> price <span class="token operator">+</span>
                <span class="token string">&quot;, count=&quot;</span> <span class="token operator">+</span> count <span class="token operator">+</span>
                <span class="token string">&quot;, amount=&quot;</span> <span class="token operator">+</span> amount <span class="token operator">+</span>
                <span class="token string">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">CartItem</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> bookId<span class="token punctuation">,</span> <span class="token class-name">String</span> bookName<span class="token punctuation">,</span> <span class="token class-name">String</span> imgPath<span class="token punctuation">,</span> <span class="token class-name">Double</span> price<span class="token punctuation">,</span> <span class="token class-name">Integer</span> count<span class="token punctuation">,</span> <span class="token class-name">Double</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bookId <span class="token operator">=</span> bookId<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bookName <span class="token operator">=</span> bookName<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>imgPath <span class="token operator">=</span> imgPath<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> count<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>amount <span class="token operator">=</span> amount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getBookId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> bookId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBookId</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> bookId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bookId <span class="token operator">=</span> bookId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getBookName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> bookName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBookName</span><span class="token punctuation">(</span><span class="token class-name">String</span> bookName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bookName <span class="token operator">=</span> bookName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getImgPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> imgPath<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setImgPath</span><span class="token punctuation">(</span><span class="token class-name">String</span> imgPath<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>imgPath <span class="token operator">=</span> imgPath<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPrice</span><span class="token punctuation">(</span><span class="token class-name">Double</span> price<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 这个方法获取总价:要通过计算才能获取
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>price<span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAmount</span><span class="token punctuation">(</span><span class="token class-name">Double</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>amount <span class="token operator">=</span> amount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 数量+1
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">countIncrease</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 数量-1
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">countDecrease</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_1-2-购物车类-cart"><a href="#_1-2-购物车类-cart" class="header-anchor">#</a> 1.2 购物车类：Cart</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigDecimal</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 包名:com.atguigu.bean
 *
 * @author Leevi
 * 日期2021-05-17  09:09
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cart</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * 存储购物车中的购物项
     * 以购物项中的书的ID作为key，以购物项作为value
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">CartItem</span><span class="token punctuation">&gt;</span></span> cartItemMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 将书添加进购物车
     * @param book
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addBookToCart</span><span class="token punctuation">(</span><span class="token class-name">Book</span> book<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//1. 判断购物车中是否已经有这件商品</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cartItemMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">getBookId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//2. 如果购物车中已经有这件商品了，那么就对其数量+1</span>
            <span class="token function">itemCountIncrease</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">getBookId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">//3. 如果购物车中还没有这件商品，那么我们就新增一个购物项</span>
            <span class="token comment">//第一次添加商品进购物车，那么数量count肯定是1，那么总价就是单价</span>
            <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CartItem</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">getBookId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getBookName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getImgPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cartItemMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>cartItem<span class="token punctuation">.</span><span class="token function">getBookId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>cartItem<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Cart{&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;cartItemMap=&quot;</span> <span class="token operator">+</span> cartItemMap <span class="token operator">+</span>
            <span class="token string">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 显示购物车信息,为了在Thymeleaf中便于使用OGNL表达式获取购物车的信息，
     * 我们的方法名要叫作getCartItemMap(),那么我们在Thymeleaf中就可以使用 .cartItemMap获取
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">CartItem</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCartItemMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> cartItemMap<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 将购物车中的某个购物项的数量+1
     * @param bookId
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">itemCountIncrease</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> bookId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        cartItemMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">countIncrease</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 将购物车中的某个购物项的数量-1
     * @param bookId
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">itemCountDecrease</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> bookId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//1.先将当前购物项的数量-1</span>
        cartItem<span class="token punctuation">.</span><span class="token function">countDecrease</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.判断当前购物项的count是否等于0</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cartItem<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//说明要将当前购物项从购物车中移除</span>
            <span class="token function">removeCartItem</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 从购物车中移除购物项
     * @param bookId
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeCartItem</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> bookId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        cartItemMap<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 修改某个购物项的数量
     * @param bookId
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateItemCount</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> bookId<span class="token punctuation">,</span><span class="token class-name">Integer</span> newCount<span class="token punctuation">)</span><span class="token punctuation">{</span>
        cartItemMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span>newCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 获取购物车中的购物项中的商品的总数
     * 就是将所有购物项的count进行累加
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//遍历出每一个CartItem的count然后累加</span>
        <span class="token comment">//方式一: 采用JDK1.8的新特性</span>
        <span class="token comment">/*AtomicReference&lt;Integer&gt; totalCount = new AtomicReference&lt;&gt;(0);
        cartItemMap.forEach((k,cartItem) -&gt; {
            totalCount.updateAndGet(v -&gt; v + cartItem.getCount());
        });

        return totalCount.get();*/</span>

        <span class="token comment">//方式二: 使用原生的entrySet遍历Map</span>
        <span class="token class-name">Integer</span> totalCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">CartItem</span><span class="token punctuation">&gt;</span></span> cartItemEntry <span class="token operator">:</span> cartItemMap<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            totalCount <span class="token operator">+=</span> cartItemEntry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> totalCount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 获取总金额
     * 就是遍历出每个购物项的金额再累加
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getTotalAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//解决精度问题的核心: 就是将要进行运算的数据转成BigDecimal类型之后再计算</span>
        <span class="token comment">//声明一个总金额</span>
        <span class="token class-name">Double</span> totalAmount <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">CartItem</span><span class="token punctuation">&gt;</span></span> cartItemEntry <span class="token operator">:</span> cartItemMap<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//cartItemEntry.getValue().getAmount()是获取每一个购物项的金额</span>

            <span class="token comment">//使用总金额加上遍历出来的购物项的金额</span>
            totalAmount <span class="token operator">+=</span> cartItemEntry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> totalAmount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-目标"><a href="#_2-目标" class="header-anchor">#</a> 2. 目标</h3> <p>在首页点击『加入购物车』将该条图书加入『购物车』</p> <h3 id="_3-思路"><a href="#_3-思路" class="header-anchor">#</a> 3. 思路</h3> <p>首页→加入购物车→CartServlet.addCartItem()→执行添加操作→回到首页</p> <h3 id="_4-代码实现"><a href="#_4-代码实现" class="header-anchor">#</a> 4. 代码实现</h3> <h4 id="_4-1-创建cartservlet"><a href="#_4-1-创建cartservlet" class="header-anchor">#</a> 4.1 创建CartServlet</h4> <p><img alt="images" data-src="data:image/png;base64,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" loading="lazy" class="lazy"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CartServlet</span> <span class="token keyword">extends</span> <span class="token class-name">ModelBaseServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">BookService</span> bookService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BookServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * 添加商品进购物车
     * @param request
     * @param response
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addCartItem</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//1. 获取请求参数id的值</span>
            <span class="token class-name">Integer</span> id <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//2. 调用bookService的方法根据id查询book信息</span>
            <span class="token class-name">Book</span> book <span class="token operator">=</span> bookService<span class="token punctuation">.</span><span class="token function">getBookById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//3. 尝试从会话域中获取购物车</span>
            <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Cart</span> cart <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Cart</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//4. 判断之前是否已经添加过购物车了</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>cart <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//说明这是第一次添加购物车</span>
                <span class="token comment">//那么就要新创建一个购物车对象</span>
                cart <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//然后将当前book加入到这个购物车</span>
                cart<span class="token punctuation">.</span><span class="token function">addBookToCart</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//然后将cart存入到session</span>
                session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span>cart<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">//说明不是第一次添加购物车</span>
                <span class="token comment">//那么就直接用之前的购物车，添加当前book就行</span>
                cart<span class="token punctuation">.</span><span class="token function">addBookToCart</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
			
            <span class="token comment">//跳转到首页</span>
            response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;/index.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_4-2-index-html页面"><a href="#_4-2-index-html页面" class="header-anchor">#</a> 4.2 index.html页面</h4> <p>购物车数量显示：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--登录前的风格--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>topbar-right<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.loginUser == null}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user?method=toLoginPage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user?method=toRegisterPage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>register<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>注册<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span>
       <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart iconfont icon-gouwuche
              <span class="token punctuation">&quot;</span></span>
       <span class="token punctuation">&gt;</span></span>
        购物车
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart-num<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.cart != null}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.cart.totalCount}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>admin?method=toManagerPage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>admin<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>后台管理<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--登录后风格--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>topbar-right<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>unless</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.loginUser == null}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>欢迎你<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.loginUser.username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>张总<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user?method=logout<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>register<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>注销<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span>
       <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart iconfont icon-gouwuche
              <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        购物车
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart-num<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.cart != null}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.cart.totalCount}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>admin?method=toManagerPage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>admin<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>后台管理<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>加入购物车：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/cart(method=<span class="token punctuation">'</span>addCartItem<span class="token punctuation">'</span>,id=${book.bookId})}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>加入购物车<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_4-3-css样式"><a href="#_4-3-css样式" class="header-anchor">#</a> 4.3 CSS样式</h4> <p><img alt="images" data-src="data:image/png;base64,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" loading="lazy" class="lazy"></p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.books-list .list-content .list-item a</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #39987c<span class="token punctuation">;</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
  <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">cursor</span><span class="token punctuation">:</span>pointer<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span>12px<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果修改完成后页面效果没有改变，可以使用Ctrl+F5强制刷新。</p> <h2 id="第二章-显示购物车页面"><a href="#第二章-显示购物车页面" class="header-anchor">#</a> 第二章 显示购物车页面</h2> <h3 id="_1目标"><a href="#_1目标" class="header-anchor">#</a> 1目标</h3> <p>把购物车信息在专门的页面显示出来</p> <h3 id="_2思路"><a href="#_2思路" class="header-anchor">#</a> 2思路</h3> <p>首页→购物车超链接→CartServlet.showCart()→cart.html</p> <h3 id="_3代码实现"><a href="#_3代码实现" class="header-anchor">#</a> 3代码实现</h3> <h4 id="_3-1-购物车超链接"><a href="#_3-1-购物车超链接" class="header-anchor">#</a> 3.1 购物车超链接</h4> <p>登录状态和未登录状态</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>topbar-right<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.loginUser == null}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user?method=toLoginPage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user?method=toRegisterPage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>register<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>注册<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span>
       <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart?method=toCartPage<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart iconfont icon-gouwuche
              <span class="token punctuation">&quot;</span></span>
       <span class="token punctuation">&gt;</span></span>
        购物车
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart-num<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.cart != null}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.cart.totalCount}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>admin?method=toManagerPage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>admin<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>后台管理<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--登录后风格--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>topbar-right<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>unless</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.loginUser == null}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>欢迎你<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.loginUser.username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>张总<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user?method=logout<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>register<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>注销<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span>
       <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart?method=toCartPage<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart iconfont icon-gouwuche
              <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        购物车
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart-num<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.cart != null}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.cart.totalCount}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>admin?method=toManagerPage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>admin<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>后台管理<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_3-2-cartservlet"><a href="#_3-2-cartservlet" class="header-anchor">#</a> 3.2 CartServlet</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
     * 跳转到显示购物车列表的页面
     * @param request
     * @param response
     */</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">toCartPage</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token function">processTemplate</span><span class="token punctuation">(</span><span class="token string">&quot;cart/cart&quot;</span><span class="token punctuation">,</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-3-cart-html"><a href="#_3-3-cart-html" class="header-anchor">#</a> 3.3 cart.html</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>图片<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>商品名称<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>

            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>数量<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>单价<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>金额<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>操作<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thead</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.cart == null}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>colspan</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index.html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>购物车空空如也，请抓紧购物吧!!!!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.cart != null}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cartItemEntry : ${session.cart.cartItemMap}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name"><span class="token namespace">th:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${cartItemEntry.value.imgPath}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${cartItemEntry.value.bookName}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>活着<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count-num<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${cartItemEntry.value.count}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${cartItemEntry.value.bookId}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${cartItemEntry.value.price}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>36.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${cartItemEntry.value.amount}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>36.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>删除<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.cart != null}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer-left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clear-cart<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>清空购物车<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>继续购物<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer-right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>共<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.cart.totalCount}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>件商品<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>total-price<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>总金额<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.cart.totalAmount}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>99.9<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>元<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pay<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pages/cart/checkout.html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>去结账<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="第三章-清空购物车"><a href="#第三章-清空购物车" class="header-anchor">#</a> 第三章 清空购物车</h2> <h3 id="_1-目标"><a href="#_1-目标" class="header-anchor">#</a> 1 目标</h3> <p>当用户确定点击清空购物车，将Session域中的Cart对象移除。</p> <h3 id="_2-思路"><a href="#_2-思路" class="header-anchor">#</a> 2 思路</h3> <p>cart.html→清空购物车超链接→绑定单击响应函数→confirm()确认→确定→CartServlet.clearCart()→从Session域移除Cart对象</p> <h3 id="_3-代码实现"><a href="#_3-代码实现" class="header-anchor">#</a> 3 代码实现</h3> <h4 id="_3-1-清空购物车超链接"><a href="#_3-1-清空购物车超链接" class="header-anchor">#</a> 3.1 清空购物车超链接</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--在head里面引入vue--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>static/script/vue.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--修改清空购物车的a标签的访问路径，并且绑定点击事件--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart?method=cleanCart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cleanCart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clear-cart<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>清空购物车<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">/**
    * 注意设置table的外层的div的id为app
    * &lt;div class=&quot;list&quot; id=&quot;app&quot;&gt;
    *  &lt;div class=&quot;w&quot;&gt;
    *    &lt;table&gt;
    */</span>
    <span class="token keyword">var</span> vue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string">&quot;el&quot;</span><span class="token operator">:</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;methods&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token function">cleanCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">//弹出确认框</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">&quot;你确定要清空购物车吗?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">//不需要清空购物车，阻止a标签跳转</span>
                    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_3-2-cartservlet-cleancart"><a href="#_3-2-cartservlet-cleancart" class="header-anchor">#</a> 3.2 CartServlet.cleanCart()</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
     * 清空购物车
     * @param request
     * @param response
     * @throws IOException
     */</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cleanCart</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//就是移除掉session中的cart就行了</span>
    request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//跳转到购物车展示页面</span>
    <span class="token function">processTemplate</span><span class="token punctuation">(</span><span class="token string">&quot;cart/cart&quot;</span><span class="token punctuation">,</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="第四章-减号"><a href="#第四章-减号" class="header-anchor">#</a> 第四章 减号</h2> <h3 id="_1-目标-2"><a href="#_1-目标-2" class="header-anchor">#</a> 1. 目标</h3> <ul><li>在大于1的数值基础上-1：执行-1的逻辑</li> <li>在1的基础上-1：执行删除item的逻辑</li></ul> <h3 id="_2-思路-2"><a href="#_2-思路-2" class="header-anchor">#</a> 2. 思路</h3> <p>减号a标签绑定单击响应函数→获取文本框中的数据：当前数量→检查数量是否等于1，如果它等于1的话，则弹出一个确认框，询问其是否想删除?如果不想删除，则阻止a标签的事件</p> <h3 id="_3-后端代码"><a href="#_3-后端代码" class="header-anchor">#</a> 3. 后端代码</h3> <p>CartServlet.countDecrease()方法</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
     * 购物车中某个一个购物项的数量-1
     * @param request
     * @param response
     * @throws IOException
     */</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">countDecrease</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//1. 获取到要-1的书的id</span>
    <span class="token class-name">Integer</span> id <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2. 从session中获取购物车信息</span>
    <span class="token class-name">Cart</span> cart <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Cart</span><span class="token punctuation">)</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//3. 调用购物车的-1方法</span>
    cart<span class="token punctuation">.</span><span class="token function">itemCountDecrease</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//4. 跳转回到购物车页面</span>
    <span class="token function">processTemplate</span><span class="token punctuation">(</span><span class="token string">&quot;cart/cart&quot;</span><span class="token punctuation">,</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-前端代码"><a href="#_4-前端代码" class="header-anchor">#</a> 4. 前端代码</h3> <p>HTML代码给“减号”设置访问路径以及绑定点击事件：</p> <p>需要注意:只能使用onclick绑定不能使用Vue绑定(通过实践得出的)</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token function">cartItemCountDecrease</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/cart(method=<span class="token punctuation">'</span>countDecrease<span class="token punctuation">'</span>,id=${cartItemEntry.value.bookId})}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>js代码：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">function</span> <span class="token function">cartItemCountDecrease</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//判断:输入框的内容是否是1</span>
    <span class="token comment">//输入框就是当前点击的a标签的下一个兄弟: event.target.nextElementSubling</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>nextElementSibling<span class="token punctuation">.</span>value <span class="token operator">==</span> <span class="token string">'1'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> bookName <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;td&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>innerText<span class="token punctuation">;</span>
        <span class="token comment">//则弹出提示框问你是否要删除</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">confirm</span><span class="token punctuation">(</span>bookName <span class="token operator">+</span> <span class="token string">&quot;的数量已经是1了，你确定还要减少吗?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//阻止事件发生</span>
            event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="第四章-删除"><a href="#第四章-删除" class="header-anchor">#</a> 第四章 删除</h2> <h3 id="_1-目标-3"><a href="#_1-目标-3" class="header-anchor">#</a> 1. 目标</h3> <p>点击删除超链接后，把对应的CartItem从Cart中删除</p> <h3 id="_2-思路-3"><a href="#_2-思路-3" class="header-anchor">#</a> 2. 思路</h3> <p>cart.html→删除超链接→CartServlet.removeCartItem()→回到cart.html</p> <p>需要注意：删除之前要确认</p> <h3 id="_3-代码实现-2"><a href="#_3-代码实现-2" class="header-anchor">#</a> 3. 代码实现</h3> <h4 id="_3-1-后端代码"><a href="#_3-1-后端代码" class="header-anchor">#</a> 3.1 后端代码</h4> <p>CartServlet.removeCartItem()</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
     * 删除购物项
     * @param request
     * @param response
     * @throws IOException
     */</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeCartItem</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//1. 获取要删除的购物项的书的id</span>
    <span class="token class-name">Integer</span> id <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2.从session中获取购物车</span>
    <span class="token class-name">Cart</span> cart <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Cart</span><span class="token punctuation">)</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//3. 调用cart的删除购物项的方法</span>
    cart<span class="token punctuation">.</span><span class="token function">removeCartItem</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//4. 跳转回到购物车页面</span>
    <span class="token function">processTemplate</span><span class="token punctuation">(</span><span class="token string">&quot;cart/cart&quot;</span><span class="token punctuation">,</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-2-前端代码"><a href="#_3-2-前端代码" class="header-anchor">#</a> 3.2 前端代码</h4> <p>HTML代码：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/cart(method=<span class="token punctuation">'</span>removeCartItem<span class="token punctuation">'</span>,id=${cartItemEntry.value.bookId})}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deleteCartItem<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>删除<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Vue代码：</p> <div class="language-html extra-class"><pre class="language-html"><code>var vue = new Vue({
    &quot;el&quot;:&quot;#app&quot;,
    &quot;methods&quot;:{
       
        deleteCartItem(){
            //想办法使用JavaScript获取要删除的购物项的书名
            //event.target就表示获取当前事件的标签
            var bookName = event.target.parentElement.parentElement.getElementsByTagName(&quot;td&quot;)[1].innerText;
            if (!confirm(&quot;你确定要删除这个&quot;+bookName+&quot;吗?&quot;)) {
                event.preventDefault()
            }
        }
    }
});
</code></pre></div><h2 id="第五章-文本框修改"><a href="#第五章-文本框修改" class="header-anchor">#</a> 第五章 文本框修改</h2> <h3 id="_1-目标-4"><a href="#_1-目标-4" class="header-anchor">#</a> 1. 目标</h3> <p>用户在文本框输入新数据后，根据用户输入在Session中的Cart中修改CartItem中的count</p> <h3 id="_2-思路-4"><a href="#_2-思路-4" class="header-anchor">#</a> 2. 思路</h3> <p>cart.html→前端数据校验→CartServlet.updateCartItemCount()→回到cart.html</p> <h3 id="_3-代码实现-3"><a href="#_3-代码实现-3" class="header-anchor">#</a> 3. 代码实现</h3> <h4 id="_3-1-后端代码-2"><a href="#_3-1-后端代码-2" class="header-anchor">#</a> 3.1 后端代码</h4> <p>CartServlet.updateCartItemCount()</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
     * 修改购物项的数量
     * @param request
     * @param response
     * @throws IOException
     */</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateCartItemCount</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//1. 获取请求参数:id,newCount</span>
    <span class="token class-name">Integer</span> id <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Integer</span> newCount <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;newCount&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2. 从session中获取购物车信息</span>
    <span class="token class-name">Cart</span> cart <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Cart</span><span class="token punctuation">)</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//3. 调用cart中跟新数量的方法</span>
    cart<span class="token punctuation">.</span><span class="token function">updateItemCount</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>newCount<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//4. 跳转到购物车页面</span>
    <span class="token function">processTemplate</span><span class="token punctuation">(</span><span class="token string">&quot;cart/cart&quot;</span><span class="token punctuation">,</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-2-前端代码-2"><a href="#_3-2-前端代码-2" class="header-anchor">#</a> 3.2 前端代码</h4> <p>HTML代码：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateCartItemCount<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count-num<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${cartItemEntry.value.count}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${cartItemEntry.value.bookId}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>Vue代码：</p> <div class="language-html extra-class"><pre class="language-html"><code>var vue = new Vue({
    &quot;el&quot;:&quot;#app&quot;,
    &quot;methods&quot;:{
        updateCartItemCount(){
            //获取bookId
            var bookId = event.target.nextElementSibling.value;
            //获取newCount
            var newCount = event.target.value;

            //校验newCount的格式是否正确
            var reg = /^[1-9][0-9]*$/

            if (reg.test(newCount)) {
                //发送请求携带请求参数
                location.href = &quot;cart?method=updateCartItemCount&amp;id=&quot;+bookId+&quot;&amp;newCount=&quot;+newCount

            }else {
                alert(&quot;请输入正确的数量&quot;)
            }
        }
    }
});
</code></pre></div><h2 id="第六章-加号"><a href="#第六章-加号" class="header-anchor">#</a> 第六章 加号</h2> <h3 id="_1-目标-5"><a href="#_1-目标-5" class="header-anchor">#</a> 1. 目标</h3> <p>告诉Servlet将Session域中Cart对象里面对应的CartItem执行count+1操作</p> <h3 id="_2-思路-5"><a href="#_2-思路-5" class="header-anchor">#</a> 2. 思路</h3> <p>加号span绑定单击响应函数→获取文本框中的数据：当前数量→CartServlet.countIncrease()→回到cart.html</p> <h3 id="_3-代码实现-4"><a href="#_3-代码实现-4" class="header-anchor">#</a> 3. 代码实现</h3> <h4 id="_3-1-后端代码-3"><a href="#_3-1-后端代码-3" class="header-anchor">#</a> 3.1 后端代码</h4> <p>CartServlet.countIncrease()</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
     * 购物车中某个一个购物项的数量+1
     * @param request
     * @param response
     * @throws IOException
     */</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">countIncrease</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//1. 获取到要-+1的书的id</span>
    <span class="token class-name">Integer</span> id <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2. 从session中获取购物车信息</span>
    <span class="token class-name">Cart</span> cart <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Cart</span><span class="token punctuation">)</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//3. 调用购物车的+1方法</span>
    cart<span class="token punctuation">.</span><span class="token function">itemCountIncrease</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//4. 跳转回到购物车页面</span>
    <span class="token function">processTemplate</span><span class="token punctuation">(</span><span class="token string">&quot;cart/cart&quot;</span><span class="token punctuation">,</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-2-前端代码-3"><a href="#_3-2-前端代码-3" class="header-anchor">#</a> 3.2 前端代码</h4> <p>HTML代码：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/cart(method=<span class="token punctuation">'</span>countIncrease<span class="token punctuation">'</span>,id=${cartItemEntry.value.bookId})}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="第七章-double数据运算过程中精度调整"><a href="#第七章-double数据运算过程中精度调整" class="header-anchor">#</a> 第七章 Double数据运算过程中精度调整</h2> <h3 id="_1-问题现象"><a href="#_1-问题现象" class="header-anchor">#</a> 1. 问题现象</h3> <p><img alt="images" data-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAq8AAAD2CAIAAAB3HfncAAAg7UlEQVR42u3df2gc553H8a8uoeeUpMjXlJOKDd7go/FdfNRKC5baQKPicnFxOUvYh1e04DrN0ToJxHZTWsv6Q14ltLFdaOKENnENKZI5G8lHTZyjpspBWq0htlyaFqdXkw21iXQkl4hL0qg9p7r5vc/82NmZ1c7uSs/79Y9X62efndmZneczzzzzbNvCwoIAAACNtZEGAADQHGkAAADdkQYAANAdaQAAAN2RBgAA0B1pAAAA3ZEGAADQHWkAAADdkQYAANAdaQAAAN2RBgAA0B1pAAAA3ZEGAADQHWkAAADdkQYAANAdaQAAAN2RBgAA0B1pAAAA3ZEGAADQHWkAAADdkQYAANAdaQAAAN2RBgAA0B1pAAAA3ZEGAADQXaumgWtj/asHJraNzpzMdzhPzY5t7xw4JX1jM+M7OhZVOVpLcaStZ9q/WYsH23qGClML+7vDpc3/6hu9Op5fVX75oPHv8NTCge6Ebwn4nB9p6x60HkXvdSb7oCTqvgfUInQQS8DaRZ3mz95dfe1jHbRcGjA+pkNrZ8bvmnTTQO/k9t1yxPjU7IN+6BN0vqLx+AK3rtkT/Z35Cd828rZpxO7utP1eKHRfLnHHcSCOGyhNEXuRso8lQCpFNWoaqLh3+Y9+1kucvct+XPcT4xZLA176LvaPd5tpYGrreI/xSRkfwaZJK7yHvqvOSyq1BBUyBFqI0+vjHkbdPyOTr3MO521uZ/sWhmVwaIJ+I6RX3v2mpMc84IZ2POt4LcoxxHqJOMXsQ3OhuLB/Y7NXBUtEOA34jl3hrnH3BMnazdTwGrSY/bDF0oBYh/sjMrUnd6icBrqMQ38uHKDsxoO+gSUr4SmX8j0J5Aa3BvNPsb4hdA8gFe/Aau857p/+QGCnAStxdoV2MGefJA0gubRpwOkYsJ+xzogKxSnprvOJboulgfLVO5++san+0z0Dp+xvrP31c4/79A0sWaGvQXBjBQv4AnJw0yvJgDyABMonElFXqQKHlIhBA5GnaBxqEM+32xgHt6Oyu8qVAt+V095Jp18qd6zeTVuLpQGblwmCH4e95kXfWSB9A0tW2jTgBGR/d5lyTsZZGpLy9iWJHYrk7nsRDb9zchY8geNQg+pS7SrlfdXpLBelHVzeaSDUuhsH995z9sehpIF6D6dE46W7UqD0G3m7RGigQDgiAEFKFEhgeGpm7SGl28k7G+mdtA9Ee0qd1mDvfVc6SQNIopwGxNfeFYozuSPWxVCbscvtLJULbCsUZHBwvbof+izyuNdiacDr+72aOxR1xm8e/e3bDZShlUnRh9xiUvUNqNu6MFwYHBosjI1O58tXCtxxtqNd+YFBtjVSSXD3oBperX2yNEIaQE0CaaDLaMXFHg1gpQHvQoA7IkqsI55/OMty7xswPyNRxga6dxiW1su0dMnQ4ISb08shKDjgwn8dwek95ivaitJdKTD7Bqb7tk1MnIoeN5DRXTfQQtU04O+zJA1gMdxzG+fuudg0kBs7UcrnJkMTDCz3NOCImFqhWDyfK5ldKH1WexA56icGX9FWlO5KwbWxsWu9ckQZGUAaQM3SHDeUfqlC8P4m0gDSK08eoF4IiLxSYPdxRrWJyzwNVGgeQt9JtR+YvoHlo+r+7R8n6J97gDSAtMwDzpV9yo3KyqFGfBebQhcljZL7SqvNvgF7ThTSABIpj38K7Sr2f0Ve5ayYBvwWd4W0tdKABI7pgZY+cIOZjTSwfKRLA0523OabBIY0gKSc47I6mMs3sEvdl9RB4O5jJw2Mrh8YGPJGtnKoQXXe7pQ7Hj/0zW3INOwb8N/bY88xUG771RstgtMyVMU9CC2mphGgahoIzkREGkBKyqyXR2S3mwacA3TEvLCBNGAdhZVDFneyIKHQHYburugITZ+jYxpQ19zmP9aLm8QrH/SLzEm3ZKXpGxBnJwmERdIAUjAPNWIeK8pXCo72XpvcbQ/sUpr26DRwzdkJ+4YL5hhnxichGX8acCe6tgagyPDo6MsD3rzXDj3TgH9wgPgvjaizhybpZvGje6DVJU8D9qycEb1EpAFUV2HO00h23IzryvLNQ0AgQHWh+Qaspq08biDnm29XtEwD6s80qc+bV4hP9wd/woF7ypebVOMGjMKTvUoPEGkA2YnoGzDvDRvv9+2r1v65nuMSYii/hWFfn/LaeP8oQl//gYZpAAAANB5pAAAA3ZEGAADQHWkAAADdkQYAANAdaQAAAN2RBgAA0B1pAAAA3ZEGAADQHWkAAADdkQYAANAdaQAAAN2RBgAA0B1pAAAA3ZEGAADQHWkAAADdkQYAANAdaQAAAN2RBgAA0B1pAAAA3ZEGAADQHWkAAADdkQYAANAdaQAAAN2RBgAA0B1pAAAA3ZEGAADQXduFCxeavQwAAKCZ6BsAAEB3pAEAAHRHGgAAQHekAQAAdEcaAABAd6QBAAB0RxoAAEB3pAEAAHRHGgAAQHekAQAAdEcaAABAd6QBAAB0RxoAAEB3pAEAAHRHGgAAQHekAQAAdEcaAABAd6QBAAB0RxoAAEB3pAEAAHRHGgAAQHekAQAAdEcaAABAd6QBAAB0RxoAAEB3pAEAAHRHGgAAQHekAQAAdEcaAABAd6QBAAB0RxoAAEB3pAEAAHRHGgAAQHekAQAAdEcaAABAd6QBAAB0RxoAAEB3pAEAAHRHGgAAQHflNHDx4sV6VXrnnXc2e73qjA8HALCM+dJAXRqqGur51re+1eDV/u53v5v1SmVaDwAAddT8NGBEgbRt8+KlfVPSAABgGSMNZLJSWdcDAEAdkQYyWams6wEAoI5IA5msVNb1AABQR6SBTFYq63oAAMtY8eDbh9beNL5jReUifxxp+9P0WHyZFEgDmaxU1vUsG7Mn+jvzE/bjvrGZ8R0dyn8WR9p6Bp3HhamF/d0V6hjb3jlwyqlj9Op4flWz10oX5idf2rOwf6P/6fMjbd3udhueWjgQ2m7XxvpXl/ZV3KB2gQFnt9g2OnMyr+4W6j5TKPrfXXnr0O6k7ifB3SmuTnU/DC5MXJ1LZ2Fi6kQWzFbc/sD7jLb8rv/rX319wvvTbdq9NDB7Yq4z700LdMPUwke63QI9Q8a/baNX2+ty0FuiaaC8+4b27EzelDSQifMj/aVdzuazjlbK1jQObcdyJ+0jmn2YiwwEvv+yDqNCIGiA4sE260gU3R47T1qNuvi+od43NybeFUe2l3Y5bZJVXmmirPd1X+uv37/1rReWs4jvz8B+ElNn4E9fydg6l8zCxNWJjBhp4HrvwkdyJ+Z2ywozDeyRoydvEfvPHX8Zaftz7mp77riSBq58aOHAh70HYm7TOWubtve+ONd5+oaZk7csPsMtxTRgNgDjW63d19qVu4qhs5N6v2n1lTIOgkdyVWM1aaAyq11fH3UqKXYbMx3RzAd3AGXfQFbM5kSMz3xV+NsX3IhWO9TltC7mRhTjcU59shpfDaHvu/K/5lJNq8lD2Wdmg++oLGdcnVbr+LJ6ulx+l7g6l87CxNTZ7N1sGastDfzV2Pb3S3tWGvuG3VtQKK609xPzz3oEgqWYBlQ1Hv1JA62HNLDUhLN4+Bm1q8A1W3MaCO8G5juO9xvPSDiauKllY7jNs6o93W8+E1Pnqoh90qxKzGfi6ry2VBYmrs5m7VYaqCkNbLredqTNaPJL1gUCLwrYvK6CxXSLLvE0UP6qpHsdaaDVxLYQcecrat9mqmYGixXd9ocbs8DFgjSbKfAW4WzhPbMq9EbKW4c7wMvPxNRpN5aitrLlZ0oxdV5bKgsjMXUSqDNTSxqYkj8Zfx6VeaPVLwzL4FDgB4baRq9+qLT6T+JPCaks3TTgDpkZriXG1isNeFdPAwoVLl6QBgLKH2B4O5aHklUZG1gedcUYqEZKkgaiklz1NFAe8ha4hh0YQeKMQih459xD3q7iHB+ckSj2vuTtY079dj1xdQaGszh7mr2bxdW5dBYmps5m71/L0/n/bev+IK7A8A2Fob9E9w2YF9o+4h9wWh5JsHhJ04A6zDX+6Nz4KwUVu5fr96b0DWQuOIpQFTOK0D8kKqpfGlnJLg2I7+WD20Inr94tJMX+8e7yMqjpvFCckm7lrf33KUxtHe8pL0NcnYFbJKakp9wnH1fn0lmYmDqRiRpHEZo3Echfq21/c9JAco2+w9AdmpQqDpAGWlANFwvCL+FiQeM04EpB5LuoKg0oqfbC8IX2RHXGnn7E1blkFqbG8yukUWMaMPsVjkhBPhg8VaHi4b9eTDJY8mmgPFgmzatIA60o/YEv4pAXVwnqKskowqiGJ2Viixs1Evf1jztPiBttGntIKQ8GTFXn0lmYmDpRJ9fe8TX/qe4w9N87QN+AuqPXeD8M8w20oBr6BsIDsugbaJwKg9WVG+ujN0f9+gZivv413aJSpc7YJa/1JL6lFoavTyME0kDuz23nbrQb+4ppwJ19yL6VwLtk4KSBnR/0r17Y5x9SUIOlmAbEN3lWU0cRZv3hLGvq/EKhcQPqxESBcQPqgKmowVO1TUiF1Cqe90+osw+FG/IK13ecVxmPj+XG3ZeEZx8akQPK9XVl9PvsiZHJu/ZHzOFj13NQ9kfNtxNfp1F45MXe/cr1dWVUSlydS2Zh4upEJtRzfaP5PyrzVghY4aaBqLkIlQ4AMwq8fKPdQ+DrNlBmIKjNEk0Di0UaaA3q3MPBoam+gatq5gskAF8lwrGsceIa+0oT63oFKqYB8Q95i5tGN3gmoIy/C4+KV8bKxU33Gzq7UFYnNHo6rs4lszBxdaL+5tVJhHbLDV35D3LWPAFJ0kBEMvDGFV57Z5E9BKSBTFYq63oAAEuPc5nghmPWTxUUxm6cvnLDuNnVf33C/sUBecf92QLnBwiiBgeUf+lgkf0BKtJAJiuVdT0AANQRaSCTlcq6HgAA6og0kMlKZV0PAAB1RBrIZKWyrgcAgDrypYF6Vbos00C93po0AABoNeU00ERG29zgd2x8/gAAoGW1RBoAAABNRBoAAEB3pAEAAHRHGgAAQHekAQAAdEcaAABAd6QBAAB0RxoAAEB3pAEAAHRHGgAAQHekAQAAdEcaAABAd6QBAAB0RxoAAEB3pAEAAHRHGgAAQHekAQAAdEcaAABAd6QBAAB0RxoAAEB3pAEAAHRHGgAAQHekAQAAdEcaAABAd6QBAAB0RxoAAEB3pAEAAHRHGgAAQHekAQAAdEcaAABAd6QBAAB0RxoAAEB3pAEAAHRHGgAAQHekAQAAdEcaAABAd6QBAAB0RxoAAEB3pAEAAHTX9tZbbzV7GQAAQDO1vffee81eBgAA0EykAQAAdEcaAABAd6QBAAB0RxoAAEB3pAEAAHRHGgAAQHekAQAAdEcaAABAd6QBAAB0RxoAAEB3pAEAAHRHGgAAQHekAQAAdEcaAABAd6QBAAB0RxoAAEB3pAEAAHRHGgAAQHekAQAAdNe2sLDQ7GUAAKA5en54oNmL0BJIAwAAfZEGbKQBAIC+SAM20gAAQF+kARtpAACgL9KAjTQAANAXacBGGgAA6Is0YCMNAAD0RRqwkQYAAPoiDdhIAwAAfZEGbKQBAIC+SAM20gAAQF+kARtpAACgL9KAjTQAANAXacBGGgAA6Is0YCMNAAD0RRqwkQY0MD8nr0zL29bjlTm5Iyc3NnuRULPnj8rKAdnYXrHA9Xn5zZS1uW+S9Rvk1hV1qDMg1R71bkleKtlF5dMb5OZ6lCyvo0iuR9asaGhJmZdXLsnM++bDzi65vb1VS4q8eVlenjEf3NQpn1wnKxpbMvkGbSrSgI00sKzNX5KvDsiJy74nO3rlyWdka67ZC4eU5i7L0C55vChjM7KjI7rM6X3yjcMy6/3dIQ8dluF8xQNxkjpVqfao6yV5+F75/qTyVE6+Nyrf7K69ZMQ6imw7JE/ulVsbUvLCUdlxv1xRnrl7rzxZkNtXtFbJuUtyX7+cKvk205EnZMe6RpRMtUGbjTRgIw0sa9fGZPWA3LNbtvXKmnZ5bVJ+ckxemDUbiZ9eli2JzwXRXMbZ2PFBeXjC+bNSy31iQPJj5mH363tlW04uTMiRY2YL9+VReTZfY50BKfaoknylR34yK2s3y30D8qkV8vyoPGa93fCUHOiuqaS6jrtlywaZPSuPHDZbx40FObffF3qyKHl+RLoHzZXdMSDbNpvZ6OlD5up35KU4KmtapuS7RdnUI+dF7sjLnn7pmJfTx+TpSfO1Y1OyI5dtyVQbtAXUOQ38486fdd/25u8O5P+zYpFv/8vBLXKx59/+XX1yx5b9D3z4t4EnG4k0sKwZWf5aTu5Qj9Fz8vA6eWxWPnlILu1t9vKhqsvypX45Y52Lr+2VmyflVxVa7jfPyvovyuwGmZyUu90t/tqY5AZCTXXiOsOS71Hf75E9RbNBfX6/eMWd9myDXJqWT6Yv+avDsmGfSLe8eFY+6xb1WqnvTcs3N2RY0vmEO+TZKfmy1/i5Ld/OcflxX0uUNLbIN9bJU7NmCvxxvnwRxwk9u+SNZ9w+jyxKptmgraHRacAs8PHfFUce+LXv6eg08LkHpz7xMfWJ18ya/3nsX//hf5QajHix/r/j8kcSpAH9OIe/Prk6LquavTCooihtPdKxTvY8IQ/9veQ75VSFlvvpz8t9k/5WwfJYlzx8SbaNysl86joTitijitLZYzZdkyW529+JbS/Pt38uj/SmLClysFOGZn3PqAvQsV9KBecydhYlT/RLfkLueUbO7vKVfHNCPtYvsll+/5ysbYGSdv+N+oxjTr66Uo6L/PhV2ZnLqmSqDdoaGpsGPvP4zn/6xJv/8YUzvxQxGvU711SsaP6i0d7/zYNTuXceP378hPmMWV6CacCs8E559czF/3r0179czIKTBvTjfLFJA0tCSU7PyT0brAZpVrZXarlL8oXb5JzIT98OXgBymurd8vYT7olawjoTC+9RV47J390rslfePxQcZea0sgWZ2Z+upLeOP3tfNgWKXpINXfKrDnlpRj6VUcl5efgmeUzkR6/K1wIjJIzz5pXylMjJGdnW0eySIuf2yRcOy6Zn5Gf+3GA4c7986ah8eVye7cuqZIoN2ioWlwasxvhDVYu9ceaHP3hU7HN9cR77VewbMNLARdnZfcsLP/zD+mAasPLE3MW6XF8gDbSka2P9q0v7FvZ3xzxTM7vLLvWVguKIcUJZXNi/MXY5I195sK3n5dGZk/laW5sMnB9pO9e74L+EaSzn5Cb/Clb4HAa3xa+OUeZQ7up4vs5hq3LLPTshnf1me1wa910/NsxPyk2fNy8WOK1a4jrTfJjBPcrpFi7IQui4H4gOyUvaXRrmvwsS3EaBtciiZOwHdbBNhryL4s0t6fYi+HqD/FvK+7SzKJlig7aKBvYNeCf3Vtv/8XfUWJA+Dfz2o91ObXVBGmhJ2aWB6yXJ3yanOuTkJedMIiGj+eyWKWsBZk/0d57uN5vDpEsVlSR8Zse2dw6cqlzBtrqHCfMdx7fOjLvH1vJKVXvVwPpCYWgwdnWs2q7sc9KG+dENhor0jaaOC5WbhAsj8mnjLfbLQiH0KvscN6rbIL7OhCL3KGd51A4Jl9MkuOkkeUljRTq7zEGRESvirsUj0/LtDdmUnJWvdMpPRI5My0MbJMBuj53z4+aWFDk1INvHouO+01TnZWbU+FwzKZlig1ZhfonyE1UKDU8tLHpYYuPSgG8QgHshwD8swPPu69bVhCp9A/VccNJAS6pnGpiTF6atB/Ny4az86KhcyckPxuWBDalqMc6bD621206zRSztsdrC6OUcqPYN9ngtolJnmNGaHsnVv2tBXXjz8Xh/leZZDRCRZ//RmaZvzMkcvohQi8otd8wJWZX2voY0kGCPmjsrK79oPph4W7b624TT90rfMfOBfTqevKTXJR4eG+FcO/fOj7MoKfL9LtlzKapFdPOWd+rc3JLOtaGo8Xr2lXvv7DyLkik2aKtokVGE0cJp4PVXb/34bVG3DFvxYhH5gDTQQhJlYYvXwCTg9oXatuyVh/fJZ1M2rGpjGdPeB87gIxKM0YhO9kZkmgamgegzdZ9CxHl/uPk3lnm3HAk8E1yL6BRVo8ott33qFnlZt/5pIMkeNS/fycmjoZvffnNMNt3r3NbvNAnJS4q8MCi9I+bJpTqufu6yPNhrjqsXpeXOoqRzRdx/m9z1WRnqk0eL5mOvPW5uSSnJ5tvkeQmO6n9+UDaPWI+8vvosSqbZoK1hEWkgfhhgkHU7wGce33nn68cjxg1Ei+0beH1dxJ2KNSMNtKR69g2UnDt95W15qSgvTppfyEozllRgXvgfcs7jleat+lJZLyxMOQXs6wUzu1Z1dARPwRucBmSq4jJHLUnFlwQvN0h5NdUarKEGgZfW0sNZueWOuaxb/zSQbI/ybtIzGtq7vyj3tMvzZ+WFyzJckKFBX3dx8pJGS3OwV4asxu+OXrlns3nf3fOTsqZg9k4/7vXqZ1TSu6FOZG23bOo179U8NyHv5uVrRiUT5b76ppd8bUy6B6ymN2fOTHC7yLmzcv59Gd4lQyPlXv2MSqbYoC2hnn0D1rWA1yp3DJgzDZR7TN44YzXwa6JKOpV4aeBOOX787S2BKwW+Ow4WizTQkjIcN+CeTBjJ/aXRRGN5nJNpKw2Iv0c9eqmiGr8IBaV9beC4gXRpwB4z2Nd3aqJCp01fYVgGh7q8Cq0AFFjy3DF/v0Ktlwwqt9y/GJS7Rhp1pcAvZo8yzrCH71cmpLNnoxOra8E/lCx5SZmTEwXZo8wbaE8a+JR17dy3FlmUFHnhsNy3rzwboB2DLg2YaSwwtU5zS85OyoP3lucNtCcNvOuSdeXev59kUTLFBo2U8Bhiq2EIjk/90oDZVXCrfb1frIb8b//gP3G3+xLeUAYPRo4AKA82dNJA6ZYHzFY/lAZ+Xc8BBKSBlpTpPQVep1/kiKQg+0x3Srqt9uyafyh+xTTgNX7l7nSzmZQpZWCdBNJAy/UNVF87deuYIan3xf7OvJcMvJ6DkvOSa86KSN3TQNy4Afe6csRNdFKfewri96j5OeP027Si3bzlzBlKFjXgMXlJo9ycU1TaV5TX4sUF+WwDShqt3ZxS0h3H9+yryrxArVHy3Tm5bj24ud2cMsjeT7aOykS+ESVTbNA4qfoja1CnNGDdavhHtd9enVqgkmppwGLdgLDiXS9nKK8y/+vW1+vSPUAaaEnZpgF3phq1azFmSY7nxg9I9C1z8e3lNbNToW9s6uhd3falAfu82bwqL/FNcpZqHDcQWrtVFf6r2D/ePTAhfX3bJiQw5DC7NODMORh11uXcYdgrv/+5f96YanWmknyPsu9c//pz8uTmupV01jFqHHsDSjqTFiSZZa+5Jd3NlOQ0IIuSyTeo35JIAxVaZTMQfLQUuHDgjTaYv2jeJVg1DdiVXJRPeB0PwdmHqmWOREgDLaPG0fg1sb/AKb6WTnuWO+7vBg+x2lGr8FjXQF4Kw4ODgfLD1u15wwXj+fL9iv6xk/YYyUrPL/ZzTjluINjzHyl4IcPr57SvhmSfBrw75cIdAPapW8UpX+qaBqrvUe7UdeEB57WXdAerh+8LaExJe7x9kgk8mlvS6SVKkhuyKJlmg/r4v5ItmQaCkwcEpxNWpx76mASvFMSOGxD3YoGRM8p3K5RHEZoTEr9lPi+vLzYQkAY05PbrRsxrVkmxlr6BwJBD9Xp55OwF9ovdl/gvrkeO16uD9DMjVZlZyAox7sUCqx+ioF5nySoNuDPsBlsvd4C3Ot9+8jqTSrxHOdFEme538SWdMWtRU+E2oKT3SwHlqXlbs6Q7CDE8t3FjSibfoEH+Ybmtlwb8AwMtgckBPxcz1i/BuAF17kJ7LMLllUbzf7PvjYIXF2pAGmhRRqOyW456jV+yafKCdcjBUdm5W1YpX77ymK/d8vITET/YGm3ZpAHzyDI9NjOeO+ZbgPLF/sg7CQPjCpUC6pyGUb07Vn+GM27AHFVgrVH9RxGKdwea/wflfjEidw3GjhiNrfPNovzgOdkwIFvXOYWT71Fvzkp7R/nnbQwXDsuWfeYM9oFfO0xe0ji/nG0XdTHnLslXNsuZ2VC3RBYl52V2XjqU5blekj0D5u9Bbzwkxb0tU9L6SG/1b83T90vfUfPHmS5N+U7iMyqZdIMmEOjMCxxzrC9dV3ExN+424BeNP/P4zs/JxRrG+lUYJFh5euPFIA20IHeAfbn/uTi2/dDAqYmUQ+vdA/3GPvNE5xbjRGLKvCXpijUY+PRzsjF5RK89DQS72e0765qUBso9ATHXC6zji6hXJZxTfPuIo3wU5vPTo8WjvRs73KK+6OAPQ/ZmLSxitES183jnDjTrF283dMqlY3Lisjmc++TPzR84Tl2nOzNPecxBmj3KPBc8Jjv7ZF2nyIxMTMj5krlsR84GLzAnL2lPdbBxl/RZ6eTyuBy37gzcckjG9vp+ejiTktbqX94sW3utdZ+U02fNqzMbd8uJJ/wTQje3pHXH6Z7LsrVPcivlnZKcHpffzJrN9k9HZUsu85IpNmj1fd6a/XOq4sjlRPOGVZF9GlgaSAMtxjm/jBoWEPNf0ebl1KB853D5fiRTzjy3e2SvpGtV69M3UNaUNGA33uU5lIJL7p9x2X+IKd/X4K1dxekII9OAXfnU1vGe/EShxlOZBL36p/fJw8oWvyMvTx0t/1Bv2jof75EHrZP+y/ZIujR7lHM6qDxzz275TiFiYZKXlEuyfrPVCLnWbpYHB+WB7oaUnJX7euTpUvmJjnXyjYI81Cc3t1RJkTP3ypeOKX8bAfF+GdobMcVIFiVTbNAq/BOWWPzfXH/HXo1IAzbSQAtxzqTjOgCcboN04+nm5mR+Rl4Tub3TuSko/aLVlgaClL5033y9jRxF6P8kA/ztdLVZEFTOVgu+xFpm8fUKhPse6mxe5mbklXm5PefcgbYYxs5j3x4WeDLRHmXds/fatLR3ya3tcnPM2yQvab37XEnm2mVNZ5UVzKLku3Pyrrvu7e2tW/L6vFn4lZKsWWeWXNHYkqk2aDR7KG5EX1qgx7HWbF1GGrCRBlpH1Z/2cctVOuFempo7irDuaxPqGxjtyg9MB9v+xc9SDCxfmSdmH9KAjTQAANAXacBGGgAA6Is0YCMNAAD0RRqwkQYAAPoiDdhIAwAAfZEGbKQBAIC+SAM20gAAQF+kARtpAACgL9KAjTQAANAXacBGGgAA6Is0YCMNAAD0RRqwkQYAAPoiDdhIAwAAfZEGbG3vvfdes5cBAAA00/8DLE3zgHKPsscAAAAASUVORK5CYII=" loading="lazy" class="lazy"></p> <h3 id="_2-解决方案"><a href="#_2-解决方案" class="header-anchor">#</a> 2. 解决方案</h3> <ul><li>使用BigDecimal类型来进行Double类型数据运算</li> <li>创建BigDecimal类型对象时将Double类型的数据转换为字符串</li></ul> <p>Cart类：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
     * 获取总金额
     * @return
     */</span>
<span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getTotalAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//解决精度问题的核心: 就是将要进行运算的数据转成BigDecimal类型之后再计算</span>
    <span class="token comment">//声明一个总金额</span>
    <span class="token class-name">BigDecimal</span> bigDecimalTotalAmount <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token string">&quot;0.0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">CartItem</span><span class="token punctuation">&gt;</span></span> cartItemEntry <span class="token operator">:</span> cartItemMap<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//cartItemEntry.getValue().getAmount()是获取每一个购物项的金额</span>

        <span class="token comment">//使用总金额加上遍历出来的购物项的金额</span>
        bigDecimalTotalAmount <span class="token operator">=</span> bigDecimalTotalAmount<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>cartItemEntry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> bigDecimalTotalAmount<span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>CartItem类：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
     * 这个方法获取总价:要通过计算才能获取
     * @return
     */</span>
<span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//1. 将price和count封装成BigDecimal类型</span>
    <span class="token class-name">BigDecimal</span> bigDecimalPrice <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>price <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BigDecimal</span> bigDecimalCount <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//2. 使用bigDecimal的方法进行乘法</span>
    <span class="token keyword">return</span> bigDecimalCount<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>bigDecimalPrice<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/javanote/note/basic/web/WEBday10_Conversation-&amp;-Book-City-Project-Phase-4/" class="prev">
        day10 会话&amp;书城项目第四阶段
      </a></span> <span class="next"><a href="/javanote/note/basic/web/WEBday12_Filter&amp;Listenler&amp;Book-City-Project-Phase-5/">
        day12 Filter&amp;Listener&amp;书城项目第五阶段
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/javanote/assets/js/app.4d8a0605.js" defer></script><script src="/javanote/assets/js/11.31b4bfe5.js" defer></script><script src="/javanote/assets/js/78.fcc34355.js" defer></script>
  </body>
</html>

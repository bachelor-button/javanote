(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{2399:function(t,s,a){"use strict";a.r(s);var e=a(21),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"第五章-mysql-索引语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第五章-mysql-索引语法"}},[t._v("#")]),t._v(" 第五章 MySQL 索引语法")]),t._v(" "),e("h2",{attrs:{id:"_1、概念介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、概念介绍"}},[t._v("#")]),t._v(" 1、概念介绍")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("索引类型")]),t._v(" "),e("th",[t._v("索引特点")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("单值索引")]),t._v(" "),e("td",[t._v("即一个索引只包含单个列，一个表可以有多个单值索引（也叫单列索引）")])]),t._v(" "),e("tr",[e("td",[t._v("唯一索引")]),t._v(" "),e("td",[t._v("索引列的值必须唯一，但允许有空值，空值可以有多个")])]),t._v(" "),e("tr",[e("td",[t._v("主键索引")]),t._v(" "),e("td",[t._v("设定为主键后数据库会自动建立索引，InnoDB 为聚簇索引")])]),t._v(" "),e("tr",[e("td",[t._v("复合索引")]),t._v(" "),e("td",[t._v("即一个索引包含多个列")])])])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("平时我们提到『主键』时，通常都是『主键约束』。而『主键约束』和『主键索引』是两个不同的概念。")])]),t._v(" "),e("h2",{attrs:{id:"_2、索引操作语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、索引操作语法"}},[t._v("#")]),t._v(" 2、索引操作语法")]),t._v(" "),e("p",[t._v("相关语法可以参考 W3CSchool 教程：https://www.w3school.com.cn/sql/sql_create_index.asp")]),t._v(" "),e("h3",{attrs:{id:"_1准备工作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1准备工作"}},[t._v("#")]),t._v(" ①准备工作")]),t._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("create")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("database")]),t._v(" db_shop"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" db_shop"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("create")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("table")]),t._v(" t_customer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\npk_id "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("auto_increment")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("primary")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\ncustomer_no "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\ncustomer_name "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h3",{attrs:{id:"_2创建单值索引"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2创建单值索引"}},[t._v("#")]),t._v(" ②创建单值索引")]),t._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# create index 索引名称 on 要建立索引的字段所在的表(要建立索引的字段);")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("create")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("index")]),t._v(" idx_customer_name "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v(" t_customer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("customer_name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h3",{attrs:{id:"_3创建唯一索引"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3创建唯一索引"}},[t._v("#")]),t._v(" ③创建唯一索引")]),t._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# create unique index 索引名称 on 要建立索引的字段所在的表(要建立索引的字段);")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("create")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unique")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("index")]),t._v(" idx_customer_no "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v(" t_customer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("customer_no"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h3",{attrs:{id:"_4复合索引"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4复合索引"}},[t._v("#")]),t._v(" ④复合索引")]),t._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# create index 索引名称 on 要建立索引的字段所在的表(要建立索引的字段,...,要建立索引的字段);")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("create")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("index")]),t._v(" idx_customer_no_name "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v(" t_customer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("customer_no"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("customer_name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("索引创建好可以如下图所示方式查看：")]),t._v(" "),e("p",[e("img",{staticClass:"lazy",attrs:{alt:"images","data-src":a(613),loading:"lazy"}})]),t._v(" "),e("h3",{attrs:{id:"_5删除索引"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5删除索引"}},[t._v("#")]),t._v(" ⑤删除索引")]),t._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# drop index 要删除的索引名称 on 索引所在的表;")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("drop")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("index")]),t._v(" idx_customer_no_name "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v(" t_customer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h2",{attrs:{id:"_3、最佳实践"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3、最佳实践"}},[t._v("#")]),t._v(" 3、最佳实践")]),t._v(" "),e("h3",{attrs:{id:"_1需要创建索引的情况"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1需要创建索引的情况"}},[t._v("#")]),t._v(" ①需要创建索引的情况")]),t._v(" "),e("ul",[e("li",[e("span",{staticStyle:{color:"blue","font-weight":"bold"}},[t._v("主键自动")]),t._v("建立唯一索引")]),t._v(" "),e("li",[e("span",{staticStyle:{color:"blue","font-weight":"bold"}},[t._v("频繁")]),t._v("作为"),e("span",{staticStyle:{color:"blue","font-weight":"bold"}},[t._v("查询")]),t._v("条件的字段应该创建索引，也就是经常出现在 where 子句中的字段")]),t._v(" "),e("li",[t._v("查询中负责与其它表"),e("span",{staticStyle:{color:"blue","font-weight":"bold"}},[t._v("关联")]),t._v("的"),e("span",{staticStyle:{color:"blue","font-weight":"bold"}},[t._v("字段——外键")]),t._v("， 建立索引")]),t._v(" "),e("li",[t._v("单键/组合索引的选择问题，who？(在高并发下倾向创建组合索引)")]),t._v(" "),e("li",[t._v("查询中排序的字段，排序字段若通过索引去访问将大大提高排序速度")]),t._v(" "),e("li",[t._v("查询中统计或者分组的字段")])]),t._v(" "),e("h3",{attrs:{id:"_2不要创建索引的情况"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2不要创建索引的情况"}},[t._v("#")]),t._v(" ②不要创建索引的情况")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("MySQL 中，一张数据库表中记录数量小于 300 万条时，即使创建索引也不会让搜索速度有明显提升。")])]),t._v(" "),e("li",[e("p",[t._v("经常增删改的表，建立索引提高了查询速度，同时却会降低更新表的速度，如对表进行 INSERT、UPDATE 和 DELETE。因为更新表时，MySQL 不仅要保存数据，还要保存一下索引文件，重新排布索引，这个操作需要对索引表做全表扫描。不仅索引表的全表扫描操作本身非常耗时，而且索引重新排布时不可用，此时执行查询操作没有索引可用，还是要回到原始数据库表做全表扫描。")])]),t._v(" "),e("li",[e("p",[t._v("where 条件里用不到的字段")])]),t._v(" "),e("li",[e("p",[t._v("数据重复，过滤性不好的字段")])])]),t._v(" "),e("h3",{attrs:{id:"_3结论"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3结论"}},[t._v("#")]),t._v(" ③结论")]),t._v(" "),e("p",[t._v("索引并不是无条件创建、越多越好，而是要根据实际情况恰到好处的创建。")]),t._v(" "),e("p",[e("RouterLink",{attrs:{to:"/note/advance/mysql/chapter04/index.html"}},[t._v("上一章")]),t._v(" "),e("RouterLink",{attrs:{to:"/note/advance/mysql/index.html"}},[t._v("回目录")]),t._v(" "),e("RouterLink",{attrs:{to:"/note/advance/mysql/chapter06/index.html"}},[t._v("下一章")])],1)])}),[],!1,null,null,null);s.default=r.exports},613:function(t,s){t.exports="data:image/png;base64,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"}}]);
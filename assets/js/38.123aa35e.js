(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{1316:function(t,s){t.exports="data:image/png;base64,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"},1317:function(t,s){t.exports="data:image/png;base64,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"},1318:function(t,s){t.exports="data:image/png;base64,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"},1319:function(t,s,a){t.exports=a.p+"assets/img/img006.21fb8a1c.png"},1320:function(t,s){t.exports="data:image/png;base64,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"},1321:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAGyCAIAAAAu9BzaAAAjKElEQVR42u2df4hdRxXH7yIqgYLiH6IlpttsFKxFqmKQYlJZNV2woAXBVqFZEFO2iFCJVWRpS7tCEqOo6FZWjWur1UpaFUppIqyYpvljpaJoJX+kNYU1CkrpH2kFherpnuZkOnfu3Jl757y5P75fSHj73v1x3pzPO3Nm7r1npgoIUtAU/fvf//6X2wxoUJoiFQALSi2ABakIYEEqAliQigAWpCKABalojGCdPHly165dTz311Pbt23PbMlgBrMp2qWqTQ4cOffGLX6RP6cXa2tqjjz5aPni4MY899tj73//+3E2SXgMHi79dlKgpCI6lpaVjx445m0XAos3m5+cJUHMzBisEl6effnpmZgZgDUeBXeGOHTvo/zNnzljvC1j85y233EKISNwCWCyAVakqx1tgOQ8OsAYOVmzG46Rtbm6OukX/jgsLC8vLyw3OCLCGozajQg4zRXWLIWKxAJa7UfiFxCGRRK/2YA1bAKtSlLzv2bPHBIuzq4MHD9L/FGxWV1fL9MjBz507V9snlsEdjIYMFo3X7rnnnti9iJvbbrutKIEloejUqVME1rXXXkuhq0wGZl9ZQwbLKaLt+PHj9GJpaemGG27wbGmCxfkQMyejQme+xWCNpz2rNC6wfvazn914440UdTY2NqgjMyfN+SOzHQQsBohCFG9vTTfQZhSfJKmi4ywuLpZnv8amEYHF6Jg9nQQtgYNeS9rEYO3fv39mU8JKeR6L3+Huj+dLZ2dn6Z1AwwbZb44FLPa9+U2ld+OEybrkV1wAa3p6emVlxYxA/glS2mvfvn3MLos7R8nG6Lzr6+v+XngAGgVYPEdAGFnX9aRndE4NlEeFLA9Y5akpK0wWF4YUAx4PsgYOFvuVOzInEFXTTpKYl/spD1j0kRnemKGf/vSnVnzik5rd6/A0ZLDYr0KGCQS/FpdzI8iWMrLjI5jxprY15Zict9XuMsiWL4YNliVJswpjsspqC/5IMvHCCF21uvPOO++7776oIGQOIAamEYFVdRsMpKERgQVNUgALUhHAglQEsCAVASxIRVMNnmOBoBBNIVxBGgJYkIoAFqQigAWpCGBBKgJYkIoAFqQigAWpCGBBKgJYkIoAFqQigAWpCGBBKgJYkIoAFqQigAWpCGBBKgJYkIoAFqQigAWpCGBBKgJYkIoAFqQigAWpCGBBKgJYkIoAFqQigAWpCGBBKgJYkIoAFqQigAWpCGBBKgJYkIoAFqQi1CCFVISqyVB6oRw3pCKABakIYEEqAliQigAWpKJegmUtEs5Lp5YXby5/1fBFeNuovOT4CDUWsHgh+3Bn0/aLi4u8Ma8M7d/eXFGczZMmNZcMtmSuN84WBrbAtdde++ijj06qvZtoFGCFkGE1Ai8Vzsek3SkIkSM5FDFD9Obx48cZC3ON8WITEdpreXmZ/6xa9d48Au9F/4fgIvbk9oNPwwfLpMr5NXkDkwyWrCEdCNbWrVt37dplHZy237dvH8DqqKzOxQ/WyZMnycG8MQceQYEAMntDWaHeCSV9umfPntXV1fvvvz88YpFt1IeaS5qHd4UFwJqwmBVJvf1gMUD059GjR61QwccpNklipELS+agcizYuNqGU3jC8K0SOlUHU7mc2VdSBRd9oYWFBUhxTEqJYZsDwSCIEn7cc3syIxa8pzplpVuAXLBCxJi8TJg9YHJOs0R9vz6/Nj8wgYeIiq85agHLWRWGmapQgvbDk7+apnRK4w8HqhXoDVrHpV0p6xFtOsKzUh3esCmAi6SILo3O0BneeDlE6Jokl5r588HKcs44vf4b0ibWTdtnVJ7AEoPX1dSdYxWYA8KdNRCcN00KmSU3HWyiL+H05oxy8DVi5mzmN+gQWZ0jkxW3btjnB4mzddGFtTyQqp8PiaWvoYDWf7GglcHJYGiSWpyFYZiil083Ozk7gwsBk1CewigutXwUWdZQUMzxpijVtIXKmwwzW7t27aRcmwPI9z2U4m65BxKKjLS0tWXNp/VXPwGI5cyz6k/xXnuc0JVma9T7PEVjvs+Onp6fPnj3LH0maxRDL1Hz5RLFgyeXFqthWVm3imFfDAas2n2UsagOM/83CGBNUNZrVJ3pwETicoZSzePle9DV71FGOBSzz2p/z03JG7wSL6XRGC8nniCo6YFTEKvfFVj/rv0jQQQ0fLEbBM1XtnPqSXk9ahj0dOKfq6QrLV3joFOYUKzPkPBHHMH933xH1AKzwkZ0lcgDt6ERKujOWNeKTi0KHDx9mKMmdUTmNgMU4Os8l2xBqKysr5kWF2uNP5sayNuoBWJMXtYkEGOckglOeO2ecMuGLGg+Wr3N3UABLRVFg5TZWRQALUhHAglQEsCAVASxIRQALUhHAglQ0ZU0VQlAqoaIfpCKABakIYEEqAliQigAWpCKABakIYEEqAliQigAWpCKABakIYEEqAliQigAWpCKABakIYEEqAlgJ1IvyjRPWoMCSGlr8oDA/3l77THr7Mo1VNb1Fzgf5LbMHtpjF2MHiYgrtH1o3y++WRZacOnWKTuR85B9gdV2xYAXWShCXBy5yUbU7m1cuAwGwuq4osKqqKVsbeMqBWLXaw2WW061SL6rKeNRvsKzfei1YU1NTvLFZ6cqqUcsyV7WoOntjsPzfYhjqPVhm6VE/WAyQrHtjOZIfWKI35+fnCamQ1R/8eZUpf7VmgNVFmYXX/GD5ObBqWYXUzgsEi6ziEuJF9bo9AKtzMmHyg1VeC9Msf2V+ZNbd8/SG5bpqppwlvp0gAqyOSnIdD1jmSjiy+kNI6Ud5prcMSlUZZv7IXxvcFMDqqASgnTt3VoFV6+kGs+ee5YDD14ryqNeoDQGs4kKEIEc6weJs3ezUwr1bVNS28M9lOMGiHnZtbc1il4/T8brtDTQQsNhnVWCdOHGiqsg7q6ozqlrMoqir1uwMZrJqq/Vm1QoXvdZAwGJV5ViLi4tVyRCrakbKU0nW07daZphvWhHOWveV/pyenu54ReRAjQIs/xR21eJexWZYklrZpvxHdjJUjnDlidny+sL91djB8t+YUJXR115yLp/XinBVqVXVUr+903jBkmuFnhZwpkrs+9pr22Zwstam4/kOc7LDGkx0f9XnWvUYrKiRnakHHnjgE5/4ROFCylrgtOzgkEEc4WjNkMlqF4xa+SJ0GTJchB6RGAjnTKk1BW+1qnM86JFzYqJfAlgRMpdUhfwCWJCKABakIoAFqQhgQSoCWJCKAFao7r333vPnz/OS91CtAFaQiKq9e/fSi+985ztgK0QAq15M1a233nrJJZfcfffdYCtEAKtGQtXXv/51+vP2228HWyECWD5ZVLHAVogAVqWYqs9//vNf+9rXrI/AVq0Allseqlhgyy+A5VAtVaw77rjjrrvuAltOASxbgVSxmK3l5eWFhYXchndLAOsViqKKBbacAlgXdd999910001RVLHAVlkA62U1pooFtiwBrJfUkioW2DIFsNJQxQJborGDlZAqFthijRqs5FSxwFYxZrCUqGKBrZGCpUoVa+RsjRGsCVDFGjNbowNrYlSxRsvWuMCaMFWscbI1IrCyUMUaIVtjASsjVayxsTUKsLJTxRoVW8MHqyNUscbD1sDB0qZqbm5u+/btUZW0R8LWkMGaQKxqAFYxDrYGC1YbqmSZE1POku7NwCpGwNYwwUobq7hCpLOhGoNVDJ2tAYLVnqpDhw7R/+ZiYFzt3RnJWCHrPZU1YLaGBlaSWMUFt80FI6rWb2oTsVhDZWtQYCXsAbmANjeOZ33U9mAVA2VrOGAlHwNyjeTFxUVZ55eSraWlJTN0JQGrGCJbAwFLY2ZByvxL/iSrSktp/1RgFYNjawhgMVXvfe97Z2dno3Y8cOCAfwPuEMur+srUgx+sL33pS1H2EMqPP/74MNjqPVhE1Te/+c2NjY2tW7eG7/XXv/71mmuueeihh/ybMUbWogHmckt+sD796U8/+OCDvCxFoM6dO3fppZfSjn1nq/dgNdOnPvWpf//737Vg8ao4FJ/M7s+c1qoF6+9///sjjzyS++tmEMCqlAwMzRGiJYBVJYDllrUkXdXi4QCrSgDLLYukqsWhAVaVAJZD4avAOVfKFAGs0ckDlmeBcZZ5xdC/yhzAGp0CR4UtBbBGp2Zg0fBwenq6quMrC2CNTs3A4hWjnXf8OQWwRqfGXWHVvINTAGt0qgWLL+aEH9BJG8AanQLBCu/1nAJYo1MzsPhNs8Wse00tAazRKRysmZkZmQLl6zwmRpzOV7UhwBqdwsG65ZZbzmyK37em2vku06o5UoDVYz3xxBMN9lpcXNyyZUsIWEePHjX7RPNmLA5g/ks6p0+f/ta3vtXAwne+852vfvWrszRpEvUerH/+85/XXXfd+vp67I7XX399CFjnzp0zb3OgAHb8+HEOYLUJPoF15MiRWMOuuOKKhx9++PLLL8/Yqu3Ve7CKTbY+/OEPP//88z/4wQ+i7iP1jPhMaMy5K/N9SrDMXrKsp59+OtyYZ599lkB84YUXCNy+U1UMA6ziQtw6f/58qt+6OQA0AeL7Zzh/j5osnbD92TUQsIrUvqnq8iSvuvrqq80usjuWd0TDAatI6iGKUvS/maQzQ9S7zczM8JMOVfcr57K5UxoUWEU6P1lPP5d7PXN4mN3aDmpoYBUpvFWeCLXEcatlPzhgqopBglW09pmZYDnV/krisKkqhgpW0cJzZjTy1C2y5L9HOZVtPdJgwSqa+k+qYXXKqt5pyGAV3fNi1+zR08DBKrrky+5YMgENH6yiGx7tgg2T1CjAKnL7dWxUFeMBq8jn3RFSVYwKrCKHj8dJVTE2sIrJenq0VBUjBKuYlL/HTFUxTrAKfa+PnKpitGAVmr4HVcWYwSp0CABVrFGDVaTmAFSJxg5WkY4GUGUKYL2k9kyAKksA62W1IQNUlQWwLqoZH6DKKYD1CsVSAqqqBLBshbMCqjwCWA6FEAOq/AJYbvm5AVW1AliVqqIHVIUIYPlUZghUBQpg1cgk6ZJLLgFVgQJY9WK2nnvuuS1btvz3v/8FVSECWEFCDxgrgBUqYovAAlWBAliQigAWpCKABakIYEEqAliQigAWpCKABakIYEEqAliQigAWpCKABakIYEEqAliQigAWpCKABakIYF1U1NJLSdZpGrDGCBavkhq7l7Vazo4dO57aVON1moatMYJVpfAgNDc3d+zYMf82dCi9BXm6r/GCxRiFbHnw4EFZEbMwqKpChzfwLHc4Bo0dLDM+OSPW1NSUCRYvNMfQMEBmb8graNKL0baqaOxghWwpYJUXyOR0jY6zurrKSCGdZ40drNiIZUlCFCtqOcxha7xglRWevPPSvfza7Ap5qMivR96wIwXLijR+cZJudp2eGMYyZzTG2TmOFCynnBGrduFx6ivHiY5fAOuiQsAyO0G/FhYWlpeXc3+nbBojWOFwmHLOWlWtTD43N0eJF8CCXlKDrrBqzEhgzc7O+vOwYQtgXVQsWETPmU2VP6Lh4b59+wDW6NRgVGi9yVPwVa2HjH6kYDkVGLH4So4nN+e5hpHf+ACwLorB8lw85qy/jFT56tDIw1UBsIrNmHTPPffwa1yTSSWABakIYEEqAliQigBWqPbu3fvBD37wpptuym1IPwSwQgWwogSwQgWwogSwQgWwogSwQjUzM0Ngrays5DakHwJYobrssssIrCNHjuQ2pB8CWKF605veRGD95Cc/yW1IPwSwgrSxsXHllVdS0PrjH/+Y25Z+CGAFiQLVL37xi7W1tSeffPLNb35zbnN6IIAVpF27dt18882PP/746173ugMHDuQ2pwcCWPX64Q9/eO+99/7mN7/529/+dvnll//5z39+29veltuorgtg1WtmZmZlZYUyd3p91113nTlzhjjLbVTXBbBq9JWvfOUvf/mLDAZffPFFCloE1jXXXJPbtE4LYPm0urp62223/fa3v337298ubx45cuT2229/+OGHr7rqqtwGdlcAq1KHDx8+dOgQAbRz507ro+9973t33nnn8vLyRz/60dxmdlQAy6Ff/vKX3/72t1/zmtcQW1dccYVzm1/96lf79+//0Ic+tHfv3ve97325Te6cKsGixOKJJ5545pln/vWvf+U2ckJ6/vnn6fs++eSTb33rWz/5yU/u27fPv/1//vOfAwcO3H///a997Wsv29SrXvWq3F9iQtq6dStf43rDG97g3MAB1s9//vPvfve7p0+fnp2dpZ3f+MY35v4WE9KWLVvo+1JuHjub8Ic//OGZTY0k/J84cWJ6epq+70MPPXTDDTd84QtfeNe73mVt8wqw6Cf72c9+9ne/+93dd999/fXX57Yf6rqee+65m2++mTKHO+6448tf/rL50UWwzp8/f911173wwgvr6+u5DYb6pDNnziwsLLzjHe/4xje+IW9eBOsDH/gADX9oHJTbTqh/onTzIx/5yFVXXfXVr36V33kZrO9///sPPPDAr3/969wWQn3VP/7xD0pPf//73/Oc30tgvfjii9u3b//Rj36E2WSojcyrFC+BhetfUCpRhKLeb3Z2dooi2LZt2/70pz/hij3UXkeOHPnxj3+8trY2RYHrwU3lNgkaiF7/+tefPn166jOf+cyVV175uc99Lrc90ED0sY997MYbb5x697vfvbKy8p73vCe3PdBAdPDgwWeffXbqLW95y8mTJynNym0PNBBRmvXYY49N5TUi/OIa1/zsuJ3dMTKvJbfeequvQusERN8/5OyBm+U1slN2ZrcEYCUzslN2ZrcEYCUzslN2ZrcEYCUzslN2ZrcEYCUzslN2ZrekCVhc7tzaK3wVyaq2aL9ZiD1zc3P0f1TNbVWwnPY0W4KgJVhp3RoBlthqWkDtMj8/T2flRUTatEX7zYrNou27d+8me8wWIT+trq6y8xqscpMcLGqrpaUltscEi3bnBqxaVCz87A1sTuvWULDIT4cPH6b/qQnEAi69n6ot2m9WGL/1YvMJZgJr69at1DS8Rlft2hMtzx64JZmxZ88e5lvA2rGp5eVlasxmq9I1AEvPrXFdIW1PXjl16hRZQCcmJ8m+7dui/WYsahf6f//+/QwWxSr+8RUXsIvtIzS6Qo4EtDGDRRZKTC2arvHUuCvUcGuyHMs51VsbGyacY5mrm4hql0KdcI5VtTJZ7ZE1cqzGbg0Fi5e8cn5EjqG0ZnFxUQJmeGBIC5a5xHdZdAT+aUqjBAaG5GB5rreQPSdOnKAXwjr9GLirijp7oCV6bo2OWOI8cy9KDiiEyjvhHbNexOKvZnLDv0h5Jzzf0otYHEHNlaHYKvOd8M6oTcRK7tY4sLgh6JtzdixjLrZJxg7NfmTtN2NxVyJGipP4y8pKu+HjHSWw2G1iJ1siLSz+Cx/GNgZLw61x0w18mqNHj9JPn37rPNpaW1ubnZ3ld/jX36wtkjiM24is+vjHP845FgVzep+G9/SCxmLFhV4meVgN31LQp7NzjiUNyE0quU7UMLbxdEOh4NYgsPjryW9dsjx+n4k2l9cOH9SkBctcpNlM3sU2+hVK0pA8rAZuyZFAvCXJu2mb5IJR00ixYKm6NTrHol2cq0WSWcQ4N1D4kF4pxzJnYspNye8npz/WToZG/GpK3BlOf9Eux0ru1lCwqgYykg3Ib4unkRq0RfvNnLMJLCueb9u2LfyaSVqwPOucy8SHdNN0QCd5tWdvOT5t79aIiFW+gGUNWHjumIav4ZN7GhHLcob1U+OAT7/OqGZKHrHKa5ibEVTGhtSY4ZdTmkUsJbdGgEVHLzYrQPCfzLKZV7LPzBFNKk+ENxPbYFpFZlPOLs0kC4OHX9jRuKRDNpgTs+XJSZ5hqp28rTp7uM1Kbo24Vnju3DmO4Uwug2z+6J1zIUk8EXWphAaA5BLOGLhRrB99eYor1dnDR4UbGxsymC82ux6ryytPcUWdPRxxJbdGJ+9mimDuKKkodzRZcixTPEtUlADiHyjFMGd23/LssXYy94Ux2Wa+z42pmmOJkrs1GizzIoAEaj49/+kZ7DT2RON5ZKulzKlkqwtIcvYGYzF5LT8A8wpBuWcPPHusJcndGgGWnNu69D09PW39sNivIUYo3TZj+kmS05lNWflySOqgARa3vBkDOHlfXV2lRjZJ4j4x9tJTuCVKbo2YIHX6wJruEzHgtXlM8glSyyvmEZyJcDmlaHz2wC25xZzGMEPlIzgzRf/ZwydIldwa1xU2u+0rsC3ab2a2V+zdfEnOHmVns1udAs8eZYmGW5uD5ZmNZGXpCotXguWZjWTl6gqLV4IlQ40q6XWFhY5bW4FlTfFZh+4OWFVe8X+FBmdvA5Y52WbK/xWqzt4GrCRuBVgAKytY5VhN6WfXwJJpIdNIz5AqC1gy9S+isSHZkAUsPbcix0KO1fkcy8S5s12haXZnu0LT7OxdYTO3aoEVqLxgpTUy1s5AsJrZqQRWuCVNwOIbfEn+mFkEXOjVA4svb/GNtv7tay+BqYJFXuTbpv1dYWHcex5y9gZgpXVrBFiSGvNxyzc3diFiSWrMuJRv7e1IxJILKWybdTv5JCOWklsj7iClo9MLM2Z2DSyGhmR1hZ0CS6ChQGV2hVnA0nNr8xyrfEUiO1gsM8cq36mdHSyR2YDWDfgZc6xUbm0OFv3I6DfHV+OdGyd8yLgxWPwswPz8fNUT0iH3GGmDJY94WPNbpmKff2wMViq3NgRLnGfGc1F4USVtsNh5u3fvdj5hElgrSxssCavOB4fCa2W1ByuhWxuCJQ/BOS/RdwcsfkCP7wPuLFj8AAy9yA5WQrc2BEuSzS6DderUKWmvzoLF5ZbkZ5AXrIRuja7dQEfnlEWelO1ajiUjQXlCwVOFJmOOxV48e/asDCamqqvQqIKl4dboMkZ8+6w8dt2piCUAES7UTPLEetcilgDE9Mvob/IRS8+tbasm88kaH0HvKZ1yC0pdPyUj29tp1kptaWdLS9q7tS1Y8hxfbP3TqO/fHiypQhM1HxN79pZ2mlVoGuyeEKz2bo0Aq/YWlLKiLm+134xVewuKpVraNMAq3zrmV+ztPVGP+Gq4NRqsZgiHtEX7zVgNCm6nOnsUWGmfXyjagZXcrW3BCnl8KrAt2m8mJllgBT4+1f7sbcCyqlW1tLMlWO3d2gqsZpe0qtqi/WbSKBZYnjvKExoZtWUZLGfR4sZ2tgEriVubgOW5pGUqYXnPZvNDtfcVFUnvn47aksGiMWBIfhOYzrcEK61bm0esZuu9eNqi/WYsK2I1uDjf+OyNI1aDey78Z28csVK5tTlYpsOarfgQ/v0bg2U5bKr1ig+ptjTBsrqeqPKQVWdvDFYqtzYEy6oy0E2wyoUGugmWlSlnBCuhW6PB4o09V7VECWvzx4K1tLTEd9nWplkhJfOUwOKisYHTSLGtFAtWcrdG1yB1btypiOUJS92JWJ6wNOGIpeTWuIcpqub0ugOWv9RMd8DylJqZMFhKbo0AS+5HS2tBWrDMwO48TkfAkv66/NGEwVJya1zVZGoLeuFZYcvS5K8VSu4Ski6wJn+tUG5yP3z4cMhkW6F5rVDJraFg+a8odSdi+S8UdiRi+S8UTjJi6bk14kY/T/m5joBVa0ZHwPKbMUmw9NwaUYPUEwA7Apa5olDVcbKDZS7G5NTEwFJ1a9sb/VpqYjf6TcDITtmZ3ZI4sFreJuBvi/absdrfJtD47LHTIg3CZ+DZY6eUk7u1FVieezWTJyWNwfLcq5lxWTkLrHKZP1GzZT7agJXErW3BKpOefb1CJ1jl3cPzrYmBVbZnMusVargVYAGsrGBZ84187bZrXWH5qjPt1bWusHzVmczYuXNnlq5Qz61I3pMZGbUlkne3BVayyb8q67nsXI/Ym2BZJtEPcX193bx2kesRexMsqwIAX2KyYonqI/Yabm0FFu8oz++a85Oei6wNPNEGLHkAmg7CYMn8pFxYTHX2xmDJA9DUm09PTzNYfI9G7TSm8+xtwEri1miwis1fD5eO7TJY1EBsbZfBYmKoMcWMXGAVqd0avV4hh8fOdoXSrTirpnSnK+SWdxbDmXBXqOTWiFEh/YDo19/lrpBvLeIVHDvbFZqPW2XvCvXcmmZUGP7lm/ks1aiw9ip1y7MnGRXWXqUOOXuSUWEbtzYEK7DwRpaiIAJWYOGNLEVBBCzPDJYpvRv9Ch23polYU0YlsSi6JxmxZPpUqWZ41JZVEUumTxsUM0oesdq4tS1YZilpXl8kamZyYmBxssVF67hAd/jM5MTA4rSGaxFyTeyou7ISgtXera3Asso4cxSNWo95AmBZ1bk5x4paj3kyYJnVuTnHir3PLhVYSdwaDRbfUc6nlKc9rSyP50Vi61i038xql+LCWFr2NZN35i/hU7VRW5aXzxDIzOTdaufwszd7djyhWyNuTebX8myJ2e+Whw9WY7X0RPityTzjQlnU1VdfTQHcSqfKo0I68oRX/5JZK86iyt4qjwo5O0y++peqW3FrcjIjO2VndkuiwbKSg5ZVb/TAskptT7UoZqQHltV6LYsZtQEruVujwbJS48BS6SFt0X4zvWZSAish/UU7sJK7NRoscwTR/qYiJbCy0B9rZ1r6i3ZgJXdrHFjlEmH+J8SzLN1rNVNtnaBcS/da9NfOeust3avh1ui1dCQJMK1pXAFbAyyrmQSyxhWwlcAy6RfI/NVyws8eZYmGWyPAkluIpA6dtEunwOJJB1kIU6JCp8Dijo9njMyuZ/JgKbk1rowRRUi2wKop2B2wpOMj39D/ZqnIToHFHZ88vCClIicPlpJb46rNUDpyZlPWmkfO/CBhFcYoh5E4Ym1sbJiX26pudqg9cnKw2BJqTF6vkCIE9UScP1U9uRp712SgJXpuDQWLI+T09LTzR9+RiCUrUDh/9B2JWNLxEfRVS7dNLGLpuTX0kg6dnk5c5ZuOgEU/uMXFxUsvvbTLYFF2deLECeLJsybgZMBSdWvzVexTWZA8ea/yTUfAEmUHq7ZlANYrBLBiLek0WOUsL/Zu2vabsTxgOZP3Wi9OHqzyxrEjoVRgNXYrIlYyI2PtRMTStQBghRgfe3aABbAAFsBKaifA0rUAYIUYH3v2noGVXLg1WcnO7JYArGRGdsrO7JYArGRGdsrO7JYArGRGdsrO7JaELpGlp0Cwum9kp+zMbklOrqEBC2BBKsrfFULDE0WrzMk7NEjlHxVCgxTAglQEsCAVASxIRQALUhHAglQ0ELA8q0UGFjBqUOeInyGWclZRxUIHL4D1kpqVg5Knrs1H4z1geVZ9dirtUoYTFsB6eXezEkagzEoeRTBY4Wu6Aqz8ssDyX9i3vqwnkHgosUpwFRVgkWG7d+/2r/rsFMDK/wWsd6yyd7URy1lPliHwlAOlw3J5FmsXEyyugCWPdwKs/qlxV1hVtZzfr3qiwRmcrDf5CGYRSuRY/VMzsDxZUTkgWZ8eO3bMA5YVq8wNELH6JAErMCpwKKLv7ixDYM0jOD8tShmYgMXLcJaPrLFsfWc1NLDCdyE+5ufnnTHJWn7HElcqo1GkEyx+7SzDLA8Mcvkuv3khCwp3WcMBi8tHVxVCCX8KtJwbmZJSudRuFlhSmKUq1LV5ErV36jdYtUHC2jJwoS9+4dyYKwZyN2otkcUb1M5jtVkfoEfqN1gisysMeTql6vtKJ+hP3vkszBDHMCLm+PHj/glSTs763tSBGiBYToVELLM6fO08FoPFeToHoaoxpiyPw/URlpaWeE25EPW33xwmWOTCs2fPljNrj59MquQgnmUyyzmWZ3KLwSqXAOFPzU6cTtp4haZOaZhgWUstFHVgcSOUsx/P8pOBYHH3x1MM1tQUf2RuL8Xfez0elPYZIFjy3cSRVWD5x4CFK5LJwZ29nnUoQXN9fd1c3ZkZKne1Mg7ou0eGDJap8jXj4kKgqp2xZDgsjJxgyZq8pvj4ZqEpWV/Yr16PH3sPln92wCyTbMYSc4GkkLOUA4kTrCo1GA+W167ul3oPFtRNASxIRQALUhHAglQEsCAVASxIRZ0oFQkNUqjoB6no/wv+h5V+LGLJAAAAAElFTkSuQmCC"},1322:function(t,s,a){t.exports=a.p+"assets/img/img009.b3dce48d.png"},1323:function(t,s,a){t.exports=a.p+"assets/img/img010.b89a0f0a.png"},1324:function(t,s,a){t.exports=a.p+"assets/img/img011.99cf673d.png"},1325:function(t,s,a){t.exports=a.p+"assets/img/img012.85a397be.png"},1326:function(t,s,a){t.exports=a.p+"assets/img/img013.97d610ab.png"},1327:function(t,s){t.exports="data:image/png;base64,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"},1328:function(t,s){t.exports="data:image/png;base64,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"},1329:function(t,s){t.exports="data:image/png;base64,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"},2462:function(t,s,a){"use strict";a.r(s);var n=a(21),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"day13-书城项目第五阶段"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#day13-书城项目第五阶段"}},[t._v("#")]),t._v(" day13 书城项目第五阶段")]),t._v(" "),n("h2",{attrs:{id:"功能二-结账"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#功能二-结账"}},[t._v("#")]),t._v(" 功能二 结账")]),t._v(" "),n("h3",{attrs:{id:"_1-创建订单模型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建订单模型"}},[t._v("#")]),t._v(" 1. 创建订单模型")]),t._v(" "),n("h4",{attrs:{id:"_1-1-物理建模"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-物理建模"}},[t._v("#")]),t._v(" 1.1 物理建模")]),t._v(" "),n("h5",{attrs:{id:"_1-1-1-t-order表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-1-t-order表"}},[t._v("#")]),t._v(" 1.1.1 t_order表")]),t._v(" "),n("div",{staticClass:"language-sql extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" t_order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\torder_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PRIMARY")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("KEY")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\torder_sequence "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tcreate_time "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\ttotal_count "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\ttotal_amount "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DOUBLE")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\torder_status "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tuser_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INT")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("table",[n("thead",[n("tr",[n("th",[t._v("字段名")]),t._v(" "),n("th",[t._v("字段作用")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("order_id")]),t._v(" "),n("td",[t._v("主键")])]),t._v(" "),n("tr",[n("td",[t._v("order_sequence")]),t._v(" "),n("td",[t._v("订单号")])]),t._v(" "),n("tr",[n("td",[t._v("create_time")]),t._v(" "),n("td",[t._v("订单创建时间")])]),t._v(" "),n("tr",[n("td",[t._v("total_count")]),t._v(" "),n("td",[t._v("订单的总数量")])]),t._v(" "),n("tr",[n("td",[t._v("total_amount")]),t._v(" "),n("td",[t._v("订单的总金额")])]),t._v(" "),n("tr",[n("td",[t._v("order_status")]),t._v(" "),n("td",[t._v("订单的状态")])]),t._v(" "),n("tr",[n("td",[t._v("user_id")]),t._v(" "),n("td",[t._v("下单的用户的id")])])])]),t._v(" "),n("ul",[n("li",[t._v("虽然order_sequence也是一个不重复的数值，但是不使用它作为主键。数据库表的主键要使用没有业务功能的字段来担任。")]),t._v(" "),n("li",[t._v("订单的状态\n"),n("ul",[n("li",[t._v("待支付（书城项目中暂不考虑）")]),t._v(" "),n("li",[t._v("已支付，待发货：0")]),t._v(" "),n("li",[t._v("已发货：1")]),t._v(" "),n("li",[t._v("确认收货：2")]),t._v(" "),n("li",[t._v("发起退款或退货（书城项目中暂不考虑）")])])]),t._v(" "),n("li",[t._v("用户id\n"),n("ul",[n("li",[t._v("从逻辑和表结构的角度来说，这其实是一个外键。")]),t._v(" "),n("li",[t._v("但是开发过程中建议先不要加外键约束：因为开发过程中数据尚不完整，加了外键约束开发过程中使用测试数据非常不方便，建议项目预发布时添加外键约束测试。")])])])]),t._v(" "),n("h5",{attrs:{id:"_1-1-2-t-order-item表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-2-t-order-item表"}},[t._v("#")]),t._v(" 1.1.2 t_order_item表")]),t._v(" "),n("div",{staticClass:"language-sql extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" t_order_item"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\titem_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PRIMARY")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("KEY")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tbook_name "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tprice "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DOUBLE")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\timg_path "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\titem_count "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\titem_amount "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DOUBLE")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\torder_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("table",[n("thead",[n("tr",[n("th",[t._v("字段名称")]),t._v(" "),n("th",[t._v("字段作用")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("item_id")]),t._v(" "),n("td",[t._v("主键")])]),t._v(" "),n("tr",[n("td",[t._v("book_name")]),t._v(" "),n("td",[t._v("书名")])]),t._v(" "),n("tr",[n("td",[t._v("price")]),t._v(" "),n("td",[t._v("单价")])]),t._v(" "),n("tr",[n("td",[t._v("item_count")]),t._v(" "),n("td",[t._v("当前订单项的数量")])]),t._v(" "),n("tr",[n("td",[t._v("item_amount")]),t._v(" "),n("td",[t._v("当前订单项的金额")])]),t._v(" "),n("tr",[n("td",[t._v("order_id")]),t._v(" "),n("td",[t._v("当前订单项关联的订单表的主键")])])])]),t._v(" "),n("p",[t._v("说明：book_name、author、price这三个字段其实属于t_book表，我们把它们加入到t_order_item表中，其实并不符合数据库设计三大范式。这里做不符合规范的操作的原因是：将这几个字段加入当前表就不必在显示数据时和t_book表做关联查询，提高查询的效率，这是一种变通的做法。")]),t._v(" "),n("h4",{attrs:{id:"_1-2-逻辑模型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-逻辑模型"}},[t._v("#")]),t._v(" 1.2 逻辑模型")]),t._v(" "),n("h5",{attrs:{id:"_1-2-1-order类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-order类"}},[t._v("#")]),t._v(" 1.2.1 Order类")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" orderId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" orderSequence"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" createTime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" totalCount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Double")]),t._v(" totalAmount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" orderStatus "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" userId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h5",{attrs:{id:"_1-2-2-ordritem类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-ordritem类"}},[t._v("#")]),t._v(" 1.2.2 OrdrItem类")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderItem")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" itemId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" bookName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Double")]),t._v(" price"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" imgPath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" itemCount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Double")]),t._v(" itemAmount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" orderId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"_2-创建组件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建组件"}},[t._v("#")]),t._v(" 2. 创建组件")]),t._v(" "),n("h4",{attrs:{id:"_2-1-持久化层"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-持久化层"}},[t._v("#")]),t._v(" 2.1 持久化层")]),t._v(" "),n("p",[n("img",{staticClass:"lazy",attrs:{alt:"images","data-src":a(1316),loading:"lazy"}})]),t._v(" "),n("h4",{attrs:{id:"_2-2-业务逻辑层"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-业务逻辑层"}},[t._v("#")]),t._v(" 2.2 业务逻辑层")]),t._v(" "),n("p",[n("img",{staticClass:"lazy",attrs:{alt:"images","data-src":a(1317),loading:"lazy"}})]),t._v(" "),n("h4",{attrs:{id:"_2-3-表述层"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-表述层"}},[t._v("#")]),t._v(" 2.3 表述层")]),t._v(" "),n("p",[n("img",{staticClass:"lazy",attrs:{alt:"images","data-src":a(1318),loading:"lazy"}})]),t._v(" "),n("h3",{attrs:{id:"_3-功能步骤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-功能步骤"}},[t._v("#")]),t._v(" 3. 功能步骤")]),t._v(" "),n("ul",[n("li",[t._v("创建订单对象")]),t._v(" "),n("li",[t._v("给订单对象填充数据\n"),n("ul",[n("li",[t._v("生成订单号")]),t._v(" "),n("li",[t._v("生成订单的时间")]),t._v(" "),n("li",[t._v("从购物车迁移总数量和总金额")]),t._v(" "),n("li",[t._v("从已登录的User对象中获取userId并设置到订单对象中")])])]),t._v(" "),n("li",[t._v("将订单对象保存到数据库中")]),t._v(" "),n("li",[t._v("获取订单对象在数据库中自增主键的值")]),t._v(" "),n("li",[t._v("根据购物车中的CartItem集合逐个创建OrderItem对象\n"),n("ul",[n("li",[t._v("每个OrderItem对象对应的orderId属性都使用前面获取的订单数据的自增主键的值")])])]),t._v(" "),n("li",[t._v("把OrderItem对象的集合保存到数据库")]),t._v(" "),n("li",[t._v("每一个item对应的图书增加销量")]),t._v(" "),n("li",[t._v("每一个item对应的图书减少库存")]),t._v(" "),n("li",[t._v("清空购物车")])]),t._v(" "),n("h3",{attrs:{id:"_4-案例思路"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-案例思路"}},[t._v("#")]),t._v(" 4. 案例思路")]),t._v(" "),n("p",[n("img",{staticClass:"lazy",attrs:{alt:"images","data-src":a(1319),loading:"lazy"}})]),t._v(" "),n("h3",{attrs:{id:"_5-代码实现"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-代码实现"}},[t._v("#")]),t._v(" 5. 代码实现")]),t._v(" "),n("h4",{attrs:{id:"_5-1-购物车页面结账超链接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-购物车页面结账超链接"}},[t._v("#")]),t._v(" 5.1 购物车页面结账超链接")]),t._v(" "),n("p",[t._v("cart.html")]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("pay"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("protected/OrderClientServlet?method=checkout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("去结账"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("h4",{attrs:{id:"_5-2-orderclientservlet-checkout"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-orderclientservlet-checkout"}},[t._v("#")]),t._v(" 5.2 OrderClientServlet.checkout()")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletResponse")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.获取HttpSession对象")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpSession")]),t._v(" session "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSession")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.获取购物车对象")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cart")]),t._v(" cart "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cart")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" session"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cart"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cart "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" viewName "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cart/cart"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("processTemplate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("viewName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3.获取已登录的用户对象")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" session"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4.调用Service方法执行结账的业务逻辑")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" orderSequence "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" orderService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cart"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 5.清空购物车")]),t._v("\n    session"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cart"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 6.将订单号存入请求域")]),t._v("\n    request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderSequence"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" orderSequence"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 7.将页面跳转到下单成功页面")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" viewName "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cart/checkout"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("processTemplate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("viewName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"_5-3-basedao-batchupdate"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-basedao-batchupdate"}},[t._v("#")]),t._v(" 5.3 BaseDao.batchUpdate()")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 通用的批量增删改方法\n * @param sql\n * @param params 执行批量操作的二维数组\n *               每一条SQL语句的参数是一维数组\n *               多条SQL语句的参数就是二维数组\n * @return 每一条SQL语句返回的受影响的行数\n */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("batchUpdate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),t._v(" connection "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JDBCUtils")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConnection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" rowCountArr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        rowCountArr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" queryRunner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("batch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuntimeException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JDBCUtils")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("releaseConnection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" rowCountArr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"_5-4-orderservice-checkout"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-orderservice-checkout"}},[t._v("#")]),t._v(" 5.4 OrderService.checkout()")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cart")]),t._v(" cart"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 从User对象中获取userId")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" userId "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建订单对象")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),t._v(" order "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 给订单对象填充数据")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 生成订单号=系统时间戳")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" orderSequence "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" userId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 生成订单的时间")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SimpleDateFormat")]),t._v(" simpleDateFormat "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SimpleDateFormat")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yyyy-MM-dd hh:mm:ss"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" createTime "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" simpleDateFormat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 从购物车迁移总数量和总金额")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" totalCount "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cart"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTotalCount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Double")]),t._v(" totalAmount "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cart"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTotalAmount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setOrderSequence")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("orderSequence"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCreateTime")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("createTime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTotalCount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("totalCount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTotalAmount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("totalAmount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将订单对象保存到数据库中")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ※说明：这里对insertOrder()方法的要求是获取自增的主键并将自增主键的值设置到Order对象的orderId属性中")]),t._v("\n    orderDao"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("insertOrder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取订单对象在数据库中自增主键的值")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" orderId "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOrderId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 根据购物车中的CartItem集合逐个创建OrderItem对象")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CartItem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" cartItemMap "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cart"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCartItemMap")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Collection")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CartItem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" cartItems "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cartItemMap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("values")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CartItem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" cartItemList "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayList")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cartItems"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 为了便于批量保存OrderItem，创建Object[][]")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 二维数组第一维：SQL语句的数量")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 二维数组第二维：SQL语句中参数的数量")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" saveOrderItemParamArr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("cartItems"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("size")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 为了便于批量更新Book，创建Object[][]")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" updateBookParamArr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("cartItems"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("size")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" cartItemList"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("size")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CartItem")]),t._v(" cartItem "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cartItemList"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 为保存OrderItem创建Object[]")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" orderItemParam "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// book_name,price,img_path,item_count,item_amount,order_id")]),t._v("\n        orderItemParam"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cartItem"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBookName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        orderItemParam"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cartItem"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPrice")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        orderItemParam"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cartItem"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getImgPath")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        orderItemParam"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cartItem"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        orderItemParam"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cartItem"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAmount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        orderItemParam"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" orderId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将一维数组存入二维数组中")]),t._v("\n        saveOrderItemParamArr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" orderItemParam"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建数组用于保存更新Book数据的信息")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" bookUpdateInfoArr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 增加的销量")]),t._v("\n        bookUpdateInfoArr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cartItem"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 减少的库存")]),t._v("\n        bookUpdateInfoArr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cartItem"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// bookId")]),t._v("\n        bookUpdateInfoArr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cartItem"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBookId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将数组存入List集合")]),t._v("\n        updateBookParamArr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bookUpdateInfoArr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 把OrderItem对象的集合保存到数据库：批量操作")]),t._v("\n    orderItemDao"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("insertOrderItemArr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("saveOrderItemParamArr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用bookUpdateInfoList对图书数据的表执行批量更新操作")]),t._v("\n    bookDao"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateBookByParamArr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("updateBookParamArr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回订单号")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" orderSequence"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"_5-5-orderdao-insertorder-order"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-orderdao-insertorder-order"}},[t._v("#")]),t._v(" 5.5 orderDao.insertOrder(order)")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("insertOrder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),t._v(" order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ※DBUtils没有封装获取自增主键的方法，需要我们使用原生的JDBC来完成")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.获取数据库连接")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),t._v(" connection "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JDBCUtils")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConnection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.创建PreparedStatement对象")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sql "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"INSERT INTO t_order(order_sequence,create_time,total_count,total_amount,order_status,user_id) VALUES(?,?,?,?,?,?)"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ①创建PreparedStatement对象，指明需要自增的主键")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PreparedStatement")]),t._v(" preparedStatement "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("prepareStatement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PreparedStatement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("RETURN_GENERATED_KEYS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ②给PreparedStatement对象设置SQL语句的参数")]),t._v("\n        preparedStatement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOrderSequence")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        preparedStatement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCreateTime")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        preparedStatement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTotalCount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        preparedStatement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDouble")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTotalAmount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        preparedStatement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOrderStatus")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        preparedStatement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ③执行更新")]),t._v("\n        preparedStatement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("executeUpdate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ④获取封装了自增主键的结果集")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResultSet")]),t._v(" generatedKeysResultSet "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" preparedStatement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getGeneratedKeys")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ⑤解析结果集")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("generatedKeysResultSet"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" orderId "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" generatedKeysResultSet"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setOrderId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("orderId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuntimeException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JDBCUtils")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("releaseConnection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"_5-6-orderitemdao-insertorderitemarr-saveorderitemparamarr"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-6-orderitemdao-insertorderitemarr-saveorderitemparamarr"}},[t._v("#")]),t._v(" 5.6 orderItemDao.insertOrderItemArr(saveOrderItemParamArr)")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("insertOrderItemArr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" saveOrderItemParamArr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sql "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"INSERT INTO t_order_item(book_name,price,img_path,item_count,item_amount,order_id) VALUES(?,?,?,?,?,?)"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("batchUpdate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" saveOrderItemParamArr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"_5-7-bookdao-updatebookbyparamarr-updatebookparamarr"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-7-bookdao-updatebookbyparamarr-updatebookparamarr"}},[t._v("#")]),t._v(" 5.7 bookDao.updateBookByParamArr(updateBookParamArr)")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateBookByParamArr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" updateBookParamArr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sql "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"update t_book set sales=sales+?,stock=stock-? where book_id=?"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("batchUpdate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" updateBookParamArr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"功能三-结账过程中使用事务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#功能三-结账过程中使用事务"}},[t._v("#")]),t._v(" 功能三 结账过程中使用事务")]),t._v(" "),n("h3",{attrs:{id:"_1-事务回顾"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-事务回顾"}},[t._v("#")]),t._v(" 1. 事务回顾")]),t._v(" "),n("h4",{attrs:{id:"_1-1-acid属性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-acid属性"}},[t._v("#")]),t._v(" 1.1 ACID属性")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("A：原子性 事务中包含的数据库操作缺一不可，整个事务是不可再分的。")])]),t._v(" "),n("li",[n("p",[t._v("C：一致性 事务执行之前，数据库中的数据整体是正确的；事务执行之后，数据库中的数据整体仍然是正确的。")]),t._v(" "),n("ul",[n("li",[t._v("事务执行成功：提交（commit）")]),t._v(" "),n("li",[t._v("事务执行失败：回滚（rollback）")])])]),t._v(" "),n("li",[n("p",[t._v("I：隔离性 数据库系统同时执行很多事务时，各个事务之间基于不同隔离级别能够在一定程度上做到互不干扰。简单说就是：事务在并发执行过程中彼此隔离。")])]),t._v(" "),n("li",[n("p",[t._v("D：持久性 事务一旦提交，就永久保存到数据库中，不可撤销。")])])]),t._v(" "),n("h4",{attrs:{id:"_1-2-隔离级别"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-隔离级别"}},[t._v("#")]),t._v(" 1.2 隔离级别")]),t._v(" "),n("h5",{attrs:{id:"_1-2-1-并发问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-并发问题"}},[t._v("#")]),t._v(" 1.2.1 并发问题")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("并发问题")]),t._v(" "),n("th",[t._v("问题描述")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("脏读")]),t._v(" "),n("td",[t._v("当前事务读取了其他事务尚未提交的修改"),n("br"),t._v("如果那个事务回滚，那么当前事务读取到的修改就是错误的数据")])]),t._v(" "),n("tr",[n("td",[t._v("不可重复读")]),t._v(" "),n("td",[t._v("当前事务中多次读取到的数据不一致(数据行数一致，但是行中的具体内容不一致)")])]),t._v(" "),n("tr",[n("td",[t._v("幻读")]),t._v(" "),n("td",[t._v("当前事务中多次读取到的数据行数不一致")])])])]),t._v(" "),n("h5",{attrs:{id:"_1-2-2-隔离级别"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-隔离级别"}},[t._v("#")]),t._v(" 1.2.2 隔离级别")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("隔离级别")]),t._v(" "),n("th",[t._v("描述")]),t._v(" "),n("th",[t._v("能解决的并发问题")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("读未提交")]),t._v(" "),n("td",[t._v("允许当前事务读取其他事务尚未提交的修改")]),t._v(" "),n("td",[t._v("啥问题也解决不了")])]),t._v(" "),n("tr",[n("td",[t._v("读已提交")]),t._v(" "),n("td",[t._v("允许当前事务读取其他事务已经提交的修改")]),t._v(" "),n("td",[t._v("脏读")])]),t._v(" "),n("tr",[n("td",[t._v("可重复读")]),t._v(" "),n("td",[t._v("当前事务执行时锁定当前记录，不允许其他事务操作")]),t._v(" "),n("td",[t._v("脏读、不可重复读")])]),t._v(" "),n("tr",[n("td",[t._v("串行化")]),t._v(" "),n("td",[t._v("当前事务执行时锁定当前表，不允许其他事务操作")]),t._v(" "),n("td",[t._v("脏读、不可重复读、幻读")])])])]),t._v(" "),n("h3",{attrs:{id:"_2-jdbc事务控制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-jdbc事务控制"}},[t._v("#")]),t._v(" 2. JDBC事务控制")]),t._v(" "),n("h4",{attrs:{id:"_2-1-同一个数据库连接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-同一个数据库连接"}},[t._v("#")]),t._v(" 2.1 同一个数据库连接")]),t._v(" "),n("p",[n("img",{staticClass:"lazy",attrs:{alt:"images","data-src":a(1320),loading:"lazy"}})]),t._v(" "),n("h4",{attrs:{id:"_2-2-关闭事务的自动提交"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-关闭事务的自动提交"}},[t._v("#")]),t._v(" 2.2 关闭事务的自动提交")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[t._v("connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAutoCommit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h4",{attrs:{id:"_2-3-提交事务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-提交事务"}},[t._v("#")]),t._v(" 2.3 提交事务")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[t._v("connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h4",{attrs:{id:"_2-4-回滚事务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-回滚事务"}},[t._v("#")]),t._v(" 2.4 回滚事务")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[t._v("connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rollBack")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h4",{attrs:{id:"_2-5-事务整体的代码块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-事务整体的代码块"}},[t._v("#")]),t._v(" 2.5 事务整体的代码块")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 关闭事务的自动提交")]),t._v("\n    connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAutoCommit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 事务中包含的所有数据库操作")]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 提交事务")]),t._v("\n    connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Excetion")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 回滚事务")]),t._v("\n    connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rollBack")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 释放数据库连接")]),t._v("\n    connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"_3-将事务对接到书城项目中"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-将事务对接到书城项目中"}},[t._v("#")]),t._v(" 3. 将事务对接到书城项目中")]),t._v(" "),n("h4",{attrs:{id:"_3-1-三层架构中事务要对接的位置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-三层架构中事务要对接的位置"}},[t._v("#")]),t._v(" 3.1 三层架构中事务要对接的位置")]),t._v(" "),n("p",[t._v("从逻辑上来说，一个事务对应一个业务方法（Service层的一个方法）。")]),t._v(" "),n("p",[n("img",{staticClass:"lazy",attrs:{alt:"images","data-src":a(1321),loading:"lazy"}})]),t._v(" "),n("h4",{attrs:{id:"_3-2-假想"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-假想"}},[t._v("#")]),t._v(" 3.2 假想")]),t._v(" "),n("p",[t._v("每一个Service方法内部，都套用了事务操作所需要的try...catch...finally块。")]),t._v(" "),n("h4",{attrs:{id:"_3-3-假想代码的缺陷"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-假想代码的缺陷"}},[t._v("#")]),t._v(" 3.3 假想代码的缺陷")]),t._v(" "),n("ul",[n("li",[t._v("会出现大量的冗余代码：我们希望能够抽取出来，只写一次")]),t._v(" "),n("li",[t._v("对核心业务功能是一种干扰：我们希望能够在编写业务逻辑代码时专注于业务本身，而不必为辅助性质的套路代码分心")]),t._v(" "),n("li",[t._v("将持久化层对数据库的操作写入业务逻辑层，是对业务逻辑层的一种污染，导致持久化层和业务逻辑层耦合在一起")])]),t._v(" "),n("h4",{attrs:{id:"_3-4-事务代码抽取"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-事务代码抽取"}},[t._v("#")]),t._v(" 3.4 事务代码抽取")]),t._v(" "),n("ul",[n("li",[t._v("只要是Filter拦截到的请求都会从doFilter()方法经过")]),t._v(" "),n("li",[t._v("chain.doFilter(req, resp);可以包裹住将来要执行的所有方法")]),t._v(" "),n("li",[t._v("事务操作的try...catch...finally块只要把chain.doFilter(req, resp)包住，就能够包住将来要执行的所有方法")])]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("doFilter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletRequest")]),t._v(" req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletResponse")]),t._v(" resp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FilterChain")]),t._v(" chain"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 关闭事务的自动提交")]),t._v("\n        connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAutoCommit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 『事务中包含的所有数据库操作』就在chain.doFilter(req, resp);将来要调用的方法中")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 所以用事务的try...catch...finally块包住chain.doFilter(req, resp);")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 就能让所有事务方法都『享受』到事务功能的『服务』。")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 所谓框架其实就是把常用的『套路代码』抽取出来，为大家服务，我们享受框架服务提高开发效率。")]),t._v("\n        chain"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("doFilter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" resp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 提交事务")]),t._v("\n        connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Excetion")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 回滚事务")]),t._v("\n        connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rollBack")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 释放数据库连接")]),t._v("\n        connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"_3-5-在filter中获取数据库连接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-在filter中获取数据库连接"}},[t._v("#")]),t._v(" 3.5 在Filter中获取数据库连接")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("doFilter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletRequest")]),t._v(" req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletResponse")]),t._v(" resp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FilterChain")]),t._v(" chain"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        \n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取数据库连接")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),t._v(" connection "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JDBCUtils")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConnection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 关闭事务的自动提交")]),t._v("\n        connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAutoCommit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 『事务中包含的所有数据库操作』就在chain.doFilter(req, resp);将来要调用的方法中")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 所以用事务的try...catch...finally块包住chain.doFilter(req, resp);")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 就能让所有事务方法都『享受』到事务功能的『服务』。")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 所谓框架其实就是把常用的『套路代码』抽取出来，为大家服务，我们享受框架服务提高开发效率。")]),t._v("\n        chain"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("doFilter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" resp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 提交事务")]),t._v("\n        connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Excetion")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 回滚事务")]),t._v("\n        connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rollBack")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 释放数据库连接")]),t._v("\n        connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"_3-6-保证所有数据库操作使用同一个连接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-保证所有数据库操作使用同一个连接"}},[t._v("#")]),t._v(" 3.6 保证所有数据库操作使用同一个连接")]),t._v(" "),n("p",[t._v("重构JDBCUtils.getConnection()方法实现：所有数据库操作使用同一个连接。")]),t._v(" "),n("p",[n("img",{staticClass:"lazy",attrs:{alt:"images","data-src":a(1322),loading:"lazy"}})]),t._v(" "),n("h5",{attrs:{id:"_3-6-1-从数据源中只拿出一个"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-1-从数据源中只拿出一个"}},[t._v("#")]),t._v(" 3.6.1 从数据源中只拿出一个")]),t._v(" "),n("p",[t._v("为了保证各个需要Connection对象的地方使用的都是同一个对象，我们从数据源中只获取一个Connection。不是说整个项目只用一个Connection，而是说调用JDBCUtils.getConnection()方法时，只使用一个。所以落实到代码上就是：每次调用getConnection()方法时先检查是否已经拿过了，拿过就给旧的，没拿过给新的。")]),t._v(" "),n("h5",{attrs:{id:"_3-6-2-公共区域"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-2-公共区域"}},[t._v("#")]),t._v(" 3.6.2 公共区域")]),t._v(" "),n("p",[t._v("为了保证各个方法中需要Connection对象时都能拿到同一个对象，需要做到：将唯一的对象存入一个大家都能接触到的地方。")]),t._v(" "),n("p",[n("img",{staticClass:"lazy",attrs:{alt:"images","data-src":a(1323),loading:"lazy"}})]),t._v(" "),n("p",[t._v("线程本地化技术实现Connection对象从上到下传递。")]),t._v(" "),n("h4",{attrs:{id:"_3-7-线程本地化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-线程本地化"}},[t._v("#")]),t._v(" 3.7 线程本地化")]),t._v(" "),n("h5",{attrs:{id:"_3-7-1-确认同一个线程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-1-确认同一个线程"}},[t._v("#")]),t._v(" 3.7.1 确认同一个线程")]),t._v(" "),n("p",[t._v("在从Filter、Servlet、Service一直到Dao运行的过程中，我们始终都没有做类似new Thread().start()这样开启新线程的操作，所以整个过程在同一个线程中。")]),t._v(" "),n("h5",{attrs:{id:"_3-7-2-一条小河"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-2-一条小河"}},[t._v("#")]),t._v(" 3.7.2 一条小河")]),t._v(" "),n("p",[n("img",{staticClass:"lazy",attrs:{alt:"images","data-src":a(1324),loading:"lazy"}})]),t._v(" "),n("h5",{attrs:{id:"_3-7-3-一个线程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-3-一个线程"}},[t._v("#")]),t._v(" 3.7.3 一个线程")]),t._v(" "),n("p",[n("img",{staticClass:"lazy",attrs:{alt:"images","data-src":a(1325),loading:"lazy"}})]),t._v(" "),n("h5",{attrs:{id:"_3-7-4-代码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-4-代码"}},[t._v("#")]),t._v(" 3.7.4 代码")]),t._v(" "),n("p",[t._v("java.lang.ThreadLocal的set()方法：")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("T")]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),t._v(" t "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentThread")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadLocalMap")]),t._v(" map "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMap")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("map "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            map"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createMap")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("java.lang.TheadLocal的get()方法：")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("T")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),t._v(" t "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentThread")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadLocalMap")]),t._v(" map "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMap")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("map "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadLocalMap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Entry")]),t._v(" e "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" map"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEntry")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SuppressWarnings")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"unchecked"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("T")]),t._v(" result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("T")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInitialValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("所以TheadLocal的基本原理是：它在内部维护了一个Map，需要存入数据时，就以this为键，要存入的数据为值，存入Map。需要取出数据时，就以this为键，从Map中取出数据。")]),t._v(" "),n("h5",{attrs:{id:"_3-7-5-结论"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-5-结论"}},[t._v("#")]),t._v(" 3.7.5 结论")]),t._v(" "),n("p",[t._v("如果我们需要将数据在整个项目中按照没法通过方法的参数来实现，这时使用线程本地化技术是一个非常好的选择。")]),t._v(" "),n("h4",{attrs:{id:"_3-8-异常向上抛出的线路"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-8-异常向上抛出的线路"}},[t._v("#")]),t._v(" 3.8 异常向上抛出的线路")]),t._v(" "),n("p",[n("img",{staticClass:"lazy",attrs:{alt:"images","data-src":a(1326),loading:"lazy"}})]),t._v(" "),n("p",[t._v("上图中标记颜色的位置都是有try...catch块的代码，需要逐个检查一下，catch块捕获的异常是否转换为运行时异常又再次抛出。")]),t._v(" "),n("p",[t._v("如果没有抛出，异常就不会传递到Filter中，TransactionFilter就会认为代码执行过程中没有发生问题，从而提交事务，但是实际上应该回滚。下面是一个例子：")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 通用的批量增删改方法\n * @param sql\n * @param params 执行批量操作的二维数组\n *               每一条SQL语句的参数是一维数组\n *               多条SQL语句的参数就是二维数组\n * @return 每一条SQL语句返回的受影响的行数\n */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("batchUpdate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),t._v(" connection "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JDBCUtils")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConnection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" rowCountArr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        rowCountArr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" queryRunner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("batch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuntimeException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JDBCUtils")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("releaseConnection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" rowCountArr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"_4-代码实现"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-代码实现"}},[t._v("#")]),t._v(" 4. 代码实现")]),t._v(" "),n("h4",{attrs:{id:"_4-1-重构jdbcutils类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-重构jdbcutils类"}},[t._v("#")]),t._v(" 4.1 重构JDBCUtils类")]),t._v(" "),n("ul",[n("li",[t._v("要点1：将ThreadLocal对象声明为静态成员变量")]),t._v(" "),n("li",[t._v("要点2：重构获取数据库连接的方法")]),t._v(" "),n("li",[t._v("要点3：重构释放数据库连接的方法")])]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 功能1：创建数据源对象\n * 功能2：获取数据库连接并绑定到当前线程上\n * 功能3：释放数据库连接并从当前线程移除\n */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JDBCUtils")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将数据源对象设置为静态属性，保证大对象的单一实例")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataSource")]),t._v(" dataSource"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将ThreadLocal对象设置为静态成员变量，保证以此为键时从Map中取值能够取到同一个值")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadLocal")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" threadLocal "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadLocal")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.创建一个用于存储外部属性文件信息的Properties对象")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties")]),t._v(" properties "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.使用当前类的类加载器加载外部属性文件：jdbc.properties")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InputStream")]),t._v(" inputStream "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JDBCUtils")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClassLoader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getResourceAsStream")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jdbc.properties"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3.将外部属性文件jdbc.properties中的数据加载到properties对象中")]),t._v("\n            properties"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("load")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inputStream"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4.创建数据源对象")]),t._v("\n            dataSource "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DruidDataSourceFactory")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createDataSource")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("properties"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * 从数据源中获取数据库连接\n     * @return 数据库连接对象\n     */")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConnection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.尝试从当前线程获取Connection对象")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),t._v(" connection "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" threadLocal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("connection "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.如果从当前线程上没有获取到Connection对象那么从数据源获取")]),t._v("\n                connection "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" dataSource"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConnection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3.将Connection对象绑定到当前线程")]),t._v("\n                threadLocal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuntimeException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4.返回Connection对象")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * 释放数据库连接\n     * @param connection 要执行释放操作的连接对象\n     */")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("releaseConnection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),t._v(" connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("connection "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将Connection对象从当前线程移除")]),t._v("\n                threadLocal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuntimeException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"_4-2-重构basedao"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-重构basedao"}},[t._v("#")]),t._v(" 4.2 重构BaseDao")]),t._v(" "),n("ul",[n("li",[t._v("要点：去除释放数据库连接的操作（转移到TransactionFilter中）")])]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 各个具体Dao类的基类，泛型T对应具体实体类类型\n * @param <T>\n */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BaseDao")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("T")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("QueryRunner")]),t._v(" queryRunner "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("QueryRunner")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * 通用的批量增删改方法\n     * @param sql\n     * @param params 执行批量操作的二维数组\n     *               每一条SQL语句的参数是一维数组\n     *               多条SQL语句的参数就是二维数组\n     * @return 每一条SQL语句返回的受影响的行数\n     */")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("batchUpdate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),t._v(" connection "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JDBCUtils")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConnection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" rowCountArr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            rowCountArr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" queryRunner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("batch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuntimeException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* finally {\n            JDBCUtils.releaseConnection(connection);\n        }*/")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" rowCountArr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * 通用的增删改方法\n     * @param sql 要执行的SQL语句\n     * @param param 为SQL语句准备好的参数\n     * @return 受影响的行数\n     */")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" param"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" updatedRowCount "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),t._v(" connection "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JDBCUtils")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConnection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n            updatedRowCount "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" queryRunner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" param"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 为了让上层方法调用方便，将编译时异常捕获")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 为了不掩盖问题，将编译时异常封装为运行时异常抛出")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuntimeException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* finally {\n\n            // 关闭数据库连接\n            JDBCUtils.releaseConnection(connection);\n\n        }*/")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" updatedRowCount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * 查询单个对象\n     * @param clazz 单个对象所对应的实体类类型\n     * @param sql   查询单个对象所需要的SQL语句\n     * @param param SQL语句的参数\n     * @return      查询到的单个对象\n     */")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("T")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Class")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("T")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" clazz"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" param"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),t._v(" connection "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JDBCUtils")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConnection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("T")]),t._v(" t "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n            t "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" queryRunner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("query")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BeanHandler")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("clazz"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" param"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuntimeException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* finally {\n\n            // 关闭数据库连接\n            JDBCUtils.releaseConnection(connection);\n\n        }*/")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * 查询集合对象\n     * @param clazz 集合中单个对象所对应的实体类类型\n     * @param sql   查询集合所需要的SQL语句\n     * @param param SQL语句的参数\n     * @return      查询到的集合对象\n     */")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("T")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBeanList")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Class")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("T")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" clazz"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" param"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),t._v(" connection "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JDBCUtils")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConnection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("T")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" list "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n            list "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" queryRunner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("query")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BeanListHandler")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("clazz"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" param"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuntimeException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* finally {\n\n            // 关闭数据库连接\n            JDBCUtils.releaseConnection(connection);\n\n        }*/")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" list"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("注意：OrderDao中insertOrder()方法也要去掉关闭数据库连接的操作。")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("insertOrder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),t._v(" order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ※DBUtils没有封装获取自增主键的方法，需要我们使用原生的JDBC来完成")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.获取数据库连接")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),t._v(" connection "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JDBCUtils")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConnection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.创建PreparedStatement对象")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sql "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"INS222ERT INTO t_order(order_sequence,create_time,total_count,total_amount,order_status,user_id) VALUES(?,?,?,?,?,?)"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ①创建PreparedStatement对象，指明需要自增的主键")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PreparedStatement")]),t._v(" preparedStatement "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("prepareStatement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PreparedStatement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("RETURN_GENERATED_KEYS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ②给PreparedStatement对象设置SQL语句的参数")]),t._v("\n        preparedStatement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOrderSequence")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        preparedStatement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCreateTime")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        preparedStatement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTotalCount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        preparedStatement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDouble")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTotalAmount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        preparedStatement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOrderStatus")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        preparedStatement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ③执行更新")]),t._v("\n        preparedStatement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("executeUpdate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ④获取封装了自增主键的结果集")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResultSet")]),t._v(" generatedKeysResultSet "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" preparedStatement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getGeneratedKeys")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ⑤解析结果集")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("generatedKeysResultSet"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" orderId "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" generatedKeysResultSet"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            order"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setOrderId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("orderId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuntimeException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*finally {\n        JDBCUtils.releaseConnection(connection);\n    }*/")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"_4-3-创建一个用于显示通用错误信息的页面"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-创建一个用于显示通用错误信息的页面"}},[t._v("#")]),t._v(" 4.3 创建一个用于显示通用错误信息的页面")]),t._v(" "),n("h5",{attrs:{id:"_4-3-1-创建页面"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-1-创建页面"}},[t._v("#")]),t._v(" 4.3.1 创建页面")]),t._v(" "),n("p",[t._v("这个页面可以从login_success.html复制过来")]),t._v(" "),n("p",[n("img",{staticClass:"lazy",attrs:{alt:"images","data-src":a(1327),loading:"lazy"}})]),t._v(" "),n("h5",{attrs:{id:"_4-3-2-创建servlet跳转到页面"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-2-创建servlet跳转到页面"}},[t._v("#")]),t._v(" 4.3.2 创建Servlet跳转到页面")]),t._v(" "),n("p",[n("img",{staticClass:"lazy",attrs:{alt:"images","data-src":a(1328),loading:"lazy"}})]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("showSystemError")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletResponse")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" viewName "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("processTemplate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("viewName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"_4-4-创建transactionfilter"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-创建transactionfilter"}},[t._v("#")]),t._v(" 4.4 创建TransactionFilter")]),t._v(" "),n("p",[n("img",{staticClass:"lazy",attrs:{alt:"images","data-src":a(1329),loading:"lazy"}})]),t._v(" "),n("div",{staticClass:"language-xml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("filter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("filter-name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("TransactionFilter"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("filter-name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("filter-class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.atguigu.bookstore.filter.TransactionFilter"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("filter-class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("filter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("filter-mapping")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("filter-name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("TransactionFilter"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("filter-name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("url-pattern")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("/*"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("url-pattern")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("filter-mapping")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[t._v("Java代码如下：")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TransactionFilter")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Filter")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Set")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" PUBLIC_STATIC_RESOURCE_EXT_NAME_SET "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashSet")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        PUBLIC_STATIC_RESOURCE_EXT_NAME_SET"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('".png"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        PUBLIC_STATIC_RESOURCE_EXT_NAME_SET"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('".css"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        PUBLIC_STATIC_RESOURCE_EXT_NAME_SET"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('".js"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        PUBLIC_STATIC_RESOURCE_EXT_NAME_SET"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('".jpg"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        PUBLIC_STATIC_RESOURCE_EXT_NAME_SET"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('".gif"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("doFilter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletRequest")]),t._v(" req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletResponse")]),t._v(" resp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FilterChain")]),t._v(" chain"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 排除掉静态资源，它们和数据库操作没有关系")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.给请求和响应对象转换类型")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletResponse")]),t._v(" response "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletResponse")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" resp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.获取当前请求的ServletPath")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" servletPath "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getServletPath")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3.检查servletPath中是否包含“.”")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("servletPath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("contains")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"."')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" index "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" servletPath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("lastIndexOf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"."')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" extensionName "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" servletPath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("substring")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PUBLIC_STATIC_RESOURCE_EXT_NAME_SET"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("contains")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("extensionName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                chain"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("doFilter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 执行事务操作")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.获取数据库连接")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),t._v(" connection "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JDBCUtils")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConnection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.使用try...catch...finally块管理事务")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3.关闭事务的自动提交")]),t._v("\n            connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAutoCommit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4.尝试执行目标代码")]),t._v("\n            chain"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("doFilter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 5.如果上面的操作没有抛出异常")]),t._v("\n            connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 6.如果上面的操作抛出了异常")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rollback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),t._v(" e1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                e1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 7.捕获到异常后，跳转到专门的页面显示提示消息")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" message "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRequestDispatcher")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/ErrorServlet?method=showSystemError"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("forward")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 8.不管前面操作是成功还是失败，到这里都要释放数据库连接")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JDBCUtils")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("releaseConnection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FilterConfig")]),t._v(" config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletException")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("destroy")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);